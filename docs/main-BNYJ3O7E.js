import{a as P,b as me,c as kp,d as N,e as SI,f as ul,g as AI,h as MI,i as xI,j as Op,k as RI,l as qa,m as Fp,n as cl,o as NI,p as PI,q as Vp,r as ze,s as xi,t as Un,u as ll,v as za,w as kI,x as OI,y as Br,z as qt}from"./chunk-4ZHOUZTK.js";function FI(n,e){return Object.is(n,e)}var lt=null,dl=!1,hl=1,hr=Symbol("SIGNAL");function Se(n){let e=lt;return lt=n,e}function VI(){return lt}var Wa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bp(n){if(dl)throw new Error("");if(lt===null)return;lt.consumerOnSignalRead(n);let e=lt.nextProducerIndex++;if(ml(lt),e<lt.producerNode.length&&lt.producerNode[e]!==n&&Ga(lt)){let t=lt.producerNode[e];gl(t,lt.producerIndexOfThis[e])}lt.producerNode[e]!==n&&(lt.producerNode[e]=n,lt.producerIndexOfThis[e]=Ga(lt)?UI(n,lt,e):0),lt.producerLastReadVersion[e]=n.version}function rN(){hl++}function LI(n){if(!(Ga(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hl)){if(!n.producerMustRecompute(n)&&!$p(n)){n.dirty=!1,n.lastCleanEpoch=hl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hl}}function jI(n){if(n.liveConsumerNode===void 0)return;let e=dl;dl=!0;try{for(let t of n.liveConsumerNode)t.dirty||iN(t)}finally{dl=e}}function BI(){return lt?.consumerAllowSignalWrites!==!1}function iN(n){n.dirty=!0,jI(n),n.consumerMarkedDirty?.(n)}function pl(n){return n&&(n.nextProducerIndex=0),Se(n)}function Up(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ga(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $p(n){ml(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(LI(t),r!==t.version))return!0}return!1}function Hp(n){if(ml(n),Ga(n))for(let e=0;e<n.producerNode.length;e++)gl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function UI(n,e,t){if($I(n),n.liveConsumerNode.length===0&&HI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=UI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gl(n,e){if($I(n),n.liveConsumerNode.length===1&&HI(n))for(let r=0;r<n.producerNode.length;r++)gl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ml(i),i.producerIndexOfThis[r]=e}}function Ga(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ml(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function $I(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function HI(n){return n.producerNode!==void 0}function qI(n){let e=Object.create(oN);e.computation=n;let t=()=>{if(LI(e),Bp(e),e.value===fl)throw e.error;return e.value};return t[hr]=e,t}var Lp=Symbol("UNSET"),jp=Symbol("COMPUTING"),fl=Symbol("ERRORED"),oN=me(P({},Wa),{value:Lp,dirty:!0,error:null,equal:FI,producerMustRecompute(n){return n.value===Lp||n.value===jp},producerRecomputeValue(n){if(n.value===jp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=jp;let t=pl(n),r;try{r=n.computation()}catch(i){r=fl,n.error=i}finally{Up(n,t)}if(e!==Lp&&e!==fl&&r!==fl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function sN(){throw new Error}var zI=sN;function GI(){zI()}function WI(n){zI=n}var aN=null;function KI(n){let e=Object.create(YI);e.value=n;let t=()=>(Bp(e),e.value);return t[hr]=e,t}function qp(n,e){BI()||GI(),n.equal(n.value,e)||(n.value=e,uN(n))}function QI(n,e){BI()||GI(),qp(n,e(n.value))}var YI=me(P({},Wa),{equal:FI,value:void 0});function uN(n){n.version++,rN(),jI(n),aN?.()}function ae(n){return typeof n=="function"}function Vo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yl=Vo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ri(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof yl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ZI(o)}catch(s){e=e??[],s instanceof yl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ZI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ri(t,e)}remove(e){let{_finalizers:t}=this;t&&Ri(t,e),e instanceof n&&e._removeParent(this)}};Qe.EMPTY=(()=>{let n=new Qe;return n.closed=!0,n})();var zp=Qe.EMPTY;function vl(n){return n instanceof Qe||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function ZI(n){ae(n)?n():n.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Lo={setTimeout(n,e,...t){let{delegate:r}=Lo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Lo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _l(n){Lo.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(n);else throw n})}function Ka(){}var JI=Gp("C",void 0,void 0);function XI(n){return Gp("E",void 0,n)}function eD(n){return Gp("N",n,void 0)}function Gp(n,e,t){return{kind:n,value:e,error:t}}var Ni=null;function jo(n){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!Ni;if(e&&(Ni={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ni;if(Ni=null,t)throw r}}else n()}function tD(n){Sn.useDeprecatedSynchronousErrorHandling&&Ni&&(Ni.errorThrown=!0,Ni.error=n)}var Pi=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vl(e)&&e.add(this)):this.destination=dN}static create(e,t,r){return new fr(e,t,r)}next(e){this.isStopped?Kp(eD(e),this):this._next(e)}error(e){this.isStopped?Kp(XI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kp(JI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cN=Function.prototype.bind;function Wp(n,e){return cN.call(n,e)}var Qp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wl(r)}else wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wl(t)}}},fr=class extends Pi{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wp(e.next,o),error:e.error&&Wp(e.error,o),complete:e.complete&&Wp(e.complete,o)}):i=e}this.destination=new Qp(i)}};function wl(n){Sn.useDeprecatedSynchronousErrorHandling?tD(n):_l(n)}function lN(n){throw n}function Kp(n,e){let{onStoppedNotification:t}=Sn;t&&Lo.setTimeout(()=>t(n,e))}var dN={closed:!0,next:Ka,error:lN,complete:Ka};var Bo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Yp(...n){return Zp(n)}function Zp(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=fN(t)?t:new fr(t,r,i);return jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nD(r),new r((i,o)=>{let s=new fr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Bo](){return this}pipe(...t){return Zp(t)(this)}toPromise(t){return t=nD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function nD(n){var e;return(e=n??Sn.Promise)!==null&&e!==void 0?e:Promise}function hN(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function fN(n){return n&&n instanceof Pi||hN(n)&&vl(n)}function Jp(n){return ae(n?.lift)}function fe(n){return e=>{if(Jp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new Xp(n,e,t,r,i)}var Xp=class extends Pi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Uo(){return fe((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $o=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return Uo()(this)}};var rD=Vo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new El(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rD}next(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zp:(this.currentObservers=null,o.push(t),new Qe(()=>{this.currentObservers=null,Ri(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new El(e,t),n})(),El=class extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:zp}};var wt=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qa={now(){return(Qa.delegate||Date).now()},delegate:void 0};var Il=class extends He{constructor(e=1/0,t=1/0,r=Qa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Dl=class extends Qe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ya={setInterval(n,e,...t){let{delegate:r}=Ya;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ya;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ho=class extends Dl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ya.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ya.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ri(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qo.now=Qa.now;var zo=class extends qo{constructor(e,t=qo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Za=new zo(Ho);var Cl=class extends Ho{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var bl=class extends zo{};var eg=new bl(Cl);var kt=new ye(n=>n.complete());function iD(n){return n&&ae(n.schedule)}function tg(n){return n[n.length-1]}function Tl(n){return ae(tg(n))?n.pop():void 0}function $n(n){return iD(tg(n))?n.pop():void 0}function oD(n,e){return typeof tg(n)=="number"?n.pop():e}var Sl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Al(n){return ae(n?.then)}function Ml(n){return ae(n[Bo])}function xl(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function Rl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nl=pN();function Pl(n){return ae(n?.[Nl])}function kl(n){return AI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ul(t.read());if(i)return yield ul(void 0);yield yield ul(r)}}finally{t.releaseLock()}})}function Ol(n){return ae(n?.getReader)}function Be(n){if(n instanceof ye)return n;if(n!=null){if(Ml(n))return gN(n);if(Sl(n))return mN(n);if(Al(n))return yN(n);if(xl(n))return sD(n);if(Pl(n))return vN(n);if(Ol(n))return _N(n)}throw Rl(n)}function gN(n){return new ye(e=>{let t=n[Bo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mN(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yN(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_l)})}function vN(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sD(n){return new ye(e=>{wN(n,e).catch(t=>e.error(t))})}function _N(n){return sD(kl(n))}function wN(n,e){var t,r,i,o;return SI(this,void 0,void 0,function*(){try{for(t=MI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function zt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function fn(n,e=0){return fe((t,r)=>{t.subscribe(pe(r,i=>zt(r,n,()=>r.next(i),e),()=>zt(r,n,()=>r.complete(),e),i=>zt(r,n,()=>r.error(i),e)))})}function An(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aD(n,e){return Be(n).pipe(An(e),fn(e))}function uD(n,e){return Be(n).pipe(An(e),fn(e))}function cD(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lD(n,e){return new ye(t=>{let r;return zt(t,e,()=>{r=n[Nl](),zt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Fl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{zt(t,e,()=>{let r=n[Symbol.asyncIterator]();zt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dD(n,e){return Fl(kl(n),e)}function hD(n,e){if(n!=null){if(Ml(n))return aD(n,e);if(Sl(n))return cD(n,e);if(Al(n))return uD(n,e);if(xl(n))return Fl(n,e);if(Pl(n))return lD(n,e);if(Ol(n))return dD(n,e)}throw Rl(n)}function Ae(n,e){return e?hD(n,e):Be(n)}function ne(...n){let e=$n(n);return Ae(n,e)}function Go(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function ng(n){return!!n&&(n instanceof ye||ae(n.lift)&&ae(n.subscribe))}var pr=Vo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:EN}=Array;function IN(n,e){return EN(e)?n(...e):n(e)}function Vl(n){return Q(e=>IN(n,e))}var{isArray:DN}=Array,{getPrototypeOf:CN,prototype:bN,keys:TN}=Object;function Ll(n){if(n.length===1){let e=n[0];if(DN(e))return{args:e,keys:null};if(SN(e)){let t=TN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function SN(n){return n&&typeof n=="object"&&CN(n)===bN}function jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ja(...n){let e=$n(n),t=Tl(n),{args:r,keys:i}=Ll(n);if(r.length===0)return Ae([],e);let o=new ye(AN(r,e,i?s=>jl(i,s):Pt));return t?o.pipe(Vl(t)):o}function AN(n,e,t=Pt){return r=>{fD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)fD(e,()=>{let l=Ae(n[u],e),h=!1;l.subscribe(pe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fD(n,e,t){n?zt(t,n,e):e()}function pD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let M=!1;Be(t(A,h++)).subscribe(pe(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let B=u.shift();s?zt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(pe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function rt(n,e,t=1/0){return ae(e)?rt((r,i)=>Q((o,s)=>e(r,o,i,s))(Be(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>pD(r,i,n,t)))}function Ur(n=1/0){return rt(Pt,n)}function gD(){return Ur(1)}function Wo(...n){return gD()(Ae(n,$n(n)))}function Bl(n){return new ye(e=>{Be(n()).subscribe(e)})}function rg(...n){let e=Tl(n),{args:t,keys:r}=Ll(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Be(t[h]).subscribe(pe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?jl(r,a):a),o.complete())}))}});return e?i.pipe(Vl(e)):i}function ig(...n){let e=$n(n),t=oD(n,1/0),r=n;return r.length?r.length===1?Be(r[0]):Ur(t)(Ae(r,e)):kt}function Et(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function $r(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(pe(t,void 0,void 0,s=>{o=Be(n(s,$r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(pe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ki(n,e){return ae(e)?rt(n,e,1):rt(n,1)}function Hr(n){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function gr(n){return n<=0?()=>kt:fe((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function og(n){return Q(()=>n)}function sg(n,e=Pt){return n=n??MN,fe((t,r)=>{let i,o=!0;t.subscribe(pe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function MN(n,e){return n===e}function Ul(n=xN){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xN(){return new pr}function Xa(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Pt,gr(1),t?Hr(e):Ul(()=>new pr))}function Ko(n){return n<=0?()=>kt:fe((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ag(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Pt,Ko(1),t?Hr(e):Ul(()=>new pr))}function eu(){return fe((n,e)=>{let t,r=!1;n.subscribe(pe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Oi(n,e){return fe(mD(n,e,arguments.length>=2,!0))}function yD(n={}){let{connector:e=()=>new He,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return fe((A,M)=>{l++,!p&&!h&&m();let B=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=ug(b,i))}),B.subscribe(M),!s&&l>0&&(s=new fr({next:G=>B.next(G),error:G=>{p=!0,m(),a=ug(y,t,G),B.error(G)},complete:()=>{h=!0,m(),a=ug(y,r),B.complete()}}),Be(A).subscribe(s))})(o)}}function ug(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new fr({next:()=>{r.unsubscribe(),n()}});return Be(e(...t)).subscribe(r)}function $l(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,yD({connector:()=>new Il(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Fi(...n){let e=$n(n);return fe((t,r)=>{(e?Wo(n,t,e):Wo(n,t)).subscribe(r)})}function Ye(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,h=o++;Be(n(u,h)).subscribe(i=pe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Hl(n,e){return ae(e)?Ye(()=>n,e):Ye(()=>n)}function cg(n){return fe((e,t)=>{Be(n).subscribe(pe(t,()=>t.complete(),Ka)),!t.closed&&e.subscribe(t)})}function dt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var iC="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(lm(e,t)),this.code=e}};function lm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function lu(n){return{toString:n}.toString()}var ql="__parameters__";function RN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function oC(n,e,t){return lu(()=>{let r=RN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ql)?u[ql]:Object.defineProperty(u,ql,{value:[]})[ql];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rn=globalThis;function Oe(n){for(let e in n)if(n[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function NN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function vD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var PN=Oe({__forward_ref__:Oe});function ps(n){return n.__forward_ref__=ps,n.toString=function(){return Gt(this())},n}function Ot(n){return sC(n)?n():n}function sC(n){return typeof n=="function"&&n.hasOwnProperty(PN)&&n.__forward_ref__===ps}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ad(n){return _D(n,uC)||_D(n,cC)}function aC(n){return Ad(n)!==null}function _D(n,e){return n.hasOwnProperty(e)?n[e]:null}function kN(n){let e=n&&(n[uC]||n[cC]);return e||null}function wD(n){return n&&(n.hasOwnProperty(ED)||n.hasOwnProperty(ON))?n[ED]:null}var uC=Oe({\u0275prov:Oe}),ED=Oe({\u0275inj:Oe}),cC=Oe({ngInjectableDef:Oe}),ON=Oe({ngInjectorDef:Oe}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lC(n){return n&&!!n.\u0275providers}var FN=Oe({\u0275cmp:Oe}),VN=Oe({\u0275dir:Oe}),LN=Oe({\u0275pipe:Oe}),jN=Oe({\u0275mod:Oe}),ed=Oe({\u0275fac:Oe}),nu=Oe({__NG_ELEMENT_ID__:Oe}),ID=Oe({__NG_ENV_ID__:Oe});function Md(n){return typeof n=="string"?n:n==null?"":String(n)}function BN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Md(n)}function UN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function dm(n,e){throw new X(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Dg;function dC(){return Dg}function gn(n){let e=Dg;return Dg=n,e}function hC(n,e,t){let r=Ad(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;dm(n,"Injector")}var $N={},iu=$N,Cg="__NG_DI_FLAG__",td="ngTempTokenPath",HN="ngTokenPath",qN=/\n/gm,zN="\u0275",DD="__source",Xo;function GN(){return Xo}function qr(n){let e=Xo;return Xo=n,e}function WN(n,e=ge.Default){if(Xo===void 0)throw new X(-203,!1);return Xo===null?hC(n,void 0,e):Xo.get(n,e&ge.Optional?null:void 0,e)}function F(n,e=ge.Default){return(dC()||WN)(Ot(n),e)}function $(n,e=ge.Default){return F(n,xd(e))}function xd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bg(n){let e=[];for(let t=0;t<n.length;t++){let r=Ot(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],u=KN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function fC(n,e){return n[Cg]=e,n.prototype[Cg]=e,n}function KN(n){return n[Cg]}function QN(n,e,t,r){let i=n[td];throw e[DD]&&i.unshift(e[DD]),n.message=YN(`
`+n.message,i,t,r),n[HN]=i,n[td]=null,n}function YN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zN?n.slice(2):n;let i=Gt(e);if(Array.isArray(e))i=e.map(Gt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(qN,`
  `)}`}var gs=fC(oC("Optional"),8);var hm=fC(oC("SkipSelf"),4);function ts(n,e){let t=n.hasOwnProperty(ed);return t?n[ed]:null}function fm(n,e){n.forEach(t=>Array.isArray(t)?fm(t,e):e(t))}function pC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function JN(n,e,t){let r=du(n,e);return r>=0?n[r|1]=t:(r=~r,ZN(n,r,e,t)),r}function lg(n,e){let t=du(n,e);if(t>=0)return n[t|1]}function du(n,e){return XN(n,e,1)}function XN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ns={},mn=[],rs=new W(""),gC=new W("",-1),mC=new W(""),rd=class{get(e,t=iu){if(t===iu){let r=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw r.name="NullInjectorError",r}return t}},yC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(yC||{}),zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zn||{}),Wr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wr||{});function eP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Tg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];tP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function vC(n){return n===3||n===4||n===6}function tP(n){return n.charCodeAt(0)===64}function ou(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?CD(n,t,i,null,e[++r]):CD(n,t,i,null,null))}}return n}function CD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var _C="ng-template";function nP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&eP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(pm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function pm(n){return n.type===4&&n.value!==_C}function rP(n,e,t){let r=n.type===4&&!t?_C:n.value;return e===r}function iP(n,e,t){let r=4,i=n.attrs,o=i!==null?aP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Mn(r)&&!Mn(u))return!1;if(s&&Mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!rP(n,u,t)||u===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!nP(n,i,u,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=oP(u,i,pm(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function oP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uP(e,n)}function sP(n,e,t=!1){for(let r=0;r<e.length;r++)if(iP(n,e[r],t))return!0;return!1}function aP(n){for(let e=0;e<n.length;e++){let t=n[e];if(vC(t))return e}return n.length}function uP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bD(n,e){return n?":not("+e.trim()+")":e}function cP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=bD(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=bD(o,i)),e}function lP(n){return n.map(cP).join(",")}function dP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return{attrs:e,classes:t}}function mt(n){return lu(()=>{let e=CC(n),t=me(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zn.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});bC(t);let r=n.dependencies;return t.directiveDefs=SD(r,!1),t.pipeDefs=SD(r,!0),t.id=pP(t),t})}function hP(n){return Kr(n)||wC(n)}function fP(n){return n!==null}function ft(n){return lu(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function TD(n,e){if(n==null)return ns;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Wr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Wr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Wt(n){return lu(()=>{let e=CC(n);return bC(e),e})}function Kr(n){return n[FN]||null}function wC(n){return n[VN]||null}function EC(n){return n[LN]||null}function IC(n){let e=Kr(n)||wC(n)||EC(n);return e!==null?e.standalone:!1}function DC(n,e){let t=n[jN]||null;if(!t&&e===!0)throw new Error(`Type ${Gt(n)} does not have '\u0275mod' property.`);return t}function CC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ns,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TD(n.inputs,e),outputs:TD(n.outputs),debugInfo:null}}function bC(n){n.features?.forEach(e=>e(n))}function SD(n,e){if(!n)return null;let t=e?EC:hP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(fP)}function pP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gP(...n){return{\u0275providers:TC(!0,n),\u0275fromNgModule:!0}}function TC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return fm(e,s=>{let a=s;Sg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&SC(i,o),t}function SC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gm(i,o=>{e(o,r)})}}function Sg(n,e,t,r){if(n=Ot(n),!n)return!1;let i=null,o=wD(n),s=!o&&Kr(n);if(!o&&!s){let u=n.ngModule;if(o=wD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Sg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{fm(o.imports,h=>{Sg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&SC(l,e)}if(!a){let l=ts(i)||(()=>new i);e({provide:i,useFactory:l,deps:mn},i),e({provide:mC,useValue:i,multi:!0},i),e({provide:rs,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;gm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function gm(n,e){for(let t of n)lC(t)&&(t=t.\u0275providers),Array.isArray(t)?gm(t,e):e(t)}var mP=Oe({provide:String,useValue:Oe});function AC(n){return n!==null&&typeof n=="object"&&mP in n}function yP(n){return!!(n&&n.useExisting)}function vP(n){return!!(n&&n.useFactory)}function is(n){return typeof n=="function"}function _P(n){return!!n.useClass}var Rd=new W(""),Yl={},wP={},dg;function mm(){return dg===void 0&&(dg=new rd),dg}var rn=class{},su=class extends rn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mg(e,s=>this.processProvider(s)),this.records.set(gC,Qo(void 0,this)),i.has("environment")&&this.records.set(rn,Qo(void 0,this));let o=this.records.get(Rd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(mC,mn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=qr(this),r=gn(void 0),i;try{return e()}finally{qr(t),gn(r)}}get(e,t=iu,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ID))return e[ID](this);r=xd(r);let i,o=qr(this),s=gn(void 0);try{if(!(r&ge.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=bP(e)&&Ad(e);l&&this.injectableDefInScope(l)?u=Qo(Ag(e),Yl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ge.Self?mm():this.parent;return t=r&ge.Optional&&t===iu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[td]=a[td]||[]).unshift(Gt(e)),o)throw a;return QN(a,e,"R3InjectorError",this.source)}else throw a}finally{gn(s),qr(o)}}resolveInjectorInitializers(){let e=Se(null),t=qr(this),r=gn(void 0),i;try{let o=this.get(rs,mn,ge.Self);for(let s of o)s()}finally{qr(t),gn(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Ot(e);let t=is(e)?e:Ot(e&&e.provide),r=IP(e);if(!is(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Qo(void 0,Yl,!0),i.factory=()=>bg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===Yl&&(t.value=wP,t.value=t.factory()),typeof t.value=="object"&&t.value&&CP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ot(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ag(n){let e=Ad(n),t=e!==null?e.factory:ts(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return EP(n);throw new X(204,!1)}function EP(n){if(n.length>0)throw new X(204,!1);let t=kN(n);return t!==null?()=>t.factory(n):()=>new n}function IP(n){if(AC(n))return Qo(void 0,n.useValue);{let e=MC(n);return Qo(e,Yl)}}function MC(n,e,t){let r;if(is(n)){let i=Ot(n);return ts(i)||Ag(i)}else if(AC(n))r=()=>Ot(n.useValue);else if(vP(n))r=()=>n.useFactory(...bg(n.deps||[]));else if(yP(n))r=()=>F(Ot(n.useExisting));else{let i=Ot(n&&(n.useClass||n.provide));if(DP(n))r=()=>new i(...bg(n.deps));else return ts(i)||Ag(i)}return r}function Qo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DP(n){return!!n.deps}function CP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function bP(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Mg(n,e){for(let t of n)Array.isArray(t)?Mg(t,e):t&&lC(t)?Mg(t.\u0275providers,e):e(t)}function Qn(n,e){n instanceof su&&n.assertNotDestroyed();let t,r=qr(n),i=gn(void 0);try{return e()}finally{qr(r),gn(i)}}function xC(){return dC()!==void 0||GN()!=null}function TP(n){if(!xC())throw new X(-203,!1)}function SP(n){let e=Rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function AP(n){return typeof n=="function"}var _r=0,_e=1,ue=2,Ft=3,xn=4,Pn=5,id=6,od=7,Nn=8,os=9,Gn=10,ot=11,au=12,AD=13,ms=14,Wn=15,ss=16,Yo=17,as=18,Nd=19,RC=20,zr=21,hg=22,yn=23,Qr=25,NC=1;var Li=7,sd=8,ad=9,vn=10,ud=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ud||{});function Gr(n){return Array.isArray(n)&&typeof n[NC]=="object"}function wr(n){return Array.isArray(n)&&n[NC]===!0}function PC(n){return(n.flags&4)!==0}function Pd(n){return n.componentOffset>-1}function ym(n){return(n.flags&1)===1}function Yr(n){return!!n.template}function xg(n){return(n[ue]&512)!==0}var Rg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function kC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function zi(){return OC}function OC(n){return n.type.prototype.ngOnChanges&&(n.setInput=xP),MP}zi.ngInherit=!0;function MP(){let n=VC(this),e=n?.current;if(e){let t=n.previous;if(t===ns)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function xP(n,e,t,r,i){let o=this.declaredInputs[r],s=VC(n)||RP(n,{previous:ns,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Rg(l&&l.currentValue,t,u===ns),kC(n,e,i,t)}var FC="__ngSimpleChanges__";function VC(n){return n[FC]||null}function RP(n,e){return n[FC]=e}var MD=null;var Hn=function(n,e,t){MD?.(n,e,t)},NP="svg",PP="math";function Kn(n){for(;Array.isArray(n);)n=n[_r];return n}function LC(n,e){return Kn(e[n])}function _n(n,e){return Kn(e[n.index])}function jC(n,e){return n.data[e]}function Jr(n,e){let t=e[n];return Gr(t)?t:t[_r]}function vm(n){return(n[ue]&128)===128}function kP(n){return wr(n[Ft])}function cd(n,e){return e==null?null:n[e]}function BC(n){n[Yo]=0}function UC(n){n[ue]&1024||(n[ue]|=1024,vm(n)&&Od(n))}function OP(n,e){for(;n>0;)e=e[ms],n--;return e}function kd(n){return!!(n[ue]&9216||n[yn]?.dirty)}function Ng(n){n[Gn].changeDetectionScheduler?.notify(8),n[ue]&64&&(n[ue]|=1024),kd(n)&&Od(n)}function Od(n){n[Gn].changeDetectionScheduler?.notify(0);let e=ji(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!vm(e)));)e=ji(e)}function $C(n,e){if((n[ue]&256)===256)throw new X(911,!1);n[zr]===null&&(n[zr]=[]),n[zr].push(e)}function FP(n,e){if(n[zr]===null)return;let t=n[zr].indexOf(e);t!==-1&&n[zr].splice(t,1)}function ji(n){let e=n[Ft];return wr(e)?e[Ft]:e}var we={lFrame:ZC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var HC=!1;function VP(){return we.lFrame.elementDepthCount}function LP(){we.lFrame.elementDepthCount++}function jP(){we.lFrame.elementDepthCount--}function qC(){return we.bindingsEnabled}function BP(){return we.skipHydrationRootTNode!==null}function UP(n){return we.skipHydrationRootTNode===n}function $P(){we.skipHydrationRootTNode=null}function Ve(){return we.lFrame.lView}function Kt(){return we.lFrame.tView}function Ee(n){return we.lFrame.contextLView=n,n[Nn]}function Ie(n){return we.lFrame.contextLView=null,n}function Vt(){let n=zC();for(;n!==null&&n.type===64;)n=n.parent;return n}function zC(){return we.lFrame.currentTNode}function HP(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function hu(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function GC(){return we.lFrame.isParent}function qP(){we.lFrame.isParent=!1}function WC(){return HC}function xD(n){HC=n}function zP(n){return we.lFrame.bindingIndex=n}function Fd(){return we.lFrame.bindingIndex++}function GP(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WP(){return we.lFrame.inI18n}function KP(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pg(e)}function QP(){return we.lFrame.currentDirectiveIndex}function Pg(n){we.lFrame.currentDirectiveIndex=n}function YP(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function KC(n){we.lFrame.currentQueryIndex=n}function ZP(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Pn]:null}function QC(n,e,t){if(t&ge.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=ZP(o),i===null||(o=o[ms],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=YC();return r.currentTNode=e,r.lView=n,!0}function _m(n){let e=YC(),t=n[_e];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YC(){let n=we.lFrame,e=n===null?null:n.child;return e===null?ZC(n):e}function ZC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JC(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var XC=JC;function wm(){let n=JC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function JP(n){return(we.lFrame.contextLView=OP(n,we.lFrame.contextLView))[Nn]}function ys(){return we.lFrame.selectedIndex}function Bi(n){we.lFrame.selectedIndex=n}function Vd(){let n=we.lFrame;return jC(n.tView,n.selectedIndex)}function XP(){return we.lFrame.currentNamespace}var e0=!0;function Em(){return e0}function Im(n){e0=n}function e1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=OC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Dm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zl(n,e,t){t0(n,e,3,t)}function Jl(n,e,t,r){(n[ue]&3)===t&&t0(n,e,t,r)}function fg(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function t0(n,e,t,r){let i=r!==void 0?n[Yo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Yo]+=65536),(a<o||o==-1)&&(t1(n,t,e,u),n[Yo]=(n[Yo]&4294901760)+u+2),u++}function RD(n,e){Hn(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),Hn(5,n,e)}}function t1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ue]>>14<n[Yo]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,RD(a,o)):RD(a,o)}var es=-1,Ui=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function n1(n){return n instanceof Ui}function r1(n){return(n.flags&8)!==0}function i1(n){return(n.flags&16)!==0}var pg={},kg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);let i=this.injector.get(e,pg,r);return i!==pg||t===pg?i:this.parentInjector.get(e,t,r)}};function n0(n){return n!==es}function ld(n){return n&32767}function o1(n){return n>>16}function dd(n,e){let t=o1(n),r=e;for(;t>0;)r=r[ms],t--;return r}var Og=!0;function ND(n){let e=Og;return Og=n,e}var s1=256,r0=s1-1,i0=5,a1=0,qn={};function u1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(nu)&&(r=t[nu]),r==null&&(r=t[nu]=a1++);let i=r&r0,o=1<<i;e.data[n+(i>>i0)]|=o}function hd(n,e){let t=o0(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,gg(r.data,n),gg(e,null),gg(r.blueprint,null));let i=Cm(n,e),o=n.injectorIndex;if(n0(i)){let s=ld(i),a=dd(i,e),u=a[_e].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function gg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function o0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Cm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=l0(i),r===null)return es;if(t++,i=i[ms],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return es}function Fg(n,e,t){u1(n,e,t)}function c1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(vC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function s0(n,e,t){if(t&ge.Optional||n!==void 0)return n;dm(e,"NodeInjector")}function a0(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[os],o=gn(void 0);try{return i?i.get(e,r,t&ge.Optional):hC(e,r,t&ge.Optional)}finally{gn(o)}}return s0(r,e,t)}function u0(n,e,t,r=ge.Default,i){if(n!==null){if(e[ue]&2048&&!(r&ge.Self)){let s=p1(n,e,t,r,qn);if(s!==qn)return s}let o=c0(n,e,t,r,qn);if(o!==qn)return o}return a0(e,t,r,i)}function c0(n,e,t,r,i){let o=h1(t);if(typeof o=="function"){if(!QC(e,n,r))return r&ge.Host?s0(i,t,r):a0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))dm(t);else return s}finally{XC()}}else if(typeof o=="number"){let s=null,a=o0(n,e),u=es,l=r&ge.Host?e[Wn][Pn]:null;for((a===-1||r&ge.SkipSelf)&&(u=a===-1?Cm(n,e):e[a+8],u===es||!kD(r,!1)?a=-1:(s=e[_e],a=ld(u),e=dd(u,e)));a!==-1;){let h=e[_e];if(PD(o,a,h.data)){let p=l1(a,e,t,s,r,l);if(p!==qn)return p}u=e[a+8],u!==es&&kD(r,e[_e].data[a+8]===l)&&PD(o,a,e)?(s=h,a=ld(u),e=dd(u,e)):a=-1}}return i}function l1(n,e,t,r,i,o){let s=e[_e],a=s.data[n+8],u=r==null?Pd(a)&&Og:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,h=d1(a,s,t,u,l);return h!==null?us(e,s,h,a):qn}function d1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Yr(y)&&y.type===t)return u}return null}function us(n,e,t,r){let i=n[t],o=e.data;if(n1(i)){let s=i;s.resolving&&UN(BN(o[t]));let a=ND(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?gn(s.injectImpl):null,h=QC(n,r,ge.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&e1(t,o[t],e)}finally{l!==null&&gn(l),ND(a),s.resolving=!1,XC()}}return i}function h1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nu)?n[nu]:void 0;return typeof e=="number"?e>=0?e&r0:f1:e}function PD(n,e,t){let r=1<<n;return!!(t[e+(n>>i0)]&r)}function kD(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var Vi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return u0(this._tNode,this._lView,e,xd(r),t)}};function f1(){return new Vi(Vt(),Ve())}function fu(n){return lu(()=>{let e=n.prototype.constructor,t=e[ed]||Vg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ed]||Vg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Vg(n){return sC(n)?()=>{let e=Vg(Ot(n));return e&&e()}:ts(n)}function p1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ue]&2048&&!(s[ue]&512);){let a=c0(o,s,t,r|ge.Self,qn);if(a!==qn)return a;let u=o.parent;if(!u){let l=s[RC];if(l){let h=l.get(t,qn,r);if(h!==qn)return h}u=l0(s),s=s[ms]}o=u}return i}function l0(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Pn]:null}function bm(n){return c1(Vt(),n)}function OD(n,e=null,t=null,r){let i=d0(n,e,t,r);return i.resolveInjectorInitializers(),i}function d0(n,e=null,t=null,r,i=new Set){let o=[t||mn,gP(n)];return r=r||(typeof n=="object"?void 0:Gt(n)),new su(o,e||mm(),r||null,i)}var on=class n{static{this.THROW_IF_NOT_FOUND=iu}static{this.NULL=new rd}static create(e,t){if(Array.isArray(e))return OD({name:""},t,e,"");{let r=e.name??"";return OD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>F(gC)})}static{this.__NG_ELEMENT_ID__=-1}};var g1=new W("");g1.__NG_ELEMENT_ID__=n=>{let e=Vt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ge.Optional)return null;throw new X(204,!1)};var m1="ngOriginalError";function mg(n){return n[m1]}var h0=!0,Tm=(()=>{class n{static{this.__NG_ELEMENT_ID__=y1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Lg=class extends Tm{constructor(e){super(),this._lView=e}onDestroy(e){return $C(this._lView,e),()=>FP(this._lView,e)}};function y1(){return new Lg(Ve())}var vs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var jg=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,xC()&&(this.destroyRef=$(Tm,{optional:!0})??void 0,this.pendingTasks=$(vs,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},it=jg;function fd(...n){}function f0(n){let e,t;function r(){n=fd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function FD(n){return queueMicrotask(()=>n()),()=>{n=fd}}var Sm="isAngularZone",pd=Sm+"_ID",v1=0,Ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=h0}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,E1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,_1,fd,fd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},_1={};function Am(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function w1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){f0(()=>{n.callbackScheduled=!1,Bg(n),n.isCheckStableRunning=!0,Am(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bg(n)}function E1(n){let e=()=>{w1(n)},t=v1++;n._inner=n._inner.fork({name:"angular",properties:{[Sm]:!0,[pd]:t,[pd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(I1(u))return r.invokeTask(o,s,a,u);try{return VD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),LD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return VD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!D1(u)&&e(),LD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Bg(n),Am(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Bg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function VD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LD(n){n._nesting--,Am(n)}var gd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function I1(n){return p0(n,"__ignore_ng_zone__")}function D1(n){return p0(n,"__scheduler_tick__")}function p0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function C1(n="zone.js",e){return n==="noop"?new gd:n==="zone.js"?new Ce(e):n}var mr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&mg(e);for(;t&&mg(t);)t=mg(t);return t||null}},b1=new W("",{providedIn:"root",factory:()=>{let n=$(Ce),e=$(mr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function T1(){return Ld(Vt(),Ve())}function Ld(n,e){return new Xr(_n(n,e))}var Xr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=T1}}return n})();function g0(n){return(n.flags&128)===128}var m0=new Map,S1=0;function A1(){return S1++}function M1(n){m0.set(n[Nd],n)}function Ug(n){m0.delete(n[Nd])}var jD="__ngContext__";function $i(n,e){Gr(e)?(n[jD]=e[Nd],M1(e)):n[jD]=e}function y0(n){return _0(n[au])}function v0(n){return _0(n[xn])}function _0(n){for(;n!==null&&!wr(n);)n=n[xn];return n}var $g;function w0(n){$g=n}function x1(){if($g!==void 0)return $g;if(typeof document<"u")return document;throw new X(210,!1)}var jd=new W("",{providedIn:"root",factory:()=>R1}),R1="ng",Mm=new W(""),Qt=new W("",{providedIn:"platform",factory:()=>"unknown"});var xm=new W("",{providedIn:"root",factory:()=>x1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var N1="h",P1="b";var k1=()=>null;function Rm(n,e,t=!1){return k1(n,e,t)}var E0=!1,O1=new W("",{providedIn:"root",factory:()=>E0});var zl;function F1(){if(zl===void 0&&(zl=null,Rn.trustedTypes))try{zl=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zl}function BD(n){return F1()?.createScriptURL(n)||n}var md=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iC})`}};function pu(n){return n instanceof md?n.changingThisBreaksApplicationSecurity:n}function Nm(n,e){let t=V1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${iC})`)}return t===e}function V1(n){return n instanceof md&&n.getTypeName()||null}var L1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function I0(n){return n=String(n),n.match(L1)?n:"unsafe:"+n}var Bd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Bd||{});function j1(n){let e=C0();return e?e.sanitize(Bd.URL,n)||"":Nm(n,"URL")?pu(n):I0(Md(n))}function B1(n){let e=C0();if(e)return BD(e.sanitize(Bd.RESOURCE_URL,n)||"");if(Nm(n,"ResourceURL"))return BD(pu(n));throw new X(904,!1)}function U1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?B1:j1}function D0(n,e,t){return U1(e,t)(n)}function C0(){let n=Ve();return n&&n[Gn].sanitizer}function b0(n){return n instanceof Function?n():n}function $1(n){return(n??$(on)).get(Qt)==="browser"}var yr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yr||{}),H1;function Pm(n,e){return H1(n,e)}function Zo(n,e,t,r,i){if(r!=null){let o,s=!1;wr(r)?o=r:Gr(r)&&(s=!0,r=r[_r]);let a=Kn(r);n===0&&t!==null?i==null?x0(e,t,a):yd(e,t,a,i||null,!0):n===1&&t!==null?yd(e,t,a,i||null,!0):n===2?ik(e,a,s):n===3&&e.destroyNode(a),o!=null&&sk(e,n,o,t,i)}}function q1(n,e){return n.createText(e)}function z1(n,e,t){n.setValue(e,t)}function T0(n,e,t){return n.createElement(e,t)}function G1(n,e){S0(n,e),e[_r]=null,e[Pn]=null}function W1(n,e,t,r,i,o){r[_r]=i,r[Pn]=e,Ud(n,r,t,1,i,o)}function S0(n,e){e[Gn].changeDetectionScheduler?.notify(9),Ud(n,e,e[ot],2,null,null)}function K1(n){let e=n[au];if(!e)return yg(n[_e],n);for(;e;){let t=null;if(Gr(e))t=e[au];else{let r=e[vn];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)Gr(e)&&yg(e[_e],e),e=e[Ft];e===null&&(e=n),Gr(e)&&yg(e[_e],e),t=e&&e[xn]}e=t}}function Q1(n,e,t,r){let i=vn+r,o=t.length;r>0&&(t[i-1][xn]=e),r<o-vn?(e[xn]=t[i],pC(t,vn+r,e)):(t.push(e),e[xn]=null),e[Ft]=t;let s=e[ss];s!==null&&t!==s&&A0(s,e);let a=e[as];a!==null&&a.insertView(n),Ng(e),e[ue]|=128}function A0(n,e){let t=n[ad],r=e[Ft];if(Gr(r))n[ue]|=ud.HasTransplantedViews;else{let i=r[Ft][Wn];e[Wn]!==i&&(n[ue]|=ud.HasTransplantedViews)}t===null?n[ad]=[e]:t.push(e)}function km(n,e){let t=n[ad],r=t.indexOf(e);t.splice(r,1)}function Hg(n,e){if(n.length<=vn)return;let t=vn+e,r=n[t];if(r){let i=r[ss];i!==null&&i!==n&&km(i,r),e>0&&(n[t-1][xn]=r[xn]);let o=nd(n,vn+e);G1(r[_e],r);let s=o[as];s!==null&&s.detachView(o[_e]),r[Ft]=null,r[xn]=null,r[ue]&=-129}return r}function M0(n,e){if(!(e[ue]&256)){let t=e[ot];t.destroyNode&&Ud(n,e,t,3,null,null),K1(e)}}function yg(n,e){if(e[ue]&256)return;let t=Se(null);try{e[ue]&=-129,e[ue]|=256,e[yn]&&Hp(e[yn]),Z1(n,e),Y1(n,e),e[_e].type===1&&e[ot].destroy();let r=e[ss];if(r!==null&&wr(e[Ft])){r!==e[Ft]&&km(r,e);let i=e[as];i!==null&&i.detachView(n)}Ug(e)}finally{Se(t)}}function Y1(n,e){let t=n.cleanup,r=e[od];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[od]=null);let i=e[zr];if(i!==null){e[zr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Z1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ui)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Hn(4,a,u);try{u.call(a)}finally{Hn(5,a,u)}}else{Hn(4,i,o);try{o.call(i)}finally{Hn(5,i,o)}}}}}function J1(n,e,t){return X1(n,e.parent,t)}function X1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[_r];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===zn.None||o===zn.Emulated)return null}return _n(r,t)}}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function x0(n,e,t){n.appendChild(e,t)}function UD(n,e,t,r,i){r!==null?yd(n,e,t,r,i):x0(n,e,t)}function R0(n,e){return n.parentNode(e)}function ek(n,e){return n.nextSibling(e)}function tk(n,e,t){return rk(n,e,t)}function nk(n,e,t){return n.type&40?_n(n,t):null}var rk=nk,$D;function Om(n,e,t,r){let i=J1(n,r,e),o=e[ot],s=r.parent||e[Pn],a=tk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)UD(o,i,t[u],a,!1);else UD(o,i,t,a,!1);$D!==void 0&&$D(o,r,e,t,i)}function tu(n,e){if(e!==null){let t=e.type;if(t&3)return _n(e,n);if(t&4)return qg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return tu(n,r);{let i=n[e.index];return wr(i)?qg(-1,i):Kn(i)}}else{if(t&128)return tu(n,e.next);if(t&32)return Pm(e,n)()||Kn(n[e.index]);{let r=N0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(n[Wn]);return tu(i,r)}else return tu(n,e.next)}}}return null}function N0(n,e){if(e!==null){let r=n[Wn][Pn],i=e.projection;return r.projection[i]}return null}function qg(n,e){let t=vn+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return tu(r,i)}return e[Li]}function ik(n,e,t){n.removeChild(null,e,t)}function Fm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&$i(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Fm(n,e,t.child,r,i,o,!1),Zo(e,n,i,a,o);else if(u&32){let l=Pm(t,r),h;for(;h=l();)Zo(e,n,i,h,o);Zo(e,n,i,a,o)}else u&16?ok(n,e,r,t,i,o):Zo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ud(n,e,t,r,i,o){Fm(t,r,n.firstChild,e,i,o,!1)}function ok(n,e,t,r,i,o){let s=t[Wn],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Zo(e,n,i,h,o)}else{let l=u,h=s[Ft];g0(r)&&(l.flags|=128),Fm(n,e,l,h,i,o,!0)}}function sk(n,e,t,r,i){let o=t[Li],s=Kn(t);o!==s&&Zo(e,n,r,o,i);for(let a=vn;a<t.length;a++){let u=t[a];Ud(u[_e],u,n,e,r,o)}}function ak(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:yr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yr.Important),n.setStyle(t,r,i,o))}}function uk(n,e,t){n.setAttribute(e,"style",t)}function P0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function k0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Tg(n,e,r),i!==null&&P0(n,e,i),o!==null&&uk(n,e,o)}var Gi={};function Y(n=1){O0(Kt(),Ve(),ys()+n,!1)}function O0(n,e,t,r){if(!r)if((e[ue]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jl(e,o,0,t)}Bi(t)}function ce(n,e=ge.Default){let t=Ve();if(t===null)return F(n,e);let r=Vt();return u0(r,t,Ot(n),e)}function F0(){let n="invalid";throw new Error(n)}function V0(n,e,t,r,i,o){let s=Se(null);try{let a=null;i&Wr.SignalBased&&(a=e[r][hr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Wr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):kC(e,a,r,o)}finally{Se(s)}}function ck(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bi(~i);else{let o=i,s=t[++r],a=t[++r];KP(s,o);let u=e[o];a(2,u)}}}finally{Bi(-1)}}function $d(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[_r]=i,p[ue]=r|4|128|8|64,(l!==null||n&&n[ue]&2048)&&(p[ue]|=2048),BC(p),p[Ft]=p[ms]=n,p[Nn]=t,p[Gn]=s||n&&n[Gn],p[ot]=a||n&&n[ot],p[os]=u||n&&n[os]||null,p[Pn]=o,p[Nd]=A1(),p[id]=h,p[RC]=l,p[Wn]=e.type==2?n[Wn]:p,p}function Hd(n,e,t,r,i){let o=n.data[e];if(o===null)o=lk(n,e,t,r,i),WP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=HP();o.injectorIndex=s===null?-1:s.injectorIndex}return hu(o,!0),o}function lk(n,e,t,r,i){let o=zC(),s=GC(),a=s?o:o&&o.parent,u=n.data[e]=gk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function L0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function j0(n,e,t,r,i){let o=ys(),s=r&2;try{Bi(-1),s&&e.length>Qr&&O0(n,e,Qr,!1),Hn(s?2:0,i),t(r,i)}finally{Bi(o),Hn(s?3:1,i)}}function B0(n,e,t){if(PC(e)){let r=Se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Se(r)}}}function U0(n,e,t){qC()&&(Ek(n,e,t,_n(t,e)),(t.flags&64)===64&&G0(n,e,t))}function $0(n,e,t=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function H0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Vm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vm(n,e,t,r,i,o,s,a,u,l,h){let p=Qr+r,m=p+i,y=dk(p,m),b=typeof l=="function"?l():l;return y[_e]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function dk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Gi);return t}function hk(n,e,t,r){let o=r.get(O1,E0)||t===zn.ShadowDom,s=n.selectRootElement(e,o);return fk(s),s}function fk(n){pk(n)}var pk=()=>null;function gk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return BP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function HD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Wr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?qD(r,t,l,a,u):qD(r,t,l,a)}return r}function qD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function mk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=HD(0,p.inputs,h,u,y),l=HD(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!pm(e)?Nk(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function yk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Lm(n,e,t,r,i,o,s,a){let u=_n(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(jm(n,t,h,r,i),Pd(e)&&vk(t,e.index)):e.type&3?(r=yk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function vk(n,e){let t=Jr(e,n);t[ue]&16||(t[ue]|=64)}function q0(n,e,t,r){if(qC()){let i=r===null?null:{"":-1},o=Dk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&z0(n,e,t,s,i,a),i&&Ck(t,r,i)}t.mergedAttrs=ou(t.mergedAttrs,t.attrs)}function z0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Fg(hd(t,e),n,r[l].type);Tk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=L0(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ou(t.mergedAttrs,h.hostAttrs),Sk(n,t,e,u,h),bk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}mk(n,t,o)}function _k(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;wk(s)!=a&&s.push(a),s.push(t,r,o)}}function wk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ek(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Pd(t)&&Ak(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hd(t,e),$i(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=us(e,n,a,t);if($i(l,e),s!==null&&Rk(e,a-i,l,u,t,s),Yr(u)){let h=Jr(t.index,e);h[Nn]=us(e,n,a,t)}}}function G0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=QP();try{Bi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Pg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ik(u,l)}}finally{Bi(-1),Pg(s)}}function Ik(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(sP(e,s.selectors,!1))if(r||(r=[]),Yr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;zg(n,e,u)}else r.unshift(s),zg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function zg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ck(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function bk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yr(e)&&(t[""]=n)}}function Tk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ts(i.type,!0)),s=new Ui(o,Yr(i),ce);n.blueprint[r]=s,t[r]=s,_k(n,e,r,L0(n,t,i.hostVars,Gi),i)}function Ak(n,e,t){let r=_n(e,n),i=H0(t),o=n[Gn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=qd(n,$d(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Mk(n,e,t,r,i,o){let s=_n(n,e);xk(e[ot],s,o,n.value,t,r,i)}function xk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Md(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Rk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];V0(r,t,u,l,h,p)}}function Nk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function W0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function K0(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];KC(o),a.contentQueries(2,e[s],s)}}}finally{Se(r)}}}function qd(n,e){return n[au]?n[AD][xn]=e:n[au]=e,n[AD]=e,e}function Gg(n,e,t){KC(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function Pk(n){return n[od]??=[]}function kk(n){return n.cleanup??=[]}function Q0(n,e){let t=n[os],r=t?t.get(mr,null):null;r&&r.handleError(e)}function jm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];V0(h,l,r,a,u,i)}}function Ok(n,e,t){let r=LC(e,n);z1(n[ot],r,t)}function Fk(n,e){let t=Jr(e,n),r=t[_e];Vk(r,t);let i=t[_r];i!==null&&t[id]===null&&(t[id]=Rm(i,t[os])),Bm(r,t,t[Nn])}function Vk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Bm(n,e,t){_m(e);try{let r=n.viewQuery;r!==null&&Gg(1,r,t);let i=n.template;i!==null&&j0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[as]?.finishViewCreation(n),n.staticContentQueries&&K0(n,e),n.staticViewQueries&&Gg(2,n.viewQuery,t);let o=n.components;o!==null&&Lk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,wm()}}function Lk(n,e){for(let t=0;t<e.length;t++)Fk(n,e[t])}function jk(n,e,t,r){let i=Se(null);try{let o=e.tView,a=n[ue]&4096?4096:16,u=$d(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ss]=l;let h=n[as];return h!==null&&(u[as]=h.createEmbeddedView(o)),Bm(o,u,t),u}finally{Se(i)}}function zD(n,e){return!e||e.firstChild===null||g0(n)}function Bk(n,e,t,r=!0){let i=e[_e];if(Q1(i,e,n,t),r){let s=qg(t,n),a=e[ot],u=R0(a,n[Li]);u!==null&&W1(i,n[Pn],a,e,u,s)}let o=e[id];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),wr(o)&&Uk(o,r);let s=t.type;if(s&8)vd(n,e,t.child,r);else if(s&32){let a=Pm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=N0(e,t);if(Array.isArray(a))r.push(...a);else{let u=ji(e[Wn]);vd(u[_e],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Uk(n,e){for(let t=vn;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&vd(r[_e],r,i,e)}n[Li]!==n[_r]&&e.push(n[Li])}var Y0=[];function $k(n){return n[yn]??Hk(n)}function Hk(n){let e=Y0.pop()??Object.create(zk);return e.lView=n,e}function qk(n){n.lView[yn]!==n&&(n.lView=null,Y0.push(n))}var zk=me(P({},Wa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Od(n.lView)},consumerOnSignalRead(){this.lView[yn]=this}});function Gk(n){let e=n[yn]??Object.create(Wk);return e.lView=n,e}var Wk=me(P({},Wa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ji(n.lView);for(;e&&!Z0(e[_e]);)e=ji(e);e&&UC(e)},consumerOnSignalRead(){this.lView[yn]=this}});function Z0(n){return n.type!==2}var Kk=100;function J0(n,e=!0,t=0){let r=n[Gn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Qk(n,t)}catch(s){throw e&&Q0(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Qk(n,e){let t=WC();try{xD(!0),Wg(n,e);let r=0;for(;kd(n);){if(r===Kk)throw new X(103,!1);r++,Wg(n,1)}}finally{xD(t)}}function Yk(n,e,t,r){let i=e[ue];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Gn].inlineEffectRunner?.flush(),_m(e);let a=!0,u=null,l=null;o||(Z0(n)?(l=$k(e),u=pl(l)):VI()===null?(a=!1,l=Gk(e),u=pl(l)):e[yn]&&(Hp(e[yn]),e[yn]=null));try{BC(e),zP(n.bindingStartIndex),t!==null&&j0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Zl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Jl(e,y,0,null),fg(e,0)}if(s||Zk(e),X0(e,0),n.contentQueries!==null&&K0(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Zl(e,y)}else{let y=n.contentHooks;y!==null&&Jl(e,y,1),fg(e,1)}ck(n,e);let p=n.components;p!==null&&tb(e,p,0);let m=n.viewQuery;if(m!==null&&Gg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Zl(e,y)}else{let y=n.viewHooks;y!==null&&Jl(e,y,2),fg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[hg]){for(let y of e[hg])y();e[hg]=null}o||(e[ue]&=-73)}catch(h){throw o||Od(e),h}finally{l!==null&&(Up(l,u),a&&qk(l)),wm()}}function X0(n,e){for(let t=y0(n);t!==null;t=v0(t))for(let r=vn;r<t.length;r++){let i=t[r];eb(i,e)}}function Zk(n){for(let e=y0(n);e!==null;e=v0(e)){if(!(e[ue]&ud.HasTransplantedViews))continue;let t=e[ad];for(let r=0;r<t.length;r++){let i=t[r];UC(i)}}}function Jk(n,e,t){let r=Jr(e,n);eb(r,t)}function eb(n,e){vm(n)&&Wg(n,e)}function Wg(n,e){let r=n[_e],i=n[ue],o=n[yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$p(o)),s||=!1,o&&(o.dirty=!1),n[ue]&=-9217,s)Yk(r,n,r.template,n[Nn]);else if(i&8192){X0(n,1);let a=r.components;a!==null&&tb(n,a,1)}}function tb(n,e,t){for(let r=0;r<e.length;r++)Jk(n,e[r],t)}function Um(n,e){let t=WC()?64:1088;for(n[Gn].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=ji(n);if(xg(n)&&!r)return n;n=r}return null}var Hi=class{get rootNodes(){let e=this._lView,t=e[_e];return vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(wr(e)){let t=e[sd],r=t?t.indexOf(this):-1;r>-1&&(Hg(e,r),nd(t,r))}this._attachedToViewContainer=!1}M0(this._lView[_e],this._lView)}onDestroy(e){$C(this._lView,e)}markForCheck(){Um(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Ng(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,J0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=xg(this._lView),t=this._lView[ss];t!==null&&!e&&km(t,this._lView),S0(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=xg(this._lView),r=this._lView[ss];r!==null&&!t&&A0(r,this._lView),Ng(this._lView)}},$m=(()=>{class n{static{this.__NG_ELEMENT_ID__=tO}}return n})(),Xk=$m,eO=class extends Xk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=jk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Hi(i)}};function tO(){return nO(Vt(),Ve())}function nO(n,e){return n.type&4?new eO(e,n,Ld(n,e)):null}var JG=new RegExp(`^(\\d+)*(${P1}|${N1})*(.*)`);var rO=()=>null;function GD(n,e){return rO(n,e)}var cs=class{},Hm=new W("",{providedIn:"root",factory:()=>!1});var nb=new W(""),rb=new W(""),Kg=class{},_d=class{};function iO(n){let e=Error(`No component factory found for ${Gt(n)}.`);return e[oO]=n,e}var oO="ngComponent";var Qg=class{resolveComponentFactory(e){throw iO(e)}},ls=class{static{this.NULL=new Qg}},ds=class{},Wi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>sO()}}return n})();function sO(){let n=Ve(),e=Vt(),t=Jr(e.index,n);return(Gr(t)?t:n)[ot]}var aO=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function Yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vD(i,a);else if(o==2){let u=a,l=e[++s];r=vD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var wd=class extends ls{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kr(e);return new hs(t,this.ngModule)}};function WD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Wr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Wr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function uO(n){let e=n.toLowerCase();return e==="svg"?NP:e==="math"?PP:null}var hs=class extends _d{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=WD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return WD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=lP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Se(null);try{i=i||this.ngModule;let s=i instanceof rn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new kg(e,s):e,u=a.get(ds,null);if(u===null)throw new X(407,!1);let l=a.get(aO,null),h=a.get(cs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?hk(m,r,this.componentDef.encapsulation,a):T0(m,y,uO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;b!==null&&(M=Rm(b,a,!0));let B=Vm(0,null,null,1,0,null,null,null,null,null,null),G=$d(null,B,null,A,null,null,p,m,a,null,M);_m(G);let j,J,oe=null;try{let ee=this.componentDef,E,v=null;ee.findHostDirectiveDefs?(E=[],v=new Map,ee.findHostDirectiveDefs(ee,E,v),E.push(ee)):E=[ee];let w=cO(G,b);oe=lO(w,b,ee,E,G,p,m),J=jC(B,Qr),b&&fO(m,ee,b,r),t!==void 0&&pO(J,this.ngContentSelectors,t),j=hO(oe,ee,E,v,G,[gO]),Bm(B,G,null)}catch(ee){throw oe!==null&&Ug(oe),Ug(G),ee}finally{wm()}return new Zg(this.componentType,j,Ld(J,G),G,J)}finally{Se(o)}}},Zg=class extends Kg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Hi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;jm(o[_e],o,i,e,t),this.previousInputValues.set(e,t);let s=Jr(this._tNode.index,o);Um(s,1)}}get injector(){return new Vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cO(n,e){let t=n[_e],r=Qr;return n[r]=e,Hd(t,r,2,"#host",null)}function lO(n,e,t,r,i,o,s){let a=i[_e];dO(r,n,e,s);let u=null;e!==null&&(u=Rm(e,i[os]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=$d(i,H0(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&zg(a,n,r.length-1),qd(i,p),i[n.index]=p}function dO(n,e,t,r){for(let i of n)e.mergedAttrs=ou(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Yg(e,e.mergedAttrs,!0),t!==null&&k0(r,t,e))}function hO(n,e,t,r,i,o){let s=Vt(),a=i[_e],u=_n(s,i);z0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=us(i,a,p,s);$i(m,i)}G0(a,i,s),u&&$i(u,i);let l=us(i,a,s.directiveStart+s.componentOffset,s);if(n[Nn]=i[Nn]=l,o!==null)for(let h of o)h(l,e);return B0(a,s,i),l}function fO(n,e,t,r){if(r)Tg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=dP(e.selectors[0]);i&&Tg(n,t,i),o&&o.length>0&&P0(n,t,o.join(" "))}}function pO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function gO(){let n=Vt();Dm(Ve()[_e],n)}var gu=(()=>{class n{static{this.__NG_ELEMENT_ID__=mO}}return n})();function mO(){let n=Vt();return vO(n,Ve())}var yO=gu,ib=class extends yO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ld(this._hostTNode,this._hostLView)}get injector(){return new Vi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cm(this._hostTNode,this._hostLView);if(n0(e)){let t=dd(e,this._hostLView),r=ld(e),i=t[_e].data[r+8];return new Vi(i,t)}else return new Vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=KD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=GD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,zD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!AP(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new hs(Kr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(rn,null);A&&(o=A)}let h=Kr(u.componentType??{}),p=GD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,zD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(kP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ft],l=new ib(u,u[Pn],u[Ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Bk(s,i,o,r),e.attachToViewContainerRef(),pC(vg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=KD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);r&&(nd(vg(this._lContainer),t),M0(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=Hg(this._lContainer,t);return r&&nd(vg(this._lContainer),t)!=null?new Hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KD(n){return n[sd]}function vg(n){return n[sd]||(n[sd]=[])}function vO(n,e){let t,r=e[n.index];return wr(r)?t=r:(t=W0(r,e,null,n),e[n.index]=t,qd(e,t)),wO(t,e,n,r),new ib(t,n,e)}function _O(n,e){let t=n[ot],r=t.createComment(""),i=_n(e,n),o=R0(t,i);return yd(t,o,r,ek(t,i),!1),r}var wO=DO,EO=()=>!1;function IO(n,e,t){return EO(n,e,t)}function DO(n,e,t,r){if(n[Li])return;let i;t.type&8?i=Kn(r):i=_O(e,t),n[Li]=i}var QD=new Set;function mu(n){QD.has(n)||(QD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function CO(n){return typeof n=="function"&&n[hr]!==void 0}function yu(n,e){mu("NgSignals");let t=KI(n),r=t[hr];return e?.equal&&(r.equal=e.equal),t.set=i=>qp(r,i),t.update=i=>QI(r,i),t.asReadonly=bO.bind(t),t}function bO(){let n=this[hr];if(n.readonlyFn===void 0){let e=()=>this();e[hr]=n,n.readonlyFn=e}return n.readonlyFn}function ob(n){return CO(n)&&typeof n.set=="function"}function TO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(xO))}return o}return Ed.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>RO(o));e.push(u)}),AO(),Promise.all(e).then(()=>{})}var Ed=new Map,SO=new Set;function AO(){let n=Ed;return Ed=new Map,n}function MO(){return Ed.size===0}function xO(n){return typeof n=="string"?n:n.text()}function RO(n){SO.delete(n)}function NO(n){return Object.getPrototypeOf(n.prototype).constructor}function ei(n){let e=NO(n.type),t=!0,r=[n];for(;e;){let i;if(Yr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Gl(n.inputs),s.inputTransforms=Gl(n.inputTransforms),s.declaredInputs=Gl(n.declaredInputs),s.outputs=Gl(n.outputs);let a=i.hostBindings;a&&VO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&OO(n,u),l&&FO(n,l),PO(n,i),NN(n.outputs,i.outputs),Yr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ei&&(t=!1)}}e=Object.getPrototypeOf(e)}kO(r)}function PO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function kO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ou(i.hostAttrs,t=ou(t,i.hostAttrs))}}function Gl(n){return n===ns?{}:n===mn?[]:n}function OO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function FO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function VO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function qm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Zr=class{},uu=class{};var Id=class extends Zr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);let o=DC(e);this._bootstrapComponents=b0(o.bootstrap),this._r3Injector=d0(e,t,[{provide:Zr,useValue:this},{provide:ls,useValue:this.componentFactoryResolver},...r],Gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dd=class extends uu{constructor(e){super(),this.moduleType=e}create(e){return new Id(this.moduleType,e,[])}};function LO(n,e,t){return new Id(n,e,t,!1)}var Jg=class extends Zr{constructor(e){super(),this.componentFactoryResolver=new wd(this),this.instance=null;let t=new su([...e.providers,{provide:Zr,useValue:this},{provide:ls,useValue:this.componentFactoryResolver}],e.parent||mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zd(n,e,t=null){return new Jg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function sb(n){return BO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function BO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vu(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function UO(n){return(n.flags&32)===32}function $O(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Hd(e,n,4,s||null,a||null);q0(e,t,h,cd(l,u)),Dm(e,h);let p=h.tView=Vm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function HO(n,e,t,r,i,o,s,a,u,l){let h=t+Qr,p=e.firstCreatePass?$O(h,e,n,r,i,o,s,a,u):e.data[h];hu(p,!1);let m=qO(e,n,p,t);Em()&&Om(e,n,m,p),$i(m,n);let y=W0(m,n,m,p);return n[h]=y,qd(n,y),IO(y,p,n),ym(p)&&U0(e,n,p),u!=null&&$0(n,p,l),p}function sn(n,e,t,r,i,o,s,a){let u=Ve(),l=Kt(),h=cd(l.consts,o);return HO(u,l,n,e,t,r,i,h,s,a),sn}var qO=zO;function zO(n,e,t,r){return Im(!0),e[ot].createComment("")}var Jo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Jo||{}),ab=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Xg=class n{constructor(){this.ngZone=$(Ce),this.scheduler=$(cs),this.errorHandler=$(mr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Jo.EarlyRead,Jo.Write,Jo.MixedReadWrite,Jo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}},em=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function zm(n,e){!e?.injector&&TP(zm);let t=e?.injector??$(on);return $1(t)?(mu("NgAfterNextRender"),WO(n,t,e,!0)):KO}function GO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WO(n,e,t,r){let i=e.get(ab);i.impl??=e.get(Xg);let o=t?.phase??Jo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Tm):null,a=new em(i.impl,GO(n,o),r,s);return i.impl.register(a),a}var KO={destroy(){}};function Gd(n,e,t,r){let i=Ve(),o=Fd();if(vu(i,o,e)){let s=Kt(),a=Vd();Mk(a,i,n,e,t,r)}return Gd}function ub(n,e,t,r){return vu(n,Fd(),t)?e+Md(t)+r:Gi}function Wl(n,e){return n<<17|e<<2}function qi(n){return n>>17&32767}function QO(n){return(n&2)==2}function YO(n,e){return n&131071|e<<17}function tm(n){return n|2}function fs(n){return(n&131068)>>2}function _g(n,e){return n&-131069|e<<2}function ZO(n){return(n&1)===1}function nm(n){return n|1}function JO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qi(s),u=fs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||du(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=qi(n[a+1]);n[r+1]=Wl(m,a),m!==0&&(n[m+1]=_g(n[m+1],r)),n[a+1]=YO(n[a+1],r)}else n[r+1]=Wl(a,0),a!==0&&(n[a+1]=_g(n[a+1],r)),a=r;else n[r+1]=Wl(u,0),a===0?a=r:n[u+1]=_g(n[u+1],r),u=r;l&&(n[r+1]=tm(n[r+1])),YD(n,h,r,!0),YD(n,h,r,!1),XO(e,h,n,r,o),s=Wl(a,u),o?e.classBindings=s:e.styleBindings=s}function XO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&du(o,e)>=0&&(t[r+1]=nm(t[r+1]))}function YD(n,e,t,r){let i=n[t+1],o=e===null,s=r?qi(i):fs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];eF(u,e)&&(a=!0,n[s+1]=r?nm(l):tm(l)),s=r?qi(l):fs(l)}a&&(n[t+1]=r?tm(i):nm(i))}function eF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?du(n,e)>=0:!1}function an(n,e,t){let r=Ve(),i=Fd();if(vu(r,i,e)){let o=Kt(),s=Vd();Lm(o,s,r,n,e,r[ot],t,!1)}return an}function ZD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";jm(n,t,o[s],s,r)}function Wd(n,e){return tF(n,e,null,!0),Wd}function tF(n,e,t,r){let i=Ve(),o=Kt(),s=GP(2);if(o.firstUpdatePass&&rF(o,n,s,r),e!==Gi&&vu(i,s,e)){let a=o.data[ys()];uF(o,a,i,i[ot],n,i[s+1]=cF(e,t),r,s)}}function nF(n,e){return e>=n.expandoStartIndex}function rF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ys()],s=nF(n,t);lF(o,r)&&e===null&&!s&&(e=!1),e=iF(i,o,e,r),JO(i,o,e,t,s,r)}}function iF(n,e,t,r){let i=YP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wg(null,n,e,t,r),t=cu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wg(i,n,e,t,r),o===null){let u=oF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=wg(null,n,e,u[1],r),u=cu(u,e.attrs,r),sF(n,e,r,u))}else o=aF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function oF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fs(r)!==0)return n[qi(r)]}function sF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qi(i)]=r}function aF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=cu(r,s,t)}return cu(r,e.attrs,t)}function wg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=cu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function cu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),JN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function uF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=ZO(l)?JD(u,e,t,i,fs(l),s):void 0;if(!Cd(h)){Cd(o)||QO(l)&&(o=JD(u,null,t,i,a,s));let p=LC(ys(),t);ak(r,s,p,i,o)}}function JD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Gi&&(m=p?mn:void 0);let y=p?lg(m,r):h===r?m:void 0;if(l&&!Cd(y)&&(y=lg(u,r)),Cd(y)&&(a=y,s))return a;let b=n[i+1];i=s?qi(b):fs(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=lg(u,r))}return a}function Cd(n){return n!==void 0}function cF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Gt(pu(n)))),n}function lF(n,e){return(n.flags&(e?8:16))!==0}function dF(n,e,t,r,i,o){let s=e.consts,a=cd(s,i),u=Hd(e,n,2,r,a);return q0(e,t,u,cd(s,o)),u.attrs!==null&&Yg(u,u.attrs,!1),u.mergedAttrs!==null&&Yg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function V(n,e,t,r){let i=Ve(),o=Kt(),s=Qr+n,a=i[ot],u=o.firstCreatePass?dF(s,o,i,e,t,r):o.data[s],l=hF(o,i,u,a,e,n);i[s]=l;let h=ym(u);return hu(u,!0),k0(a,l,u),!UO(u)&&Em()&&Om(o,i,l,u),VP()===0&&$i(l,i),LP(),h&&(U0(o,i,u),B0(o,u,i)),r!==null&&$0(i,u),V}function L(){let n=Vt();GC()?qP():(n=n.parent,hu(n,!1));let e=n;UP(e)&&$P(),jP();let t=Kt();return t.firstCreatePass&&(Dm(t,n),PC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&r1(e)&&ZD(t,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&i1(e)&&ZD(t,e,Ve(),e.stylesWithoutHost,!1),L}function ve(n,e,t,r){return V(n,e,t,r),L(),ve}var hF=(n,e,t,r,i,o)=>(Im(!0),T0(r,i,XP()));function wn(){return Ve()}var bd="en-US";var fF=bd;function pF(n){typeof n=="string"&&(fF=n.toLowerCase().replace(/_/g,"-"))}var gF=(n,e,t)=>{};function Re(n,e,t,r){let i=Ve(),o=Kt(),s=Vt();return cb(o,i,i[ot],s,n,e,r),Re}function mF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[od],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function cb(n,e,t,r,i,o,s){let a=ym(r),l=n.firstCreatePass&&kk(n),h=e[Nn],p=Pk(e),m=!0;if(r.type&3||s){let A=_n(r,e),M=s?s(A):A,B=p.length,G=s?J=>s(Kn(J[r.index])):r.index,j=null;if(!s&&a&&(j=mF(n,e,i,r.index)),j!==null){let J=j.__ngLastListenerFn__||j;J.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,m=!1}else{o=eC(r,e,h,o),gF(A,i,o);let J=t.listen(M,i,o);p.push(o,J),l&&l.push(i,G,B,B+1)}}else o=eC(r,e,h,o);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let M=0;M<A;M+=2){let B=b[M],G=b[M+1],oe=e[B][G].subscribe(o),ee=p.length;p.push(o,oe),l&&l.push(i,r.index,ee,-(ee+1))}}}function XD(n,e,t,r){let i=Se(null);try{return Hn(6,e,t),t(r)!==!1}catch(o){return Q0(n,o),!1}finally{Hn(7,e,t),Se(i)}}function eC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Jr(n.index,e):e;Um(s,5);let a=XD(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=XD(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function yt(n=1){return JP(n)}function un(n,e,t){return lb(n,"",e,"",t),un}function lb(n,e,t,r,i){let o=Ve(),s=ub(o,e,t,r);if(s!==Gi){let a=Kt(),u=Vd();Lm(a,u,o,n,s,o[ot],i,!1)}return lb}function Ze(n,e=""){let t=Ve(),r=Kt(),i=n+Qr,o=r.firstCreatePass?Hd(r,i,1,e,null):r.data[i],s=yF(r,t,o,e,n);t[i]=s,Em()&&Om(r,t,s,o),hu(o,!1)}var yF=(n,e,t,r,i)=>(Im(!0),q1(e[ot],r));function Gm(n){return db("",n,""),Gm}function db(n,e,t){let r=Ve(),i=ub(r,n,e,t);return i!==Gi&&Ok(r,ys(),i),db}function re(n,e,t){ob(e)&&(e=e());let r=Ve(),i=Fd();if(vu(r,i,e)){let o=Kt(),s=Vd();Lm(o,s,r,n,e,r[ot],t,!1)}return re}function se(n,e){let t=ob(n);return t&&n.set(e),t}function ie(n,e){let t=Ve(),r=Kt(),i=Vt();return cb(r,t,t[ot],i,n,e),ie}function vF(n,e,t){let r=Kt();if(r.firstCreatePass){let i=Yr(n);rm(t,r.data,r.blueprint,i,!0),rm(e,r.data,r.blueprint,i,!1)}}function rm(n,e,t,r,i){if(n=Ot(n),Array.isArray(n))for(let o=0;o<n.length;o++)rm(n[o],e,t,r,i);else{let o=Kt(),s=Ve(),a=Vt(),u=is(n)?n:Ot(n.provide),l=MC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(is(n)||!n.multi){let y=new Ui(l,i,ce),b=Ig(u,e,i?h:h+m,p);b===-1?(Fg(hd(a,s),o,u),Eg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Ig(u,e,h+m,p),b=Ig(u,e,h,h+m),A=y>=0&&t[y],M=b>=0&&t[b];if(i&&!M||!i&&!A){Fg(hd(a,s),o,u);let B=EF(i?wF:_F,t.length,i,r,l);!i&&M&&(t[b].providerFactory=B),Eg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=hb(t[i?b:y],l,!i&&r);Eg(o,n,y>-1?y:b,B)}!i&&r&&M&&t[b].componentProviders++}}}function Eg(n,e,t,r){let i=is(e),o=_P(e);if(i||o){let u=(o?Ot(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function hb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ig(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function _F(n,e,t,r){return im(this.multi,[])}function wF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=us(t,t[_e],this.providerFactory.index,r);o=a.slice(0,s),im(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],im(i,o);return o}function im(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function EF(n,e,t,r,i){let o=new Ui(n,t,ce);return o.multi=[],o.index=e,o.componentProviders=0,hb(o,i,r&&!t),o}function Kd(n,e=[]){return t=>{t.providersResolver=(r,i)=>vF(r,i?i(n):n,e)}}var IF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=TC(!1,t.type),i=r.length>0?zd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(F(rn))})}}return n})();function fb(n){mu("NgStandalone"),n.getStandaloneInjector=e=>e.get(IF).getOrCreateStandaloneInjector(n)}var Kl=null;function DF(n){Kl!==null&&(n.defaultEncapsulation!==Kl.defaultEncapsulation||n.preserveWhitespaces!==Kl.preserveWhitespaces)||(Kl=n)}var vr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pb=new vr("18.2.13");var Qd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Wm=new W(""),_u=new W(""),Yd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Km||(CF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(Ce),F(Zd),F(_u))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Zd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Km?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function CF(n){Km=n}var Km;function Ki(n){return!!n&&typeof n.then=="function"}function gb(n){return!!n&&typeof n.subscribe=="function"}var Jd=new W(""),mb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$(Jd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ki(o))t.push(o);else if(gb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qm=new W("");function bF(){WI(()=>{throw new X(600,!1)})}function TF(n){return n.isBoundToModule}var SF=10;function AF(n,e,t){try{let r=t();return Ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function yb(n,e){return Array.isArray(e)?e.reduce(yb,n):P(P({},n),e)}var ti=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(b1),this.afterRenderManager=$(ab),this.zonelessEnabled=$(Hm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=$(vs).hasPendingTasks.pipe(Q(t=>!t)),this._injector=$(rn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof _d;if(!this._injector.get(mb).done){let m=!i&&IC(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(ls).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=TF(s)?void 0:this._injector.get(Zr),u=r||s.selector,l=s.create(on.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Wm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Xl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Se(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ds,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<SF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)MF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>kd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Xl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Qm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Xl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function MF(n,e,t,r){if(!t&&!kd(n))return;J0(n,e,t&&!r?0:1)}var om=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Xd=(()=>{class n{compileModuleSync(t){return new Dd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=DC(t),o=b0(i.declarations).reduce((s,a)=>{let u=Kr(a);return u&&s.push(new hs(u)),s},[]);return new om(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xF=new W("");function RF(n,e,t){let r=new Dd(t);return Promise.resolve(r)}function tC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var NF=(()=>{class n{constructor(){this.zone=$(Ce),this.changeDetectionScheduler=$(cs),this.applicationRef=$(ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(me(P({},vb()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:rs,multi:!0,useFactory:()=>{let r=$(NF,{optional:!0});return()=>r.initialize()}},{provide:rs,multi:!0,useFactory:()=>{let r=$(kF);return()=>{r.initialize()}}},e===!0?{provide:nb,useValue:!0}:[],{provide:rb,useValue:t??h0}]}function vb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var kF=(()=>{class n{constructor(){this.subscription=new Qe,this.initialized=!1,this.zone=$(Ce),this.pendingTasks=$(vs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var OF=(()=>{class n{constructor(){this.appRef=$(ti),this.taskService=$(vs),this.ngZone=$(Ce),this.zonelessEnabled=$(Hm),this.disableScheduling=$(nb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Qe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(rb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?FD:f0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,FD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FF(){return typeof $localize<"u"&&$localize.locale||bd}var Ym=new W("",{providedIn:"root",factory:()=>$(Ym,ge.Optional|ge.SkipSelf)||FF()});var Td=new W("");function Ql(n){return!n.moduleRef}function VF(n){let e=Ql(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{Ql(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ql(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Td);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Td);s.add(o),n.moduleRef.onDestroy(()=>{Xl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return AF(r,t,()=>{let o=e.get(mb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ym,bd);if(pF(s||bd),Ql(n)){let a=e.get(ti);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return LF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function LF(n,e){let t=n.injector.get(ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var _b=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>C1(r?.ngZone,me(P({},vb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[PF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:cs,useExisting:OF}],u=LO(t.moduleType,this.injector,a);return VF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=yb({},r);return RF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Td,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(on))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ru=null,wb=new W("");function jF(n){if(ru&&!ru.get(wb,!1))throw new X(400,!1);bF(),ru=n;let e=n.get(_b);return $F(n),e}function Zm(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=Eb();if(!s||s.injector.get(wb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):jF(BF(a,r))}return UF(i)}}function BF(n=[],e){return on.create({name:e,providers:[{provide:Rd,useValue:"platform"},{provide:Td,useValue:new Set([()=>ru=null])},...n]})}function UF(n){let e=Eb();if(!e)throw new X(401,!1);return e}function Eb(){return ru?.get(_b)??null}function $F(n){n.get(Mm,null)?.forEach(t=>t())}function Jm(){return!1}var Qi=(()=>{class n{static{this.__NG_ELEMENT_ID__=HF}}return n})();function HF(n){return qF(Vt(),Ve(),(n&16)===16)}function qF(n,e,t){if(Pd(n)&&!t){let r=Jr(n.index,e);return new Hi(r,r)}else if(n.type&175){let r=e[Wn];return new Hi(r,e)}return null}var sm=class{constructor(){}supports(e){return sb(e)}create(e){return new am(e)}},zF=(n,e)=>e,am=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<nC(r,i,o)?t:r,a=nC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!sb(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,jO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new um(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},um=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new cm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function rC(){return new Xm([new sm])}var Xm=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:rC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||rC()),deps:[[n,new hm,new gs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var Ib=Zm(null,"core",[]),Db=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(ti))}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({})}}return n})();function Yi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function wu(n,e){mu("NgSignals");let t=qI(n);return e?.equal&&(t[hr].equal=e.equal),t}function Er(n){let e=Se(null);try{return n()}finally{Se(e)}}function Cb(n){let e=Kr(n);if(!e)return null;let t=new hs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ab=null;function Yn(){return Ab}function Mb(n){Ab??=n}var eh=class{};var Yt=new W(""),ry=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(GF),providedIn:"platform"})}}return n})(),xb=new W(""),GF=(()=>{class n extends ry{constructor(){super(),this._doc=$(Yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function iy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function bb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ir(n){return n&&n[0]!=="?"?"?"+n:n}var Dr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(oy),providedIn:"root"})}}return n})(),Rb=new W(""),oy=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return iy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ry),F(Rb,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nb=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=iy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ry),F(Rb,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),_s=(()=>{class n{constructor(t){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=QF(bb(Tb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ir(r))}normalize(t){return n.stripTrailingSlash(KF(this._basePath,Tb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ir}static{this.joinWithSlash=iy}static{this.stripTrailingSlash=bb}static{this.\u0275fac=function(r){return new(r||n)(F(Dr))}}static{this.\u0275prov=z({token:n,factory:()=>WF(),providedIn:"root"})}}return n})();function WF(){return new _s(F(Dr))}function KF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Tb(n){return n.replace(/\/index.html$/,"")}function QF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Pb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ey=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},En=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ey(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Sb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Sb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ce(gu),ce($m),ce(Xm))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Sb(n,e){n.context.$implicit=e.item}var kb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({})}}return n})(),sy="browser",YF="server";function ZF(n){return n===sy}function Zi(n){return n===YF}var Ob=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>ZF($(Qt))?new ty($(Yt),window):new ny})}}return n})(),ty=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=JF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function JF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ny=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},th=class{};var cy=class extends eh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ly=class n extends cy{static makeCurrent(){Mb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=eV();return t==null?null:tV(t)}resetBaseElement(){Eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pb(document.cookie,e)}},Eu=null;function eV(){return Eu=Eu||document.querySelector("base"),Eu?Eu.getAttribute("href"):null}function tV(n){return new URL(n,document.baseURI).pathname}var dy=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Yn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},nV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),hy=new W(""),jb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(hy),F(Ce))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),nh=class{constructor(e){this._doc=e}},ay="ng-app-id",Bb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ay}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ay),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ay,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(Yt),F(jd),F(xm,8),F(Qt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),uy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},py=/%COMP%/g,Ub="%COMP%",rV=`_nghost-${Ub}`,iV=`_ngcontent-${Ub}`,oV=!0,sV=new W("",{providedIn:"root",factory:()=>oV});function aV(n){return iV.replace(py,n)}function uV(n){return rV.replace(py,n)}function $b(n,e){return e.map(t=>t.replace(py,n))}var Fb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Zi(a),this.defaultRenderer=new Iu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zn.ShadowDom&&(r=me(P({},r),{encapsulation:zn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof rh?i.applyToHost(t):i instanceof Du&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case zn.Emulated:o=new rh(u,l,r,this.appId,h,s,a,p);break;case zn.ShadowDom:return new fy(u,l,t,r,s,a,this.nonce,p);default:o=new Du(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(jb),F(Bb),F(jd),F(sV),F(Yt),F(Qt),F(Ce),F(xm))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Iu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=uy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=uy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yr.DashCase|yr.Important)?e.style.setProperty(t,r,i&yr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Vb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fy=class extends Iu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=$b(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Du=class extends Iu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?$b(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rh=class extends Du{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=aV(l),this.hostAttr=uV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},cV=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Lb=["alt","control","meta","shift"],lV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hV=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Lb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=lV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Lb.forEach(s=>{if(s!==i){let a=dV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function fV(){ly.makeCurrent()}function pV(){return new mr}function gV(){return w0(document),document}var mV=[{provide:Qt,useValue:sy},{provide:Mm,useValue:fV,multi:!0},{provide:Yt,useFactory:gV,deps:[]}],Hb=Zm(Ib,"browser",mV),yV=new W(""),vV=[{provide:_u,useClass:dy,deps:[]},{provide:Wm,useClass:Yd,deps:[Ce,Zd,_u]},{provide:Yd,useClass:Yd,deps:[Ce,Zd,_u]}],_V=[{provide:Rd,useValue:"root"},{provide:mr,useFactory:pV,deps:[]},{provide:hy,useClass:cV,multi:!0,deps:[Yt,Ce,Qt]},{provide:hy,useClass:hV,multi:!0,deps:[Yt]},Fb,Bb,jb,{provide:ds,useExisting:Fb},{provide:th,useClass:nV,deps:[]},[]],qb=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:jd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(yV,12))}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({providers:[..._V,...vV],imports:[kb,Db]})}}return n})();var zb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ce(Wi),ce(Xr))}}static{this.\u0275dir=Wt({type:n})}}return n})(),wV=(()=>{class n extends eT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fu(n)))(i||n)}})()}static{this.\u0275dir=Wt({type:n,features:[ei]})}}return n})(),tT=new W("");var EV={provide:tT,useExisting:ps(()=>At),multi:!0};function IV(){let n=Yn()?Yn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var DV=new W(""),At=(()=>{class n extends eT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!IV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(Wi),ce(Xr),ce(DV,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Re("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Kd([EV]),ei]})}}return n})();var nT=new W(""),rT=new W("");function iT(n){return n!=null}function oT(n){return Ki(n)?Ae(n):n}function sT(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function aT(n,e){return e.map(t=>t(n))}function CV(n){return!n.validate}function uT(n){return n.map(e=>CV(e)?e:t=>e.validate(t))}function bV(n){if(!n)return null;let e=n.filter(iT);return e.length==0?null:function(t){return sT(aT(t,e))}}function my(n){return n!=null?bV(uT(n)):null}function TV(n){if(!n)return null;let e=n.filter(iT);return e.length==0?null:function(t){let r=aT(t,e).map(oT);return rg(r).pipe(Q(sT))}}function yy(n){return n!=null?TV(uT(n)):null}function Wb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SV(n){return n._rawValidators}function AV(n){return n._rawAsyncValidators}function gy(n){return n?Array.isArray(n)?n:[n]:[]}function oh(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kb(n,e){let t=gy(e);return gy(n).forEach(i=>{oh(t,i)||t.push(i)}),t}function Qb(n,e){return gy(e).filter(t=>!oh(n,t))}var sh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=my(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Is=class extends sh{get formDirective(){return null}get path(){return null}},Mu=class extends sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ah=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},MV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aW=me(P({},MV),{"[class.ng-submitted]":"isSubmitted"}),Zt=(()=>{class n extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(Mu,2))}}static{this.\u0275dir=Wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Wd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ei]})}}return n})(),Jt=(()=>{class n extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(Is,10))}}static{this.\u0275dir=Wt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Wd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ei]})}}return n})();var Cu="VALID",ih="INVALID",ws="PENDING",bu="DISABLED",Ds=class{},uh=class extends Ds{constructor(e,t){super(),this.value=e,this.source=t}},Su=class extends Ds{constructor(e,t){super(),this.pristine=e,this.source=t}},Au=class extends Ds{constructor(e,t){super(),this.touched=e,this.source=t}},Es=class extends Ds{constructor(e,t){super(),this.status=e,this.source=t}};function cT(n){return(dh(n)?n.validators:n)||null}function xV(n){return Array.isArray(n)?my(n):n||null}function lT(n,e){return(dh(e)?e.asyncValidators:n)||null}function RV(n){return Array.isArray(n)?yy(n):n||null}function dh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function NV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function PV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var ch=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=wu(()=>this.statusReactive()),this.statusReactive=yu(void 0),this._pristine=wu(()=>this.pristineReactive()),this.pristineReactive=yu(!0),this._touched=wu(()=>this.touchedReactive()),this.touchedReactive=yu(!1),this._events=new He,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Er(this.statusReactive)}set status(e){Er(()=>this.statusReactive.set(e))}get valid(){return this.status===Cu}get invalid(){return this.status===ih}get pending(){return this.status==ws}get disabled(){return this.status===bu}get enabled(){return this.status!==bu}get pristine(){return Er(this.pristineReactive)}set pristine(e){Er(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Er(this.touchedReactive)}set touched(e){Er(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qb(e,this._rawAsyncValidators))}hasValidator(e){return oh(this._rawValidators,e)}hasAsyncValidator(e){return oh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Au(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Au(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Su(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Su(!0,r))}markAsPending(e={}){this.status=ws;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Es(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bu,this.errors=null,this._forEachChild(i=>{i.disable(me(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uh(this.value,r)),this._events.next(new Es(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cu,this._forEachChild(r=>{r.enable(me(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cu||this.status===ws)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uh(this.value,t)),this._events.next(new Es(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bu:Cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ws,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=oT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Es(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?bu:this.errors?ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ws)?ws:this._anyControlsHaveStatus(ih)?ih:Cu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Su(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Au(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=RV(this._rawAsyncValidators)}},lh=class extends ch{constructor(e,t,r){super(cT(t),lT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PV(this,!0,e),Object.keys(e).forEach(r=>{NV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var vy=new W("CallSetDisabledState",{providedIn:"root",factory:()=>_y}),_y="always";function kV(n,e){return[...e.path,n]}function dT(n,e,t=_y){hT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FV(n,e),LV(n,e),VV(n,e),OV(n,e)}function Yb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hT(n,e){let t=SV(n);e.validator!==null?n.setValidators(Wb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=AV(n);e.asyncValidator!==null?n.setAsyncValidators(Wb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Yb(e._rawValidators,i),Yb(e._rawAsyncValidators,i)}function FV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fT(n,e)})}function VV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function jV(n,e){n==null,hT(n,e)}function BV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function UV(n){return Object.getPrototypeOf(n.constructor)===wV}function $V(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function HV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===At?t=o:UV(o)?r=o:i=o}),i||r||t||null}var qV={provide:Is,useExisting:ps(()=>Lt)},Tu=Promise.resolve(),Lt=(()=>{class n extends Is{get submitted(){return Er(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=wu(()=>this.submittedReactive()),this.submittedReactive=yu(!1),this._directives=new Set,this.ngSubmit=new it,this.form=new lh({},my(t),yy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),dT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tu.then(()=>{let r=this._findContainer(t.path),i=new lh({});jV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$V(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ce(nT,10),ce(rT,10),ce(vy,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Re("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kd([qV]),ei]})}}return n})();function Zb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jb(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var zV=class extends ch{constructor(e=null,t,r){super(cT(t),lT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Jb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Jb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var GV={provide:Mu,useExisting:ps(()=>jt)},Xb=Promise.resolve(),jt=(()=>{class n extends Mu{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new zV,this._registered=!1,this.name="",this.update=new it,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=HV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),BV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Xb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Yi(r);Xb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?kV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ce(Is,9),ce(nT,10),ce(rT,10),ce(tT,10),ce(Qi,8),ce(vy,8))}}static{this.\u0275dir=Wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Kd([GV]),ei,zi]})}}return n})(),Xt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Wt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var WV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({})}}return n})();var pT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vy,useValue:t.callSetDisabledState??_y}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({imports:[WV]})}}return n})();var he="primary",Hu=Symbol("RouteTitle"),Cy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ms(n){return new Cy(n)}function KV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function QV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zn(n[t],e[t]))return!1;return!0}function Zn(n,e){let t=n?by(n):void 0,r=e?by(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!bT(n[i],e[i]))return!1;return!0}function by(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function TT(n){return n.length>0?n[n.length-1]:null}function ii(n){return ng(n)?n:Ki(n)?Ae(Promise.resolve(n)):ne(n)}var YV={exact:AT,subset:MT},ST={exact:ZV,subset:JV,ignored:()=>!0};function gT(n,e,t){return YV[t.paths](n.root,e.root,t.matrixParams)&&ST[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function ZV(n,e){return Zn(n,e)}function AT(n,e,t){if(!to(n.segments,e.segments)||!ph(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!AT(n.children[r],e.children[r],t))return!1;return!0}function JV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bT(n[t],e[t]))}function MT(n,e,t){return xT(n,e,e.segments,t)}function xT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!to(i,t)||e.hasChildren()||!ph(i,t,r))}else if(n.segments.length===t.length){if(!to(n.segments,t)||!ph(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!MT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!to(n.segments,i)||!ph(n.segments,i,r)||!n.children[he]?!1:xT(n.children[he],e,o,r)}}function ph(n,e,t){return e.every((r,i)=>ST[t](n[i].parameters,r.parameters))}var br=class{constructor(e=new Ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){return tL.serialize(this)}},Ne=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gh(this)}},eo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ms(this.parameters),this._parameterMap}toString(){return NT(this)}};function XV(n,e){return to(n,e)&&n.every((t,r)=>Zn(t.parameters,e[r].parameters))}function to(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function eL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var qu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new xs,providedIn:"root"})}}return n})(),xs=class{parse(e){let t=new Sy(e);return new br(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xu(e.root,!0)}`,r=iL(e.queryParams),i=typeof e.fragment=="string"?`#${nL(e.fragment)}`:"";return`${t}${r}${i}`}},tL=new xs;function gh(n){return n.segments.map(e=>NT(e)).join("/")}function xu(n,e){if(!n.hasChildren())return gh(n);if(e){let t=n.children[he]?xu(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${xu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=eL(n,(r,i)=>i===he?[xu(n.children[he],!1)]:[`${i}:${xu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${gh(n)}/${t[0]}`:`${gh(n)}/(${t.join("//")})`}}function RT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hh(n){return RT(n).replace(/%3B/gi,";")}function nL(n){return encodeURI(n)}function Ty(n){return RT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mh(n){return decodeURIComponent(n)}function mT(n){return mh(n.replace(/\+/g,"%20"))}function NT(n){return`${Ty(n.path)}${rL(n.parameters)}`}function rL(n){return Object.entries(n).map(([e,t])=>`;${Ty(e)}=${Ty(t)}`).join("")}function iL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${hh(t)}=${hh(i)}`).join("&"):`${hh(t)}=${hh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var oL=/^[^\/()?;#]+/;function wy(n){let e=n.match(oL);return e?e[0]:""}var sL=/^[^\/()?;=#]+/;function aL(n){let e=n.match(sL);return e?e[0]:""}var uL=/^[^=?&#]+/;function cL(n){let e=n.match(uL);return e?e[0]:""}var lL=/^[^&#]+/;function dL(n){let e=n.match(lL);return e?e[0]:""}var Sy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Ne(e,t)),r}parseSegment(){let e=wy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new eo(mh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=wy(this.remaining);i&&(r=i,this.capture(r))}e[mh(t)]=mh(r)}parseQueryParam(e){let t=cL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=dL(this.remaining);s&&(r=s,this.capture(r))}let i=mT(t),o=mT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[he]:new Ne([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function PT(n){return n.segments.length>0?new Ne([],{[he]:n}):n}function kT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=kT(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ne(n.segments,e);return hL(t)}function hL(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Ne(n.segments.concat(e.segments),e.children)}return n}function no(n){return n instanceof br}function fL(n,e,t=null,r=null){let i=OT(n);return FT(i,e,t,r)}function OT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ne(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=PT(r);return e??i}function FT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ey(i,i,i,t,r);let o=pL(e);if(o.toRoot())return Ey(i,i,new Ne([],{}),t,r);let s=gL(o,i,n),a=s.processChildren?Pu(s.segmentGroup,s.index,o.commands):LT(s.segmentGroup,s.index,o.commands);return Ey(i,s.segmentGroup,a,t,r)}function yh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fu(n){return typeof n=="object"&&n!=null&&n.outlets}function Ey(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=VT(n,e,t);let a=PT(kT(s));return new br(a,o,i)}function VT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=VT(o,e,t)}),new Ne(n.segments,r)}var vh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yh(r[0]))throw new X(4003,!1);let i=r.find(Fu);if(i&&i!==TT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new vh(t,e,r)}var Ts=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function gL(n,e,t){if(n.isAbsolute)return new Ts(e,!0,0);if(!t)return new Ts(e,!1,NaN);if(t.parent===null)return new Ts(t,!0,0);let r=yh(n.commands[0])?0:1,i=t.segments.length-1+r;return mL(t,i,n.numberOfDoubleDots)}function mL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Ts(r,!1,i-o)}function yL(n){return Fu(n[0])?n[0].outlets:{[he]:n}}function LT(n,e,t){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return Pu(n,e,t);let r=vL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ne(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Ne(n.segments.slice(r.pathIndex),n.children),Pu(o,0,i)}else return r.match&&i.length===0?new Ne(n.segments,{}):r.match&&!n.hasChildren()?Ay(n,e,t):r.match?Pu(n,0,i):Ay(n,e,t)}function Pu(n,e,t){if(t.length===0)return new Ne(n.segments,{});{let r=yL(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=Pu(n.children[he],e,t);return new Ne(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(n.segments,i)}}function vL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Fu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!vT(u,l,s))return o;r+=2}else{if(!vT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ay(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Fu(o)){let u=_L(o.outlets);return new Ne(r,u)}if(i===0&&yh(t[0])){let u=n.segments[e];r.push(new eo(u.path,yT(t[0]))),i++;continue}let s=Fu(o)?o.outlets[he]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&yh(a)?(r.push(new eo(s,yT(a))),i+=2):(r.push(new eo(s,{})),i++)}return new Ne(r,{})}function _L(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ay(new Ne([],{}),0,r))}),e}function yT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vT(n,e,t){return n==t.path&&Zn(e,t.parameters)}var ku="imperative",vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(vt||{}),In=class{constructor(e,t){this.id=e,this.url=t}},Rs=class extends In{constructor(e,t,r="imperative",i=null){super(e,t),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends In{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ln=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ln||{}),_h=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(_h||{}),Cr=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},Vu=class extends In{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wh=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xy=class extends In{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ry=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ky=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oy=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fy=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vy=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=vt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Lu=class{},Ns=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wL(n,e){return n.providers&&!n._injector&&(n._injector=zd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kn(n){return n.outlet||he}function EL(n,e){let t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function zu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var jy=class{get injector(){return zu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Gu(this.rootInjector),this.attachRef=null}},Gu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(rn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ih=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=By(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=By(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Uy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Uy(e,this._root).map(t=>t.value)}};function By(n,e){if(n===e.value)return e;for(let t of e.children){let r=By(n,t);if(r)return r}return null}function Uy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Uy(n,t);if(r.length)return r.unshift(e),r}return[]}var cn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Dh=class extends Ih{constructor(e,t){super(e),this.snapshot=t,Yy(this,e)}toString(){return this.snapshot.toString()}};function jT(n){let e=IL(n),t=new wt([new eo("",{})]),r=new wt({}),i=new wt({}),o=new wt({}),s=new wt(""),a=new ro(t,r,o,s,i,he,n,e.root);return a.snapshot=e.root,new Dh(new cn(a,[]),e)}function IL(n){let e={},t={},r={},i="",o=new Ss([],e,r,i,t,he,n,null,{});return new bh("",new cn(o,[]))}var ro=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[Hu]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ch(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&UT(i)&&(r.resolve[Hu]=i.title),r}var Ss=class{get title(){return this.data?.[Hu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bh=class extends Ih{constructor(e,t){super(t),this.url=e,Yy(this,t)}toString(){return BT(this._root)}};function Yy(n,e){e.value._routerState=n,e.children.forEach(t=>Yy(n,t))}function BT(n){let e=n.children.length>0?` { ${n.children.map(BT).join(", ")} } `:"";return`${n.value}${e}`}function Iy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zn(e.params,t.params)||n.paramsSubject.next(t.params),QV(e.url,t.url)||n.urlSubject.next(t.url),Zn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $y(n,e){let t=Zn(n.params,e.params)&&XV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$y(n.parent,e.parent))}function UT(n){return typeof n.title=="string"||n.title===null}var Zy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=$(Gu),this.location=$(gu),this.changeDetector=$(Qi),this.inputBinder=$(xh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Hy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]})}}return n})(),Hy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ro?this.route:e===Gu?this.childContexts:this.parent.get(e,t)}},xh=new W(""),_T=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ja([r.queryParams,r.params,r.data]).pipe(Ye(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?ne(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Cb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function DL(n,e,t){let r=ju(n,e._root,t?t._root:void 0);return new Dh(r,e)}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=CL(n,e,t);return new cn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ju(n,a)),s}}let r=bL(e.value),i=e.children.map(o=>ju(n,o));return new cn(r,i)}}function CL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ju(n,r,i);return ju(n,r)})}function bL(n){return new ro(new wt(n.url),new wt(n.params),new wt(n.queryParams),new wt(n.fragment),new wt(n.data),n.outlet,n.component,n)}var Bu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$T="ngNavigationCancelingError";function Th(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=no(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HT(!1,ln.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$T]=!0,t.cancellationCode=e,t}function TL(n){return qT(n)&&no(n.url)}function qT(n){return!!n&&n[$T]}var SL=(n,e,t,r)=>Q(i=>(new qy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),qy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Iy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=bs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=bs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ly(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Fy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Iy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Iy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Sh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},As=class{constructor(e,t){this.component=e,this.route=t}};function AL(n,e,t){let r=n._root,i=e?e._root:null;return Ru(r,i,t,[r.value])}function ML(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ks(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!aC(n)?n:e.get(n):r}function Ru(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bs(e);return n.children.forEach(s=>{xL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ou(a,t.getContext(s),i)),i}function xL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=RL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ru(n,e,a?a.children:null,r,i):Ru(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new As(a.outlet.component,s))}else s&&Ou(e,a,i),i.canActivateChecks.push(new Sh(r)),o.component?Ru(n,null,a?a.children:null,r,i):Ru(n,null,t,r,i);return i}function RL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!to(n.url,e.url);case"pathParamsOrQueryParamsChange":return!to(n.url,e.url)||!Zn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$y(n,e)||!Zn(n.queryParams,e.queryParams);case"paramsChange":default:return!$y(n,e)}}function Ou(n,e,t){let r=bs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ou(s,e.children.getContext(o),t):Ou(s,null,t):Ou(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new As(e.outlet.component,i)):t.canDeactivateChecks.push(new As(null,i)):t.canDeactivateChecks.push(new As(null,i))}function Wu(n){return typeof n=="function"}function NL(n){return typeof n=="boolean"}function PL(n){return n&&Wu(n.canLoad)}function kL(n){return n&&Wu(n.canActivate)}function OL(n){return n&&Wu(n.canActivateChild)}function FL(n){return n&&Wu(n.canDeactivate)}function VL(n){return n&&Wu(n.canMatch)}function zT(n){return n instanceof pr||n?.name==="EmptyError"}var fh=Symbol("INITIAL_VALUE");function Ps(){return Ye(n=>Ja(n.map(e=>e.pipe(gr(1),Fi(fh)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===fh)return fh;if(t===!1||LL(t))return t}return!0}),Et(e=>e!==fh),gr(1)))}function LL(n){return no(n)||n instanceof Bu}function jL(n,e){return rt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(me(P({},t),{guardsResult:!0})):BL(s,r,i,n).pipe(rt(a=>a&&NL(a)?UL(r,o,n,e):ne(a)),Q(a=>me(P({},t),{guardsResult:a})))})}function BL(n,e,t,r){return Ae(n).pipe(rt(i=>GL(i.component,i.route,t,e,r)),pn(i=>i!==!0,!0))}function UL(n,e,t,r){return Ae(e).pipe(ki(i=>Wo(HL(i.route.parent,r),$L(i.route,r),zL(n,i.path,t),qL(n,i.route,t))),pn(i=>i!==!0,!0))}function $L(n,e){return n!==null&&e&&e(new Vy(n)),ne(!0)}function HL(n,e){return n!==null&&e&&e(new Oy(n)),ne(!0)}function qL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>Bl(()=>{let s=zu(e)??t,a=ks(o,s),u=kL(a)?a.canActivate(e,n):Qn(s,()=>a(e,n));return ii(u).pipe(pn())}));return ne(i).pipe(Ps())}function zL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ML(s)).filter(s=>s!==null).map(s=>Bl(()=>{let a=s.guards.map(u=>{let l=zu(s.node)??t,h=ks(u,l),p=OL(h)?h.canActivateChild(r,n):Qn(l,()=>h(r,n));return ii(p).pipe(pn())});return ne(a).pipe(Ps())}));return ne(o).pipe(Ps())}function GL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let u=zu(e)??i,l=ks(a,u),h=FL(l)?l.canDeactivate(n,e,t,r):Qn(u,()=>l(n,e,t,r));return ii(h).pipe(pn())});return ne(s).pipe(Ps())}function WL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=ks(s,n),u=PL(a)?a.canLoad(e,t):Qn(n,()=>a(e,t));return ii(u)});return ne(o).pipe(Ps(),GT(r))}function GT(n){return Yp(dt(e=>{if(typeof e!="boolean")throw Th(n,e)}),Q(e=>e===!0))}function KL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=ks(s,n),u=VL(a)?a.canMatch(e,t):Qn(n,()=>a(e,t));return ii(u)});return ne(o).pipe(Ps(),GT(r))}var Uu=class{constructor(e){this.segmentGroup=e||null}},$u=class extends Error{constructor(e){super(),this.urlTree=e}};function Cs(n){return Go(new Uu(n))}function QL(n){return Go(new X(4e3,!1))}function YL(n){return Go(HT(!1,ln.GuardRejected))}var zy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[he])return QL(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:A}=i,M=Qn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof br)throw new $u(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new $u(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new br(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ne(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Gy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZL(n,e,t,r,i){let o=WT(n,e,t);return o.matched?(r=wL(e,r),KL(r,e,t,i).pipe(Q(s=>s===!0?o:P({},Gy)))):ne(o)}function WT(n,e,t){if(e.path==="**")return JL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Gy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||KV)(t,n,e);if(!i)return P({},Gy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function JL(n){return{matched:!0,parameters:n.length>0?TT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wT(n,e,t,r){return t.length>0&&t2(n,t,r)?{segmentGroup:new Ne(e,e2(r,new Ne(t,n.children))),slicedSegments:[]}:t.length===0&&n2(n,t,r)?{segmentGroup:new Ne(n.segments,XL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:t}}function XL(n,e,t,r){let i={};for(let o of t)if(Rh(n,e,o)&&!r[kn(o)]){let s=new Ne([],{});i[kn(o)]=s}return P(P({},r),i)}function e2(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&kn(r)!==he){let i=new Ne([],{});t[kn(r)]=i}return t}function t2(n,e,t){return t.some(r=>Rh(n,e,r)&&kn(r)!==he)}function n2(n,e,t){return t.some(r=>Rh(n,e,r))}function Rh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function r2(n,e,t){return e.length===0&&!n.children[t]}var Wy=class{};function i2(n,e,t,r,i,o,s="emptyOnly"){return new Ky(n,e,t,r,i,s,o).recognize()}var o2=31,Ky=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new zy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=wT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new cn(r,t),o=new bh("",i),s=fL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ss([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(Q(r=>({children:r,rootSnapshot:t})),$r(r=>{if(r instanceof $u)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Uu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof cn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(ki(s=>{let a=r.children[s],u=EL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Oi((s,a)=>(s.push(...a),s)),Hr(null),ag(),rt(s=>{if(s===null)return Cs(r);let a=KT(s);return s2(a),ne(a)}))}processSegment(e,t,r,i,o,s,a){return Ae(t).pipe(ki(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe($r(l=>{if(l instanceof Uu)return ne(null);throw l}))),pn(u=>!!u),$r(u=>{if(zT(u))return r2(r,i,o)?ne(new Wy):Cs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return kn(r)!==s&&(s===he||!Rh(i,o,r))?Cs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Cs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=WT(t,i,o);if(!u)return Cs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>o2&&(this.allowRedirects=!1));let y=new Ss(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ET(i),kn(i),i.component??i._loadedComponent??null,i,IT(i)),b=Ch(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(rt(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=ZL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ye(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Ss(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ET(r),kn(r),r.component??r._loadedComponent??null,r,IT(r)),A=Ch(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:B}=wT(t,m,y,l);if(B.length===0&&M.hasChildren())return this.processChildren(h,l,M,b).pipe(Q(j=>new cn(b,j)));if(l.length===0&&B.length===0)return ne(new cn(b,[]));let G=kn(r)===o;return this.processSegment(h,l,M,B,G?he:o,!0,b).pipe(Q(j=>new cn(b,j instanceof cn?[j]:[])))}))):Cs(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):WL(e,t,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,t).pipe(dt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):YL(t))):ne({routes:[],injector:e})}};function s2(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function a2(n){let e=n.value.routeConfig;return e&&e.path===""}function KT(n){let e=[],t=new Set;for(let r of n){if(!a2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=KT(r.children);e.push(new cn(r.value,i))}return e.filter(r=>!t.has(r))}function ET(n){return n.data||{}}function IT(n){return n.resolve||{}}function u2(n,e,t,r,i,o){return rt(s=>i2(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>me(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function c2(n,e){return rt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of QT(u))s.add(l);let a=0;return Ae(s).pipe(ki(u=>o.has(u)?l2(u,r,n,e):(u.data=Ch(u,u.parent,n).resolve,ne(void 0))),dt(()=>a++),Ko(1),rt(u=>a===s.size?ne(t):kt))})}function QT(n){let e=n.children.map(t=>QT(t)).flat();return[n,...e]}function l2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!UT(i)&&(o[Hu]=i.title),d2(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=Ch(n,n.parent,t).resolve,null)))}function d2(n,e,t,r){let i=by(n);if(i.length===0)return ne({});let o={};return Ae(i).pipe(rt(s=>h2(n[s],e,t,r).pipe(pn(),dt(a=>{if(a instanceof Bu)throw Th(new xs,a);o[s]=a}))),Ko(1),og(o),$r(s=>zT(s)?kt:Go(s)))}function h2(n,e,t,r){let i=zu(e)??r,o=ks(n,i),s=o.resolve?o.resolve(e,t):Qn(i,()=>o(e,t));return ii(s)}function Dy(n){return Ye(e=>{let t=n(e);return t?Ae(t).pipe(Q(()=>e)):ne(e)})}var YT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Hu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(f2),providedIn:"root"})}}return n})(),f2=(()=>{class n extends YT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(zb))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ku=new W("",{providedIn:"root",factory:()=>({})}),p2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["ng-component"]],standalone:!0,features:[fb],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[Zy],encapsulation:2})}}return n})();function Jy(n){let e=n.children&&n.children.map(Jy),t=e?me(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=p2),t}var Ah=new W(""),Xy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(Xd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ii(t.loadComponent()).pipe(Q(ZT),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Xa(()=>{this.componentLoaders.delete(t)})),i=new $o(r,()=>new He).pipe(Uo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=g2(r,this.compiler,t,this.onLoadEndListener).pipe(Xa(()=>{this.childrenLoaders.delete(r)})),s=new $o(o,()=>new He).pipe(Uo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function g2(n,e,t,r){return ii(n.loadChildren()).pipe(Q(ZT),rt(i=>i instanceof uu||Array.isArray(i)?ne(i):Ae(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ah,[],{optional:!0,self:!0}).flat()),{routes:s.map(Jy),injector:o}}))}function m2(n){return n&&typeof n=="object"&&"default"in n}function ZT(n){return m2(n)?n.default:n}var ev=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(y2),providedIn:"root"})}}return n})(),y2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JT=new W(""),XT=new W("");function v2(n,e,t){let r=n.get(XT),i=n.get(Yt);return n.get(Ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),_2(n))),{onViewTransitionCreated:u}=r;return u&&Qn(n,()=>u({transition:a,from:e,to:t})),s})}function _2(n){return new Promise(e=>{zm({read:()=>setTimeout(e)},{injector:n})})}var w2=new W(""),tv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=$(Xy),this.environmentInjector=$(rn),this.urlSerializer=$(qu),this.rootContexts=$(Gu),this.location=$(_s),this.inputBindingEnabled=$(xh,{optional:!0})!==null,this.titleStrategy=$(YT),this.options=$(Ku,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(ev),this.createViewTransition=$(JT,{optional:!0}),this.navigationErrorHandler=$(w2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Py(i)),r=i=>this.events.next(new ky(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new wt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ku,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),Q(o=>me(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{let s=!1,a=!1;return ne(o).pipe(Ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ln.SupersededByNewNavigation),kt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.rawUrl),p,_h.IgnoredSameUrlNavigation)),u.resolve(!1),kt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ne(u).pipe(Ye(p=>{let m=this.transitions?.getValue();return this.events.next(new Rs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?kt:Promise.resolve(p)}),u2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=me(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new wh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:A}=u,M=new Rs(p,this.urlSerializer.serialize(m),y,b);this.events.next(M);let B=jT(this.rootComponentType).snapshot;return this.currentTransition=o=me(P({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:me(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ne(o)}else{let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.extractedUrl),p,_h.IgnoredByUrlHandlingStrategy)),u.resolve(!1),kt}}),dt(u=>{let l=new My(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=o=me(P({},u),{guards:AL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),jL(this.environmentInjector,u=>this.events.next(u)),dt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Th(this.urlSerializer,u.guardsResult);let l=new xy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ln.GuardRejected),!1)),Dy(u=>{if(u.guards.canActivateChecks.length)return ne(u).pipe(dt(l=>{let h=new Ry(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ye(l=>{let h=!1;return ne(l).pipe(c2(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",ln.NoDataFromResolver)}}))}),dt(l=>{let h=new Ny(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Dy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(dt(m=>{h.component=m}),Q(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ja(l(u.targetSnapshot.root)).pipe(Hr(null),gr(1))}),Dy(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ae(h).pipe(Q(()=>o)):ne(o)}),Q(u=>{let l=DL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=me(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),dt(()=>{this.events.next(new Lu)}),SL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gr(1),dt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),cg(this.transitionAbortSubject.pipe(dt(u=>{throw u}))),Xa(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ln.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),$r(u=>{if(a=!0,qT(u))this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),TL(u)?this.events.next(new Ns(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Vu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Qn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Bu){let{message:p,cancellationCode:m}=Th(this.urlSerializer,h);this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ns(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return kt}))}))}cancelNavigationTransition(t,r,i){let o=new Cr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function E2(n){return n!==ku}var I2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(D2),providedIn:"root"})}}return n})(),Qy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},D2=(()=>{class n extends Qy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(C2),providedIn:"root"})}}return n})(),C2=(()=>{class n extends eS{constructor(){super(...arguments),this.location=$(_s),this.urlSerializer=$(qu),this.options=$(Ku,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(ev),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=jT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Rs)this.stateMemento=this.createStateMemento();else if(t instanceof ni)this.rawUrlTree=r.initialUrl;else if(t instanceof wh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Lu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Cr&&(t.code===ln.GuardRejected||t.code===ln.NoDataFromResolver)?this.restoreHistory(r):t instanceof Vu?this.restoreHistory(r,!0):t instanceof Jn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof br?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Nu||{});function tS(n,e){n.events.pipe(Et(t=>t instanceof Jn||t instanceof Cr||t instanceof Vu||t instanceof ni),Q(t=>t instanceof Jn||t instanceof ni?Nu.COMPLETE:(t instanceof Cr?t.code===ln.Redirect||t.code===ln.SupersededByNewNavigation:!1)?Nu.REDIRECTING:Nu.FAILED),Et(t=>t!==Nu.REDIRECTING),gr(1)).subscribe(()=>{e()})}function b2(n){throw n}var T2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ri=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(Qd),this.stateManager=$(eS),this.options=$(Ku,{optional:!0})||{},this.pendingTasks=$(vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(tv),this.urlSerializer=$(qu),this.location=$(_s),this.urlHandlingStrategy=$(ev),this._events=new He,this.errorHandler=this.options.errorHandler||b2,this.navigated=!1,this.routeReuseStrategy=$(I2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(Ah,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(xh,{optional:!0}),this.eventsSubscription=new Qe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cr&&r.code!==ln.Redirect&&r.code!==ln.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Jn)this.navigated=!0;else if(r instanceof Ns){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||E2(i.source)},s);this.scheduleNavigation(a,ku,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}M2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ku,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Jy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=OT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return FT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=no(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ku,null,r)}navigate(t,r={skipLocationChange:!1}){return A2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},T2):r===!1?i=P({},S2):i=r,no(t))return gT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return gT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return tS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function M2(n){return!(n instanceof Lu)&&!(n instanceof Ns)}var nS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new He,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Jn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(no(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:D0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:no(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ce(ri),ce(ro),bm("tabindex"),ce(Wi),ce(Xr),ce(Dr))}}static{this.\u0275dir=Wt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Re("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Gd("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Yi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Yi],replaceUrl:[2,"replaceUrl","replaceUrl",Yi],routerLink:"routerLink"},standalone:!0,features:[qm,zi]})}}return n})();var Mh=class{};var x2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Et(t=>t instanceof Jn),ki(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=zd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ae(i).pipe(Ur())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ne(null);let o=i.pipe(rt(s=>s===null?ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ae([o,s]).pipe(Ur())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(ri),F(Xd),F(rn),F(Mh),F(Xy))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rS=new W(""),R2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ni&&t.code===_h.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Eh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Eh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){F0()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function N2(n){return n.routerState.root}function Qu(n,e){return{\u0275kind:n,\u0275providers:e}}function P2(){let n=$(on);return e=>{let t=n.get(ti);if(e!==t.components[0])return;let r=n.get(ri),i=n.get(iS);n.get(nv)===1&&r.initialNavigation(),n.get(oS,null,ge.Optional)?.setUpPreloading(),n.get(rS,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iS=new W("",{factory:()=>new He}),nv=new W("",{providedIn:"root",factory:()=>1});function k2(){return Qu(2,[{provide:nv,useValue:0},{provide:Jd,multi:!0,deps:[on],useFactory:e=>{let t=e.get(xb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ri),o=e.get(iS);tS(i,()=>{r(!0)}),e.get(tv).afterPreactivation=()=>(r(!0),o.closed?ne(void 0):o),i.initialNavigation()}))}}])}function O2(){return Qu(3,[{provide:Jd,multi:!0,useFactory:()=>{let e=$(ri);return()=>{e.setUpLocationChangeListener()}}},{provide:nv,useValue:2}])}var oS=new W("");function F2(n){return Qu(0,[{provide:oS,useExisting:x2},{provide:Mh,useExisting:n}])}function V2(){return Qu(8,[_T,{provide:xh,useExisting:_T}])}function L2(n){let e=[{provide:JT,useValue:v2},{provide:XT,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Qu(9,e)}var DT=new W("ROUTER_FORROOT_GUARD"),j2=[_s,{provide:qu,useClass:xs},ri,Gu,{provide:ro,useFactory:N2,deps:[ri]},Xy,[]],rv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[j2,[],{provide:Ah,multi:!0,useValue:t},{provide:DT,useFactory:H2,deps:[[ri,new gs,new hm]]},{provide:Ku,useValue:r||{}},r?.useHash?U2():$2(),B2(),r?.preloadingStrategy?F2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?q2(r):[],r?.bindToComponentInputs?V2().\u0275providers:[],r?.enableViewTransitions?L2().\u0275providers:[],z2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ah,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(DT,8))}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({})}}return n})();function B2(){return{provide:rS,useFactory:()=>{let n=$(Ob),e=$(Ce),t=$(Ku),r=$(tv),i=$(qu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new R2(i,r,n,e,t)}}}function U2(){return{provide:Dr,useClass:Nb}}function $2(){return{provide:Dr,useClass:oy}}function H2(n){return"guarded"}function q2(n){return[n.initialNavigation==="disabled"?O2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?k2().\u0275providers:[]]}var CT=new W("");function z2(){return[{provide:CT,useFactory:P2},{provide:Qm,multi:!0,useExisting:CT}]}var Nh=class{constructor(){this.name="",this.goalLife="",this.photoURL="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var W2="firebase",K2="10.14.1";Br(W2,K2,"app");var Os=new vr("ANGULARFIRE2_VERSION");var Q2=(n,e)=>{let t=e?[e]:OI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},io=class{constructor(){return Q2(Y2)}},Y2="app-check";function iv(){}var Ph=class{zone;delegate;constructor(e,t=eg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},ov=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",iv,{},iv,iv)),t.pipe(dt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},kh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ph(Zone.current)),this.insideAngular=t.run(()=>new Ph(Zone.current,Za)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(Ce))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z2(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function en(n){return J2(Z2())(n)}function J2(n){return function(t){return t=t.lift(new ov(n.ngZone)),t.pipe(An(n.outsideAngular),fn(n.insideAngular))}}var tj=new Map,nj={activated:!1,tokenObservers:[]},rj={initialized:!1,enabled:!1};function On(n){return tj.get(n)||Object.assign({},nj)}function dS(){return rj}var ij="https://content-firebaseappcheck.googleapis.com/v1";var oj="exchangeDebugToken",aS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},WW=24*60*60*1e3;var av=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Op,this.pending.promise.catch(t=>{}),yield sj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Op,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sj(n){return new Promise(e=>{setTimeout(e,n)})}var aj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},oi=new PI("appCheck","AppCheck",aj);function hS(n){if(!On(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function fS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw oi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw oi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw oi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function pS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${ij}/projects/${t}/apps/${r}:${oj}?key=${i}`,body:{debug_token:e}}}var uj="firebase-app-check-database",cj=1,uv="firebase-app-check-store";var Oh=null;function lj(){return Oh||(Oh=new Promise((n,e)=>{try{let t=indexedDB.open(uj,cj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(uv,{keyPath:"compositeKey"})}}}catch(t){e(oi.create("storage-open",{originalErrorMessage:t?.message}))}}),Oh)}function dj(n,e){return hj(fj(n),e)}function hj(n,e){return N(this,null,function*(){let r=(yield lj()).transaction(uv,"readwrite"),o=r.objectStore(uv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(oi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function fj(n){return`${n.options.appId}-${n.name}`}var cv=new ll("@firebase/app-check");function sv(n,e){return cl()?dj(n,e).catch(t=>{cv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gS(){return dS().enabled}function mS(){return N(this,null,function*(){let n=dS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pj={error:"UNKNOWN_ERROR"};function gj(n){return xI.encodeString(JSON.stringify(n),!1)}function lv(n,e=!1){return N(this,null,function*(){let t=n.app;hS(t);let r=On(t),i=r.token,o;if(i&&!Yu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Yu(u)?i=u:yield sv(t,void 0))}if(!e&&i&&Yu(i))return{token:i.token};let s=!1;if(gS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fS(pS(t,yield mS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield sv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield On(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?cv.warn(u.message):cv.error(u),o=u}let a;return i?o?Yu(i)?a={token:i.token,internalError:o}:a=cS(o):(a={token:i.token},r.token=i,yield sv(t,i)):a=cS(o),s&&_j(t,a),a})}function mj(n){return N(this,null,function*(){let e=n.app;hS(e);let{provider:t}=On(e);if(gS()){let r=yield mS(),{token:i}=yield fS(pS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yj(n,e,t,r){let{app:i}=n,o=On(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Yu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),uS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uS(n))}function yS(n,e){let t=On(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uS(n){let{app:e}=n,t=On(e),r=t.tokenRefresher;r||(r=vj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vj(n){let{app:e}=n;return new av(()=>N(this,null,function*(){let t=On(e),r;if(t.token?r=yield lv(n,!0):r=yield lv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=On(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},aS.RETRIAL_MIN_WAIT,aS.RETRIAL_MAX_WAIT)}function _j(n,e){let t=On(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yu(n){return n.expireTimeMillis-Date.now()>0}function cS(n){return{token:gj(pj),error:n}}var dv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=On(this.app);for(let t of e)yS(this.app,t.next);return Promise.resolve()}};function wj(n,e){return new dv(n,e)}function Ej(n){return{getToken:e=>lv(n,e),getLimitedUseToken:()=>mj(n),addTokenListener:e=>yj(n,"INTERNAL",e),removeTokenListener:e=>yS(n.app,e)}}var Ij="@firebase/app-check",Dj="0.8.8";var Cj="app-check",lS="app-check-internal";function bj(){za(new xi(Cj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return wj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lS).initialize()})),za(new xi(lS,n=>{let e=n.getProvider("app-check").getImmediate();return Ej(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Br(Ij,Dj)}bj();var Tj=["localhost","0.0.0.0","127.0.0.1"],o8=typeof window<"u"&&Tj.includes(window.location.hostname);var Sj="firebase",Aj="10.14.1";qt.registerVersion(Sj,Aj,"app-compat");var Mj=["ngOnDestroy"],wS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Mj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Fh=class{constructor(e){return e}},Fs=new W("angularfire2.app.options"),Vs=new W("angularfire2.app.name");function Zu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=qt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;xj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Fh(s)}var xj=(n,...e)=>{Jm()&&typeof console<"u"&&console[n](...e)},Rj={provide:Fh,useFactory:Zu,deps:[Fs,Ce,[new gs,Vs]]},ES=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Fs,useValue:t},{provide:Vs,useValue:r}]}}constructor(t){qt.registerVersion("angularfire",Os.full,"core"),qt.registerVersion("angularfire",Os.full,"app-compat"),qt.registerVersion("angular",pb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(Qt))};static \u0275mod=ft({type:n});static \u0275inj=ht({providers:[Rj]})}return n})();function Vh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Nj(i,s)||(_S("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Pj?" You may need to reload as Firebase is not HMR aware.":""}`),_S("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Nj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Pj=typeof module<"u"&&!!module.hot,_S=(n,...e)=>{Jm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var hv=new W("angularfire2.auth.use-emulator"),fv=new W("angularfire2.auth.settings"),pv=new W("angularfire2.auth.tenant-id"),gv=new W("angularfire2.auth.langugage-code"),mv=new W("angularfire2.auth.use-device-language"),yv=new W("angularfire.auth.persistence"),vv=(n,e,t,r,i,o,s,a)=>Vh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),IS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let b=new He,A=ne(void 0).pipe(fn(s.outsideAngular),Ye(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Q(()=>Zu(t,o,r)),Q(M=>vv(M,o,a,l,h,p,u,m)),$l({bufferSize:1,refCount:!1}));if(Zi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{A.pipe(pn()).subscribe();let M=A.pipe(Ye(j=>j.getRedirectResult().then(J=>J,()=>null)),en,$l({bufferSize:1,refCount:!1})),B=A.pipe(Ye(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))})))),G=A.pipe(Ye(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))}))));this.authState=M.pipe(Hl(B),An(s.outsideAngular),fn(s.insideAngular)),this.user=M.pipe(Hl(G),An(s.outsideAngular),fn(s.insideAngular)),this.idToken=this.user.pipe(Ye(j=>j?Ae(j.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(Ye(j=>j?Ae(j.getIdTokenResult()):ne(null))),this.credential=ig(M,b,this.authState.pipe(Et(j=>!j))).pipe(Q(j=>j?.user?j:null),An(s.outsideAngular),fn(s.insideAngular))}return wS(this,A,o,{spy:{apply:(M,B,G)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&G.then(j=>b.next(j))}}})}static \u0275fac=function(r){return new(r||n)(F(Fs),F(Vs,8),F(Qt),F(Ce),F(kh),F(hv,8),F(fv,8),F(pv,8),F(gv,8),F(mv,8),F(yv,8),F(io,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CS={};var si,_v;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)_[cr-2]=arguments[cr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=J(w,v).g;w=B(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=B(this,E),A(E)?-1:b(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(E,v){return E.add(M(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?M(this).j(M(E)):M(M(this).j(E));if(A(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,cr=E.i(D)>>>16,ba=E.i(D)&65535;w[2*I+2*D]+=_*ba,G(w,2*I+2*D),w[2*I+2*D+1]+=T*ba,G(w,2*I+2*D+1),w[2*I+2*D+1]+=_*cr,G(w,2*I+2*D+1),w[2*I+2*D+2]+=T*cr,G(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function G(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function j(E,v){this.g=E,this.h=v}function J(E,v){if(b(v))throw Error("division by zero");if(b(E))return new j(p,p);if(A(E))return v=J(M(E),v),new j(M(v.g),M(v.h));if(A(v))return v=J(E,M(v)),new j(M(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=oe(w),I=oe(I);var D=ee(w,1),T=ee(I,1);for(I=ee(I,2),w=ee(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=ee(I,1),w=ee(w,1)}return v=B(E,D.j(v)),new j(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=m),D=D.add(T),E=B(E,_)}return new j(D,E)}n.A=function(E){return J(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function oe(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function ee(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_v=CS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,si=CS.Integer=s}).apply(typeof DS<"u"?DS:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tr={};var wv,Oj,Ls,Ev,Ju,jh,Iv,Dv,Cv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,x){for(var U=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)U[ke-2]=arguments[ke];return d.prototype[C].apply(g,U)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,x=g.length||0;c.length=C+x;for(let U=0;U<x;U++)c[C+U]=g[U]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ee(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=cp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class cr{constructor(){this.h=this.g=null}add(d,f){let g=ba.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ba=new B(()=>new DR,c=>c.reset());class DR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ta,Sa=!1,cp=new cr,TE=()=>{let c=a.Promise.resolve(void 0);Ta=()=>{c.then(CR)}};var CR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=ba;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Sa=!1};function Fr(){this.s=this.s,this.C=this.C}Fr.prototype.s=!1,Fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var bR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Aa(c,d){if(Ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(oe){e:{try{J(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:TR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Aa.aa.h.call(this)}}b(Aa,Ct);var TR={2:"touch",3:"pen",4:"mouse"};Aa.prototype.h=function(){Aa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ma="closure_listenable_"+(1e6*Math.random()|0),SR=0;function AR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++SR,this.da=this.fa=!1}function zc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gc(c){this.src=c,this.g={},this.h=0}Gc.prototype.add=function(c,d,f,g,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var U=dp(c,d,g,C);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new AR(d,this.src,x,!!g,C),d.fa=f,c.push(d)),d};function lp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&(zc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function dp(c,d,f,g){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),fp={};function SE(c,d,f,g,C){if(g&&g.once)return ME(c,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)SE(c,d[x],f,g,C);return null}return f=yp(f),c&&c[Ma]?c.K(d,f,l(g)?!!g.capture:!!g,C):AE(c,d,f,!1,g,C)}function AE(c,d,f,g,C,x){if(!d)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,ke=gp(c);if(ke||(c[hp]=ke=new Gc(c)),f=ke.add(d,f,g,U,x),f.proxy)return f;if(g=MR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)bR||(C=U),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(RE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function MR(){function c(f){return d.call(c.src,c.listener,f)}let d=xR;return c}function ME(c,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)ME(c,d[x],f,g,C);return null}return f=yp(f),c&&c[Ma]?c.L(d,f,l(g)?!!g.capture:!!g,C):AE(c,d,f,!0,g,C)}function xE(c,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)xE(c,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=yp(f),c&&c[Ma]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=dp(x,f,g,C),-1<f&&(zc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=gp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=dp(d,f,g,C)),(f=-1<c?d[c]:null)&&pp(f))}function pp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ma])lp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(RE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=gp(d))?(lp(f,c),f.h==0&&(f.src=null,d[hp]=null)):zc(c)}}}function RE(c){return c in fp?fp[c]:fp[c]="on"+c}function xR(c,d){if(c.da)c=!0;else{d=new Aa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&pp(c),c=f.call(g,d)}return c}function gp(c){return c=c[hp],c instanceof Gc?c:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(c){return typeof c=="function"?c:(c[mp]||(c[mp]=function(d){return c.handleEvent(d)}),c[mp])}function bt(){Fr.call(this),this.i=new Gc(this),this.M=this,this.F=null}b(bt,Fr),bt.prototype[Ma]=!0,bt.prototype.removeEventListener=function(c,d,f,g){xE(this,c,d,f,g)};function Rt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ct(d,c);else if(d instanceof Ct)d.target=d.target||c;else{var C=d;d=new Ct(g,c),I(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var U=d.g=f[x];C=Wc(U,g,!0,d)&&C}if(U=d.g=c,C=Wc(U,g,!0,d)&&C,C=Wc(U,g,!1,d)&&C,f)for(x=0;x<f.length;x++)U=d.g=f[x],C=Wc(U,g,!1,d)&&C}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)zc(f[g]);delete c.g[d],c.h--}}this.F=null},bt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},bt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Wc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var U=d[x];if(U&&!U.da&&U.capture==f){var ke=U.listener,_t=U.ha||U.src;U.fa&&lp(c.i,U),C=ke.call(_t,g)!==!1&&C}}return C&&!g.defaultPrevented}function NE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function PE(c){c.g=NE(()=>{c.g=null,c.i&&(c.i=!1,PE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class RR extends Fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:PE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(c){Fr.call(this),this.h=c,this.g={}}b(xa,Fr);var kE=[];function OE(c){ee(c.g,function(d,f){this.g.hasOwnProperty(f)&&pp(d)},c),c.g={}}xa.prototype.N=function(){xa.aa.N.call(this),OE(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=a.JSON.stringify,NR=a.JSON.parse,PR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _p(){}_p.prototype.h=null;function FE(c){return c.h||(c.h=c.i())}function VE(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wp(){Ct.call(this,"d")}b(wp,Ct);function Ep(){Ct.call(this,"c")}b(Ep,Ct);var Ti={},LE=null;function Kc(){return LE=LE||new bt}Ti.La="serverreachability";function jE(c){Ct.call(this,Ti.La,c)}b(jE,Ct);function Na(c){let d=Kc();Rt(d,new jE(d))}Ti.STAT_EVENT="statevent";function BE(c,d){Ct.call(this,Ti.STAT_EVENT,c),this.stat=d}b(BE,Ct);function Nt(c){let d=Kc();Rt(d,new BE(d,c))}Ti.Ma="timingevent";function UE(c,d){Ct.call(this,Ti.Ma,c),this.size=d}b(UE,Ct);function Pa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function kR(c,d,f,g,C,x){c.info(function(){if(c.g)if(x)for(var U="",ke=x.split("&"),_t=0;_t<ke.length;_t++){var xe=ke[_t].split("=");if(1<xe.length){var Tt=xe[0];xe=xe[1];var St=Tt.split("_");U=2<=St.length&&St[1]=="type"?U+(Tt+"="+xe+"&"):U+(Tt+"=redacted&")}}else U=null;else U=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+U})}function OR(c,d,f,g,C,x,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+U})}function Po(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+VR(c,f)+(g?" "+g:"")})}function FR(c,d){c.info(function(){return"TIMEOUT: "+d})}ka.prototype.info=function(){};function VR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return vp(f)}catch{return d}}var Qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$E={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ip;function Yc(){}b(Yc,_p),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},Ip=new Yc;function Vr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new HE}function HE(){this.i=null,this.g="",this.h=!1}var qE={},Dp={};function Cp(c,d,f){c.L=1,c.v=el(lr(d)),c.m=f,c.P=!0,zE(c,null)}function zE(c,d){c.F=Date.now(),Zc(c),c.A=lr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),oI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new HE,c.g=DI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new RR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(kE[0]=C.toString()),C=kE);for(var x=0;x<C.length;x++){var U=SE(f,C[x],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Na(),kR(c.i,c.u,c.A,c.l,c.R,c.m)}Vr.prototype.ca=function(c){c=c.target;let d=this.M;d&&dr(c)==3?d.j():this.Y(c)},Vr.prototype.Y=function(c){try{if(c==this.g)e:{let St=dr(this.g);var d=this.g.Ba();let Fo=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||hI(this.g)))){this.J||St!=4||d==7||(d==8||0>=Fo?Na(3):Na(2)),bp(this);var f=this.g.Z();this.X=f;t:if(GE(this)){var g=hI(this.g);c="";var C=g.length,x=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Oa(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,OR(this.i,this.u,this.A,this.l,this.R,St,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,_t=this.g;if((ke=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(ke)){var xe=ke;break t}}xe=null}if(f=xe)Po(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tp(this,f);else{this.o=!1,this.s=3,Nt(12),Si(this),Oa(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<U.length;)if(Tn=LR(this,U),Tn==Dp){St==4&&(this.s=4,Nt(14),f=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==qE){this.s=4,Nt(15),Po(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Po(this.i,this.l,Tn,null),Tp(this,Tn);if(GE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||U.length!=0||this.h.h||(this.s=1,Nt(16),f=!1),this.o=this.o&&f,!f)Po(this.i,this.l,U,"[Invalid Chunked Response]"),Si(this),Oa(this);else if(0<U.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Np(Tt),Tt.M=!0,Nt(11))}}else Po(this.i,this.l,U,null),Tp(this,U);St==4&&Si(this),this.o&&!this.J&&(St==4?_I(this.j,this):(this.o=!1,Zc(this)))}else tN(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Si(this),Oa(this)}}}catch{}finally{}};function GE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function LR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Dp:(f=Number(d.substring(f,g)),isNaN(f)?qE:(g+=1,g+f>d.length?Dp:(d=d.slice(g,g+f),c.C=g+f,d)))}Vr.prototype.cancel=function(){this.J=!0,Si(this)};function Zc(c){c.S=Date.now()+c.I,WE(c,c.I)}function WE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pa(m(c.ba,c),d)}function bp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Vr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(FR(this.i,this.A),this.L!=2&&(Na(),Nt(17)),Si(this),this.s=2,Oa(this)):WE(this,this.S-c)};function Oa(c){c.j.G==0||c.J||_I(c.j,c)}function Si(c){bp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,OE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Tp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Sp(f.h,c))){if(!c.K&&Sp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ol(f),rl(f);else break e;Rp(f),Nt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Pa(m(f.Za,f),6e3));if(1>=YE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mi(f,11)}else if((c.K||f.g==c)&&ol(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let xe=C[d];if(f.T=xe[0],xe=xe[1],f.G==2)if(xe[0]=="c"){f.K=xe[1],f.ia=xe[2];let Tt=xe[3];Tt!=null&&(f.la=Tt,f.j.info("VER="+f.la));let St=xe[4];St!=null&&(f.Aa=St,f.j.info("SVER="+f.Aa));let Fo=xe[5];Fo!=null&&typeof Fo=="number"&&0<Fo&&(g=1.5*Fo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Tn=c.g;if(Tn){let al=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var x=g.h;x.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Ap(x,x.h),x.h=null))}if(g.D){let Pp=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pp&&(g.ya=Pp,je(g.I,g.D,Pp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=c;if(g.qa=II(g,g.J?g.ia:null,g.W),U.K){ZE(g.h,U);var ke=U,_t=g.L;_t&&(ke.I=_t),ke.B&&(bp(ke),Zc(ke)),g.g=U}else yI(g);0<f.i.length&&il(f)}else xe[0]!="stop"&&xe[0]!="close"||Mi(f,7);else f.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Mi(f,7):xp(f):xe[0]!="noop"&&f.l&&f.l.ta(xe),f.v=0)}}Na(4)}catch{}}var jR=class{constructor(c,d){this.g=c,this.map=d}};function KE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function QE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function YE(c){return c.h?1:c.g?c.g.size:0}function Sp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ap(c,d){c.g?c.g.add(d):c.h=d}function ZE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}KE.prototype.cancel=function(){if(this.i=JE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function JE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function BR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function UR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function XE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=UR(c),g=BR(c),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],c)}var eI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $R(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var x=c[f].substring(0,g);C=c[f].substring(g+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ai){this.h=c.h,Jc(this,c.j),this.o=c.o,this.g=c.g,Xc(this,c.s),this.l=c.l;var d=c.i,f=new La;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),tI(this,f),this.m=c.m}else c&&(d=String(c).match(eI))?(this.h=!1,Jc(this,d[1]||"",!0),this.o=Fa(d[2]||""),this.g=Fa(d[3]||"",!0),Xc(this,d[4]),this.l=Fa(d[5]||"",!0),tI(this,d[6]||"",!0),this.m=Fa(d[7]||"")):(this.h=!1,this.i=new La(null,this.h))}Ai.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Va(d,nI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Va(d,nI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Va(f,f.charAt(0)=="/"?zR:qR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Va(f,WR)),c.join("")};function lr(c){return new Ai(c)}function Jc(c,d,f){c.j=f?Fa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Xc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function tI(c,d,f){d instanceof La?(c.i=d,KR(c.i,c.h)):(f||(d=Va(d,GR)),c.i=new La(d,c.h))}function je(c,d,f){c.i.set(d,f)}function el(c){return je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Va(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,HR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function HR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var nI=/[#\/\?@]/g,qR=/[#\?:]/g,zR=/[#\?]/g,GR=/[#\?@]/g,WR=/#/g;function La(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Lr(c){c.g||(c.g=new Map,c.h=0,c.i&&$R(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=La.prototype,n.add=function(c,d){Lr(this),this.i=null,c=ko(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function rI(c,d){Lr(c),d=ko(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function iI(c,d){return Lr(c),d=ko(c,d),c.g.has(d)}n.forEach=function(c,d){Lr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){Lr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(c){Lr(this);let d=[];if(typeof c=="string")iI(this,c)&&(d=d.concat(this.g.get(ko(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Lr(this),this.i=null,c=ko(this,c),iI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function oI(c,d,f){rI(c,d),0<f.length&&(c.i=null,c.g.set(ko(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var C=x;U[g]!==""&&(C+="="+encodeURIComponent(String(U[g]))),c.push(C)}}return this.i=c.join("&")};function ko(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function KR(c,d){d&&!c.j&&(Lr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(rI(this,g),oI(this,C,f))},c)),c.j=d}function QR(c,d){let f=new ka;if(a.Image){let g=new Image;g.onload=y(jr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(jr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(jr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(jr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function YR(c,d){let f=new ka,g=new AbortController,C=setTimeout(()=>{g.abort(),jr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?jr(f,"TestPingServer: ok",!0,d):jr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),jr(f,"TestPingServer: error",!1,d)})}function jr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function ZR(){this.g=new PR}function JR(c,d,f){let g=f||"";try{XE(c,function(C,x){let U=C;l(C)&&(U=vp(C)),d.push(g+x+"="+encodeURIComponent(U))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ja(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ja,_p),ja.prototype.g=function(){return new tl(this.l,this.j)},ja.prototype.i=function(c){return function(){return c}}({});function tl(c,d){bt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tl,bt),n=tl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ba(this):Ua(this),this.readyState==3&&sI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ba(this))},n.Qa=function(c){this.g&&(this.response=c,Ba(this))},n.ga=function(){this.g&&Ba(this)};function Ba(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ua(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function aI(c){let d="";return ee(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Mp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=aI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):je(c,d,f))}function Ke(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ke,bt);var XR=/^https?$/i,eN=["POST","PUT"];n=Ke.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ip.g(),this.v=this.o?FE(this.o):FE(Ip),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){uI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,U]of f)this.g.setRequestHeader(x,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){uI(this,x)}};function uI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,cI(c),nl(c)}function cI(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),nl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lI(this):this.bb())},n.bb=function(){lI(this)};function lI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||dr(c)!=4||c.Z()!=2)){if(c.u&&dr(c)==4)NE(c.Ea,0,c);else if(Rt(c,"readystatechange"),dr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var C=String(c.D).match(eI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!XR.test(C?C.toLowerCase():"")}f=g}if(f)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var x=2<dr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",cI(c)}}finally{nl(c)}}}}function nl(c,d){if(c.g){dI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Rt(c,"ready");try{f.onreadystatechange=g}catch{}}}function dI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function dr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),NR(d)}};function hI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tN(c){let d={};c=(c.g&&2<=dr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function fI(c){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,c),this.cb=$a("retryDelaySeedMs",1e4,c),this.Wa=$a("forwardChannelMaxRetries",2,c),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new KE(c&&c.concurrentRequestLimit),this.Da=new ZR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Nt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=II(this,null,this.W),il(this)};function xp(c){if(pI(c),c.G==3){var d=c.U++,f=lr(c.I);if(je(f,"SID",c.K),je(f,"RID",d),je(f,"TYPE","terminate"),Ha(c,f),d=new Vr(c,c.j,d),d.L=2,d.v=el(lr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=DI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zc(d)}EI(c)}function rl(c){c.g&&(Np(c),c.g.cancel(),c.g=null)}function pI(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!QE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ta||TE(),Sa||(Ta(),Sa=!0),cp.add(d,c),c.B=0}}function nN(c,d){return YE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pa(m(c.Ga,c,d),wI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Vr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=mI(this,C,d),f=lr(this.I),je(f,"RID",c),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),Ha(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(aI(x)))+"&"+d:this.m&&Mp(f,this.m,x)),Ap(this.h,C),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),C.T=!0,Cp(C,f,null)):Cp(C,f,d),this.G=2}}else this.G==3&&(c?gI(this,c):this.i.length==0||QE(this.h)||gI(this))};function gI(c,d){var f;d?f=d.l:f=c.U++;let g=lr(c.I);je(g,"SID",c.K),je(g,"RID",f),je(g,"AID",c.T),Ha(c,g),c.m&&c.o&&Mp(g,c.m,c.o),f=new Vr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=mI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ap(c.h,f),Cp(f,g,d)}function Ha(c,d){c.H&&ee(c.H,function(f,g){je(d,g,f)}),c.l&&XE({},function(f,g){je(d,g,f)})}function mI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let U=["count="+f];x==-1?0<f?(x=C[0].g,U.push("ofs="+x)):x=0:U.push("ofs="+x);let ke=!0;for(let _t=0;_t<f;_t++){let xe=C[_t].g,Tt=C[_t].map;if(xe-=x,0>xe)x=Math.max(0,C[_t].g-100),ke=!1;else try{JR(Tt,U,"req"+xe+"_")}catch{g&&g(Tt)}}if(ke){g=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function yI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ta||TE(),Sa||(Ta(),Sa=!0),cp.add(d,c),c.v=0}}function Rp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pa(m(c.Fa,c),wI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,vI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),rl(this),vI(this))};function Np(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function vI(c){c.g=new Vr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=lr(c.qa);je(d,"RID","rpc"),je(d,"SID",c.K),je(d,"AID",c.T),je(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&je(d,"TO",c.ja),je(d,"TYPE","xmlhttp"),Ha(c,d),c.m&&c.o&&Mp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=el(lr(d)),f.m=null,f.P=!0,zE(f,c)}n.Za=function(){this.C!=null&&(this.C=null,rl(this),Rp(this),Nt(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function _I(c,d){var f=null;if(c.g==d){ol(c),Np(c),c.g=null;var g=2}else if(Sp(c.h,d))f=d.D,ZE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Kc(),Rt(g,new UE(g,f)),il(c)}else yI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&nN(c,d)||g==2&&Rp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function wI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Mi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Ai(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(g,"https"),el(g),C?QR(g.toString(),f):YR(g.toString(),f)}else Nt(2);c.G=0,c.l&&c.l.sa(d),EI(c),pI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function EI(c){if(c.G=0,c.ka=[],c.l){let d=JE(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function II(c,d,f){var g=f instanceof Ai?lr(f):new Ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),Xc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new Ai(null);g&&Jc(x,g),d&&(x.g=d),C&&Xc(x,C),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&je(g,f,d),je(g,"VER",c.la),Ha(c,g),g}function DI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ke(new ja({eb:f})):new Ke(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function CI(){}n=CI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new nn(c,d)};function nn(c,d){bt.call(this),this.g=new fI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Oo(this)}b(nn,bt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){xp(this.g)},nn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=vp(c),c=f);d.i.push(new jR(d.Ya++,c)),d.G==3&&il(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,xp(this.g),delete this.g,nn.aa.N.call(this)};function bI(c){wp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(bI,wp);function TI(){Ep.call(this),this.status=1}b(TI,Ep);function Oo(c){this.g=c}b(Oo,CI),Oo.prototype.ua=function(){Rt(this.g,"a")},Oo.prototype.ta=function(c){Rt(this.g,new bI(c))},Oo.prototype.sa=function(c){Rt(this.g,new TI)},Oo.prototype.ra=function(){Rt(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,Cv=Tr.createWebChannelTransport=function(){return new sl},Dv=Tr.getStatEventTarget=function(){return Kc()},Iv=Tr.Event=Ti,jh=Tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,Ju=Tr.ErrorCode=Qc,$E.COMPLETE="complete",Ev=Tr.EventType=$E,VE.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Ls=Tr.WebChannel=VE,Oj=Tr.FetchXmlHttpFactory=ja,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,wv=Tr.XhrIo=Ke}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});var bS="@firebase/firestore";var ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");var ga="10.14.0";var fi=new ll("@firebase/firestore");function Hs(){return fi.logLevel}function AA(n){fi.setLogLevel(n)}function O(n,...e){if(fi.logLevel<=Un.DEBUG){let t=e.map(Mw);fi.debug(`Firestore (${ga}): ${n}`,...t)}}function Xe(n,...e){if(fi.logLevel<=Un.ERROR){let t=e.map(Mw);fi.error(`Firestore (${ga}): ${n}`,...t)}}function Fn(n,...e){if(fi.logLevel<=Un.WARN){let t=e.map(Mw);fi.warn(`Firestore (${ga}): ${n}`,...t)}}function Mw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+n;throw Xe(e),new Error(e)}function Z(n,e){n||K()}function MA(n,e){n||K()}function H(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends NI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ut.UNAUTHENTICATED))}shutdown(){}},Rv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nv=class{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new Qh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new ut(e)}},Pv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},kv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Pv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ov=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new Ov(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Fj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Fj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function Js(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xA(n){return n+"\0"}var Ge=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ge(0,0))}static max(){return new n(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Te=class n extends Zh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,et=class n extends Zh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Te.fromString(e))}static fromName(e){return new n(Te.fromString(e).popFirst(5))}static empty(){return new n(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Te(e.slice()))}};var Xs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Vv(n){return n.fields.find(e=>e.kind===2)}function so(n){return n.fields.filter(e=>e.kind!==2)}Xs.UNKNOWN_ID=-1;var Qs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var lc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Cn.min())}};function RA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ge(t+1,0):new Ge(t,r));return new Cn(i,q.empty(),e)}function NA(n){return new Cn(n.readTime,n.key,-1)}var Cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),q.empty(),-1)}static max(){return new n(te.max(),q.empty(),-1)}};function xw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var PA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Di(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==PA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Xh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Rw(r.target.error);this.V.reject(new fo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new fo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new jv(t)}},pi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(qa())===12.2&&Xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),ao(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cl())return!1;if(n.v())return!0;let e=qa(),t=n.S(e),r=0<t&&t<10,i=kA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new fo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Xh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function kA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Lv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ao(this.B.delete())}},fo=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ci(n){return n.name==="IndexedDbTransactionError"}var jv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ao(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),ao(this.store.add(e))}get(e){return ao(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),ao(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),ao(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Rw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Lv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ao(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Rw(r.target.error);t(i)}})}var TS=!1;function Rw(n){let e=pi.S(qa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TS||(TS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Bv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ci(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Di(t)}yield this.X(6e4)}))}},Uv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=NA(o);xw(s,r)>0&&(r=s)}),new Cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var dn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Rc(n){return n==null}function dc(n){return n===0&&1/n==-1/0}function OA(n){return typeof n=="number"&&Number.isInteger(n)&&!dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SS(e)),e=Lj(n.get(t),e);return SS(e)}function Lj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function SS(n){return n+""}function Xn(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),Te.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Te(r)}var AS=["userId","batchId"];function qh(n,e){return[n,Bt(e)]}function FA(n,e,t){return[n,Bt(e),t]}var jj={},Bj=["prefixPath","collectionGroup","readTime","documentId"],Uj=["prefixPath","collectionGroup","documentId"],$j=["collectionGroup","readTime","prefixPath","documentId"],Hj=["canonicalId","targetId"],qj=["targetId","path"],zj=["path","targetId"],Gj=["collectionId","parent"],Wj=["indexId","uid"],Kj=["uid","sequenceNumber"],Qj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yj=["indexId","uid","orderedDocumentKey"],Zj=["userId","collectionPath","documentId"],Jj=["userId","collectionPath","largestBatchId"],Xj=["userId","collectionGroup","largestBatchId"],VA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eB=[...VA,"documentOverlays"],LA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jA=LA,Nw=[...jA,"indexConfiguration","indexState","indexEntries"],tB=Nw,nB=[...Nw,"globals"];var hc=class extends Jh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function gt(n,e){let t=H(n);return pi.F(t._e,e)}function MS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ks(this.root,e,this.comparator,!0)}},Ks=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new tr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Fe=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ef(this.data.getIterator())}getIteratorFrom(e){return new ef(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ef=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function js(n){return n.hasNext()?n.getNext():void 0}var hn=class n{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new n([])}unionWith(e){let t=new Fe(et.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var tf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function UA(){return typeof atob<"u"}var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var rB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(n){if(Z(!!n),typeof n=="string"){let e=0,t=rB.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gi(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}function Wf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Pw(n){let e=n.mapValue.fields.__previous_value__;return Wf(e)?Pw(e):e}function fc(n){let e=Mr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var $v=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},mi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zh={nullValue:"NULL_VALUE"};function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wf(n)?4:$A(n)?9007199254740991:Kf(n)?10:11:K()}function ir(n,e){if(n===e)return!0;let t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fc(n).isEqual(fc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Mr(i.timestampValue),a=Mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return gi(i.bytesValue).isEqual(gi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?dc(s)===dc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Js(n.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MS(s)!==MS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ir(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function pc(n,e){return(n.values||[]).find(t=>ir(t,e))!==void 0}function yi(n,e){if(n===e)return 0;let t=po(n),r=po(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=qe(o.integerValue||o.doubleValue),u=qe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return xS(n.timestampValue,e.timestampValue);case 4:return xS(fc(n),fc(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(o,s){let a=gi(o),u=gi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=le(a[l],u[l]);if(h!==0)return h}return le(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=le(qe(o.latitude),qe(s.latitude));return a!==0?a:le(qe(o.longitude),qe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,A=le(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:RS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===di.mapValue&&s===di.mapValue)return 0;if(o===di.mapValue)return 1;if(s===di.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=le(u[p],h[p]);if(m!==0)return m;let y=yi(a[u[p]],l[h[p]]);if(y!==0)return y}return le(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function xS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Mr(n),r=Mr(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function RS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=yi(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function ea(n){return Hv(n)}function Hv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Hv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Hv(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function go(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qv(n){return!!n&&"integerValue"in n}function gc(n){return!!n&&"arrayValue"in n}function NS(n){return!!n&&"nullValue"in n}function PS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gh(n){return!!n&&"mapValue"in n}function Kf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function oc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return bo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $A(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var HA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iB(n){return"nullValue"in n?zh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?go(mi.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Kf(n)?HA:{mapValue:{}}:K()}function oB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?go(mi.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?HA:"mapValue"in n?Kf(n)?{mapValue:{}}:di:K()}function kS(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OS(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var xt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=et.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=oc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(oc(this.value))}};function qA(n){let e=[];return bo(n.fields,(t,r)=>{let i=new et([t]);if(Gh(r)){let o=qA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new hn(e)}var ct=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),xt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),xt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var or=class{constructor(e,t){this.position=e,this.inclusive=t}};function FS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=yi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function VS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ir(n.position[t],e.position[t]))return!1;return!0}var mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nf=class{},De=class n extends nf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Wv(e,t,r):t==="array-contains"?new Yv(e,r):t==="in"?new rf(e,r):t==="not-in"?new Zv(e,r):t==="array-contains-any"?new Jv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Kv(e,r):new Qv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yi(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pe=class n extends nf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ta(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ta(n){return n.op==="and"}function zv(n){return n.op==="or"}function kw(n){return zA(n)&&ta(n)}function zA(n){for(let e of n.filters)if(e instanceof Pe)return!1;return!0}function Gv(n){if(n instanceof De)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(kw(n))return n.filters.map(e=>Gv(e)).join(",");{let e=n.filters.map(t=>Gv(t)).join(",");return`${n.op}(${e})`}}function GA(n,e){return n instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.field.isEqual(i.field)&&ir(r.value,i.value)}(n,e):n instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&GA(s,i.filters[a]),!0):!1}(n,e):void K()}function WA(n,e){let t=n.filters.concat(e);return Pe.create(t,n.op)}function KA(n){return n instanceof De?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(n):n instanceof Pe?function(t){return t.op.toString()+" {"+t.getFilters().map(KA).join(" ,")+"}"}(n):"Filter"}var Wv=class extends De{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Kv=class extends De{constructor(e,t){super(e,"in",t),this.keys=QA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Qv=class extends De{constructor(e,t){super(e,"not-in",t),this.keys=QA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var Yv=class extends De{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gc(t)&&pc(t.arrayValue,this.value)}},rf=class extends De{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pc(this.value.arrayValue,t)}},Zv=class extends De{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!pc(this.value.arrayValue,t)}},Jv=class extends De{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pc(this.value.arrayValue,r))}};var Xv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function e_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Xv(n,e,t,r,i,o,s)}function yo(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ea(r)).join(",")),e.ue=t}return e.ue}function Nc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VS(n.startAt,e.startAt)&&VS(n.endAt,e.endAt)}function of(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sf(n,e){return n.filters.filter(t=>t instanceof De&&t.field.isEqual(e))}function LS(n,e,t){let r=zh,i=!0;for(let o of sf(n,e)){let s=zh,a=!0;switch(o.op){case"<":case"<=":s=iB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=zh}kS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function jS(n,e,t){let r=di,i=!0;for(let o of sf(n,e)){let s=di,a=!0;switch(o.op){case">=":case">":s=oB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=di}OS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];OS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Vn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function YA(n,e,t,r,i,o,s,a){return new Vn(n,e,t,r,i,o,s,a)}function ma(n){return new Vn(n)}function BS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ow(n){return n.collectionGroup!==null}function Ys(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Fe(et.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new mo(o,r))}),t.has(et.keyField().canonicalString())||e.ce.push(new mo(et.keyField(),r))}return e.ce}function Ut(n){let e=H(n);return e.le||(e.le=aB(e,Ys(n))),e.le}function aB(n,e){if(n.limitType==="F")return e_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new mo(i.field,o)});let t=n.endAt?new or(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new or(n.startAt.position,n.startAt.inclusive):null;return e_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function t_(n,e){let t=n.filters.concat([e]);return new Vn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function af(n,e,t){return new Vn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pc(n,e){return Nc(Ut(n),Ut(e))&&n.limitType===e.limitType}function ZA(n){return`${yo(Ut(n))}|lt:${n.limitType}`}function qs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>KA(i)).join(", ")}]`),Rc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ea(i)).join(",")),`Target(${r})`}(Ut(n))}; limitType=${n.limitType})`}function kc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ys(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=FS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ys(r),i)||r.endAt&&!function(s,a,u){let l=FS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ys(r),i))}(n,e)}function JA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XA(n){return(e,t)=>{let r=!1;for(let i of Ys(n)){let o=uB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?yi(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var sr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return BA(this.inner)}size(){return this.innerSize}};var cB=new $e(q.comparator);function tn(){return cB}var eM=new $e(q.comparator);function rc(...n){let e=eM;for(let t of n)e=e.insert(t.key,t);return e}function tM(n){let e=eM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function er(){return sc()}function nM(){return sc()}function sc(){return new sr(n=>n.toString(),(n,e)=>n.isEqual(e))}var lB=new $e(q.comparator),dB=new Fe(q.comparator);function de(...n){let e=dB;for(let t of n)e=e.add(t);return e}var hB=new Fe(le);function Fw(){return hB}function Vw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function rM(n){return{integerValue:""+n}}function iM(n,e){return OA(e)?rM(e):Vw(n,e)}var na=class{constructor(){this._=void 0}};function fB(n,e,t){return n instanceof vi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Wf(o)&&(o=Pw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof xr?sM(n,e):n instanceof Rr?aM(n,e):function(i,o){let s=oM(i,o),a=US(s)+US(i.Pe);return qv(s)&&qv(i.Pe)?rM(a):Vw(i.serializer,a)}(n,e)}function pB(n,e,t){return n instanceof xr?sM(n,e):n instanceof Rr?aM(n,e):t}function oM(n,e){return n instanceof _i?function(r){return qv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var vi=class extends na{},xr=class extends na{constructor(e){super(),this.elements=e}};function sM(n,e){let t=uM(e);for(let r of n.elements)t.some(i=>ir(i,r))||t.push(r);return{arrayValue:{values:t}}}var Rr=class extends na{constructor(e){super(),this.elements=e}};function aM(n,e){let t=uM(e);for(let r of n.elements)t=t.filter(i=>!ir(i,r));return{arrayValue:{values:t}}}var _i=class extends na{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function US(n){return qe(n.integerValue||n.doubleValue)}function uM(n){return gc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var vo=class{constructor(e,t){this.field=e,this.transform=t}};function gB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xr&&i instanceof xr||r instanceof Rr&&i instanceof Rr?Js(r.elements,i.elements,ir):r instanceof _i&&i instanceof _i?ir(r.Pe,i.Pe):r instanceof vi&&i instanceof vi}(n.transform,e.transform)}var n_=class{constructor(e,t){this.version=e,this.transformResults=t}},Je=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ra=class{};function cM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ei(n.key,Je.none()):new wi(n.key,n.data,Je.none());{let t=n.data,r=xt.empty(),i=new Fe(et.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ln(n.key,r,new hn(i.toArray()),Je.none())}}function mB(n,e,t){n instanceof wi?function(i,o,s){let a=i.value.clone(),u=HS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ln?function(i,o,s){if(!Wh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=HS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(lM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof wi?function(o,s,a,u){if(!Wh(o.precondition,s))return a;let l=o.value.clone(),h=qS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ln?function(o,s,a,u){if(!Wh(o.precondition,s))return a;let l=qS(o.fieldTransforms,u,s),h=s.data;return h.setAll(lM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Wh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=oM(r.transform,i||null);o!=null&&(t===null&&(t=xt.empty()),t.set(r.field,o))}return t||null}function $S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Js(r,i,(o,s)=>gB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wi=class extends ra{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends ra{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function lM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function HS(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pB(s,a,t[i]))}return r}function qS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fB(o,s,e))}return r}var Ei=class extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mc=class extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=cM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(t,r)=>$S(t,r))&&Js(this.baseMutations,e.baseMutations,(t,r)=>$S(t,r))}},r_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return lB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var vc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var i_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var st,be;function dM(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function hM(n){if(n===void 0)return Xe("GRPC error has no .code"),R.UNKNOWN;switch(n){case st.OK:return R.OK;case st.CANCELLED:return R.CANCELLED;case st.UNKNOWN:return R.UNKNOWN;case st.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case st.INTERNAL:return R.INTERNAL;case st.UNAVAILABLE:return R.UNAVAILABLE;case st.UNAUTHENTICATED:return R.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case st.NOT_FOUND:return R.NOT_FOUND;case st.ALREADY_EXISTS:return R.ALREADY_EXISTS;case st.PERMISSION_DENIED:return R.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case st.ABORTED:return R.ABORTED;case st.OUT_OF_RANGE:return R.OUT_OF_RANGE;case st.UNIMPLEMENTED:return R.UNIMPLEMENTED;case st.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(be=st||(st={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";var zS=null;function fM(){return new TextEncoder}var vB=new si([4294967295,4294967295],0);function GS(n){let e=fM().encode(n),t=new _v;return t.update(e),new Uint8Array(t.digest())}function WS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new si([t,r],0),new si([i,o],0)]}var o_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ho(`Invalid padding: ${t}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ho(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=si.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(si.fromNumber(r)));return i.compare(vB)===1&&(i=new si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=GS(e),[r,i]=WS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ho=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _c=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new $e(le),tn(),de())}},wc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var Zs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},uf=class{constructor(e,t){this.targetId=e,this.me=t}},cf=class{constructor(e,t,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},lf=class{constructor(){this.fe=0,this.ge=QS(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new wc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=QS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},s_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=tn(),this.qe=KS(),this.Qe=new $e(le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(of(o))if(r===0){let s=new q(o.path);this.Ue(t,s,ct.newNoDocument(s,te.min()))}else Z(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}zS?.et(function(h,p,m,y,b){var A,M,B,G,j,J;let oe={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ee=p.unchangedNames;return ee&&(oe.bloomFilter={applied:b===0,hashCount:(A=ee?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(G=(B=(M=ee?.bits)===null||M===void 0?void 0:M.bitmap)===null||B===void 0?void 0:B.length)!==null&&G!==void 0?G:0,padding:(J=(j=ee?.bits)===null||j===void 0?void 0:j.padding)!==null&&J!==void 0?J:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),oe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=gi(r).toUint8Array()}catch(u){if(u instanceof tf)return Fn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new o_(s,i,o)}catch(u){return Fn(u instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&of(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ct.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new _c(e,t,this.Qe,this.ke,r);return this.ke=tn(),this.qe=KS(),this.Qe=new $e(le),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new lf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Fe(le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function KS(){return new $e(q.comparator)}function QS(){return new $e(q.comparator)}var _B={asc:"ASCENDING",desc:"DESCENDING"},wB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EB={and:"AND",or:"OR"},a_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function u_(n,e){return n.useProto3Json||Rc(e)?e:{value:e}}function ia(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IB(n,e){return ia(n,e.toTimestamp())}function tt(n){return Z(!!n),te.fromTimestamp(function(t){let r=Mr(t);return new Ge(r.seconds,r.nanos)}(n))}function Lw(n,e){return c_(n,e).canonicalString()}function c_(n,e){let t=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gM(n){let e=Te.fromString(n);return Z(bM(e)),e}function Ec(n,e){return Lw(n.databaseId,e.path)}function nr(n,e){let t=gM(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(vM(t))}function mM(n,e){return Lw(n.databaseId,e)}function yM(n){let e=gM(n);return e.length===4?Te.emptyPath():vM(e)}function l_(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vM(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YS(n,e,t){return{name:Ec(n,e),fields:t.value.mapValue.fields}}function _M(n,e,t){let r=nr(n,e.name),i=tt(e.updateTime),o=e.createTime?tt(e.createTime):te.min(),s=new xt({mapValue:{fields:e.fields}}),a=ct.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function DB(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let o=nr(r,i.found.name),s=tt(i.found.updateTime),a=i.found.createTime?tt(i.found.createTime):te.min(),u=new xt({mapValue:{fields:i.found.fields}});return ct.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let o=nr(r,i.missing),s=tt(i.readTime);return ct.newNoDocument(o,s)}(n,e):K()}function CB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Z(h===void 0||typeof h=="string"),nt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:hM(l.code);return new k(h,l.message||"")}(s);t=new cf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nr(n,r.document.name),o=tt(r.document.updateTime),s=r.document.createTime?tt(r.document.createTime):te.min(),a=new xt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Zs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nr(n,r.document),o=r.readTime?tt(r.readTime):te.min(),s=ct.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Zs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nr(n,r.document),o=r.removedTargetIds||[];t=new Zs([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new i_(i,o),a=r.targetId;t=new uf(a,s)}}return t}function Ic(n,e){let t;if(e instanceof wi)t={update:YS(n,e.key,e.value)};else if(e instanceof Ei)t={delete:Ec(n,e.key)};else if(e instanceof Ln)t={update:YS(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof mc))return K();t={verify:Ec(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:IB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function d_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Je.updateTime(tt(o.updateTime)):o.exists!==void 0?Je.exists(o.exists):Je.none()}(e.currentDocument):Je.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),u=new vi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new xr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Rr(h)}else"increment"in a?u=new _i(s,a.increment):K();let l=et.fromServerFormat(a.fieldPath);return new vo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=nr(n,e.update.name),o=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new hn(l.map(h=>et.fromServerFormat(h)))}(e.updateMask);return new Ln(i,o,s,t,r)}return new wi(i,o,t,r)}if(e.delete){let i=nr(n,e.delete);return new Ei(i,t)}if(e.verify){let i=nr(n,e.verify);return new mc(i,t)}return K()}function bB(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?tt(i.updateTime):tt(o);return s.isEqual(te.min())&&(s=tt(o)),new n_(s,i.transformResults||[])}(t,e))):[]}function wM(n,e){return{documents:[mM(n,e.path)]}}function EM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mM(n,i);let o=function(l){if(l.length!==0)return CM(Pe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:zs(m.field),direction:SB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=u_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function IM(n){let e=yM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=DM(p);return m instanceof Pe&&kw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new mo(Gs(b.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Rc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new or(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new or(y,m)}(t.endAt)),YA(e,i,s,o,a,"F",u,l)}function TB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Gs(t.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Gs(t.unaryFilter.field);return De.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Gs(t.unaryFilter.field);return De.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Gs(t.unaryFilter.field);return De.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return De.create(Gs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pe.create(t.compositeFilter.filters.map(r=>DM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function SB(n){return _B[n]}function AB(n){return wB[n]}function MB(n){return EB[n]}function zs(n){return{fieldPath:n.canonicalString()}}function Gs(n){return et.fromServerFormat(n.fieldPath)}function CM(n){return n instanceof De?function(t){if(t.op==="=="){if(PS(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NAN"}};if(NS(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PS(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NOT_NAN"}};if(NS(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(t.field),op:AB(t.op),value:t.value}}}(n):n instanceof Pe?function(t){let r=t.getFilters().map(i=>CM(i));return r.length===1?r[0]:{compositeFilter:{op:MB(t.op),filters:r}}}(n):K()}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var oa=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var df=class{constructor(e){this.ct=e}};function RB(n,e){let t;if(e.document)t=_M(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=wo(e.noDocument.readTime);t=ct.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=q.fromSegments(e.unknownDocument.path),i=wo(e.unknownDocument.version);t=ct.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ge(i[0],i[1]);return te.fromTimestamp(o)}(e.readTime)),t}function ZS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Ec(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ia(o,s.version.toTimestamp()),createTime:ia(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_o(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:_o(e.version)}}return r}function hf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _o(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wo(n){let e=new Ge(n.seconds,n.nanoseconds);return te.fromTimestamp(e)}function uo(n,e){let t=(e.baseMutations||[]).map(o=>d_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>d_(n.ct,o)),i=Ge.fromMillis(e.localWriteTimeMs);return new yc(e.batchId,i,t,r)}function ic(n){let e=wo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?wo(n.lastLimboFreeSnapshotVersion):te.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Z(o.documents.length===1),Ut(ma(yM(o.documents[0])))}(n.query):function(o){return Ut(IM(o))}(n.query),new oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,nt.fromBase64String(n.resumeToken))}function TM(n,e){let t=_o(e.snapshotVersion),r=_o(e.lastLimboFreeSnapshotVersion),i;i=of(e.target)?wM(n.ct,e.target):EM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jw(n){let e=IM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?af(e,e.limit,"L"):e}function bv(n,e){return new vc(e.largestBatchId,d_(n.ct,e.overlayMutation))}function JS(n,e){let t=e.path.lastSegment();return[n,Bt(e.path.popLast()),t]}function XS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:_o(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var h_=class{getBundleMetadata(e,t){return eA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:wo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return eA(e).put(function(i){return{bundleId:i.id,createTime:_o(tt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return tA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:jw(o.bundledQuery),readTime:wo(o.readTime)}}(r)})}saveNamedQuery(e,t){return tA(e).put(function(i){return{name:i.name,readTime:_o(tt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function eA(n){return gt(n,"bundles")}function tA(n){return gt(n,"namedQueries")}var ff=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Xu(e).get(JS(this.userId,t)).next(r=>r?bv(this.serializer,r):null)}getOverlays(e,t){let r=er();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new vc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Xu(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=er(),o=Bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=bv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=er(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=bv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Xu(e).put(function(i,o,s){let[a,u,l]=JS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ic(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Xu(n){return gt(n,"documentOverlays")}var f_=class{Pt(e){return gt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?nt.fromUint8Array(r):nt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Sr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),dc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(gi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?$A(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Kf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(qe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Sr.vt=new Sr;function NB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=NB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var p_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=nA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=nA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},g_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},m_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},co=class{constructor(){this.jt=new p_,this.Ht=new g_(this.jt),this.Jt=new m_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var lo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ai(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rA(n.arrayValue,e.arrayValue),t!==0?t:(t=rA(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function rA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var pf=class{constructor(e){this.Xt=new Fe((t,r)=>et.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Vv(e);if(t!==void 0&&!this.sn(t))return!1;let r=so(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Fe(et.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qs(r.field,r.dir==="asc"?0:1)));return new Xs(Xs.UNKNOWN_ID,this.collectionId,t,lc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function SM(n){var e,t;if(Z(n instanceof De||n instanceof Pe),n instanceof De){if(n instanceof rf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>De.create(n.field,"==",o)))||[];return Pe.create(i,"or")}return n}let r=n.filters.map(i=>SM(i));return Pe.create(r,n.op)}function PB(n){if(n.getFilters().length===0)return[];let e=__(SM(n));return Z(AM(e)),y_(e)||v_(e)?[e]:e.getFilters()}function y_(n){return n instanceof De}function v_(n){return n instanceof Pe&&kw(n)}function AM(n){return y_(n)||v_(n)||function(t){if(t instanceof Pe&&zv(t)){for(let r of t.getFilters())if(!y_(r)&&!v_(r))return!1;return!0}return!1}(n)}function __(n){if(Z(n instanceof De||n instanceof Pe),n instanceof De)return n;if(n.filters.length===1)return __(n.filters[0]);let e=n.filters.map(r=>__(r)),t=Pe.create(e,n.op);return t=gf(t),AM(t)?t:(Z(t instanceof Pe),Z(ta(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>Bw(r,i)))}function Bw(n,e){let t;return Z(n instanceof De||n instanceof Pe),Z(e instanceof De||e instanceof Pe),t=n instanceof De?e instanceof De?function(i,o){return Pe.create([i,o],"and")}(n,e):iA(n,e):e instanceof De?iA(e,n):function(i,o){if(Z(i.filters.length>0&&o.filters.length>0),ta(i)&&ta(o))return WA(i,o.getFilters());let s=zv(i)?i:o,a=zv(i)?o:i,u=s.filters.map(l=>Bw(l,a));return Pe.create(u,"or")}(n,e),gf(t)}function iA(n,e){if(ta(e))return WA(e,n.getFilters());{let t=e.filters.map(r=>Bw(n,r));return Pe.create(t,"or")}}function gf(n){if(Z(n instanceof De||n instanceof Pe),n instanceof De)return n;let e=n.getFilters();if(e.length===1)return gf(e[0]);if(zA(n))return n;let t=e.map(i=>gf(i)),r=[];return t.forEach(i=>{i instanceof De?r.push(i):i instanceof Pe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,n.op)}var w_=class{constructor(){this.un=new Dc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Dc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fe(Te.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Te.comparator)).toArray()}};var Bh=new Uint8Array(0),E_=class{constructor(e,t){this.databaseId=t,this.cn=new Dc,this.ln=new sr(r=>yo(r),(r,i)=>Nc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Bt(i)};return oA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[xA(t),""],!1,!0);return oA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Xn(s.parent))}return r})}addFieldIndex(e,t){let r=ec(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Us(e);return o.next(a=>{s.put(XS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=ec(e),i=Us(e),o=Bs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ec(e),r=Bs(e),i=Us(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new pf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Bs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return S.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${yo(t)}`);let h=function(j,J){let oe=Vv(J);if(oe===void 0)return null;for(let ee of sf(j,oe.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,u),p=function(j,J){let oe=new Map;for(let ee of so(J))for(let E of sf(j,ee.fieldPath))switch(E.op){case"==":case"in":oe.set(ee.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return oe.set(ee.fieldPath.canonicalString(),E.value),Array.from(oe.values())}return null}(l,u),m=function(j,J){let oe=[],ee=!0;for(let E of so(J)){let v=E.kind===0?LS(j,E.fieldPath,j.startAt):jS(j,E.fieldPath,j.startAt);oe.push(v.value),ee&&(ee=v.inclusive)}return new or(oe,ee)}(l,u),y=function(j,J){let oe=[],ee=!0;for(let E of so(J)){let v=E.kind===0?jS(j,E.fieldPath,j.endAt):LS(j,E.fieldPath,j.endAt);oe.push(v.value),ee&&(ee=v.inclusive)}return new or(oe,ee)}(l,u),b=this.In(u,l,m),A=this.In(u,l,y),M=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,A,y.inclusive,M);return S.forEach(B,G=>r.G(G,t.limit).next(j=>{j.forEach(J=>{let oe=q.fromSegments(J.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PB(Pe.create(e.filters,"and")).map(r=>e_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Bh,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new lo(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new lo(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new pf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Fe(et.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new co;for(let i of so(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Sr.vt.It(o,s)}return r.zt()}dn(e){let t=new co;return Sr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new co;return Sr.vt.It(go(this.databaseId,t),r.Yt(function(o){let s=so(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new co);let o=0;for(let s of so(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&gc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Sr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new co;u.seed(a.zt()),Sr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=ec(e),i=Us(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new lc(p.sequenceNumber,new Cn(wo(p.readTime),new q(Xn(p.documentKey)),p.largestBatchId)):lc.empty(),y=h.fields.map(([b,A])=>new Qs(et.fromServerFormat(b),A));return new Xs(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=ec(e),o=Us(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(XS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Bs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Bs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Bs(e),o=new Fe(ai);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new lo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Fe(ai),i=this.Vn(t,e);if(i==null)return r;let o=Vv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(gc(s))for(let a of s.arrayValue.values||[])r=r.add(new lo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new lo(t.indexId,e.key,Bh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),A=js(y),M=js(b);for(;A||M;){let B=!1,G=!1;if(A&&M){let j=h(A,M);j<0?G=!0:j>0&&(B=!0)}else A!=null?G=!0:B=!0;B?(p(M),M=js(b)):G?(m(A),A=js(y)):(A=js(y),M=js(b))}}(i,o,ai,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Us(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ai(s,a)).filter((s,a,u)=>!a||ai(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ai(s,e),u=ai(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Bh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Bh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ai(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(sA)}};function oA(n){return gt(n,"collectionParents")}function Bs(n){return gt(n,"indexEntries")}function ec(n){return gt(n,"indexConfiguration")}function Us(n){return gt(n,"indexState")}function sA(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}var aA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function MM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Z(a===1)}));let l=[];for(let h of t.mutations){let p=FA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function mf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var yf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ws(e),s=ui(e);return s.add({}).next(a=>{Z(typeof a=="number");let u=new yc(a,t,r,i),l=function(y,b,A){let M=A.baseMutations.map(G=>Ic(y.ct,G)),B=A.mutations.map(G=>Ic(y.ct,G));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Fe((m,y)=>le(m.canonicalString(),y.canonicalString()));for(let m of i){let y=FA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,jj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return ui(e).get(t).next(r=>r?(Z(r.userId===this.userId),uo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ui(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Z(a.batchId>=r),o=uo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ui(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).U("userMutationsIndex",t).next(r=>r.map(i=>uo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=qh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ws(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Xn(h);if(l===this.userId&&t.path.isEqual(m))return ui(e).get(p).next(y=>{if(!y)throw K();Z(y.userId===this.userId),o.push(uo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(le),i=[];return t.forEach(o=>{let s=qh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ws(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,A=Xn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=qh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fe(le);return Ws(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,b=Xn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ui(e).get(o).next(s=>{if(s===null)throw K();Z(s.userId===this.userId),r.push(uo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return MM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ws(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Xn(o[1]);i.push(u)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return xM(e,this.userId,t)}Nn(e){return RM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function xM(n,e,t){let r=qh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ws(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function ui(n){return gt(n,"mutations")}function Ws(n){return gt(n,"documentMutations")}function RM(n){return gt(n,"mutationQueues")}var sa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var I_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new sa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>te.fromTimestamp(new Ge(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$s(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return $s(e).J((s,a)=>{let u=ic(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return $s(e).J((r,i)=>{let o=ic(i);t(o)})}qn(e){return uA(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return uA(e).put("targetGlobalKey",t)}Kn(e,t){return $s(e).put(TM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=yo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $s(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=ic(a);Nc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ci(e);return t.forEach(s=>{let a=Bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=ci(e);return S.forEach(t,o=>{let s=Bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ci(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ci(e),o=de();return i.J({range:r,H:!0},(s,a,u)=>{let l=Xn(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Bt(t.path),i=IDBKeyRange.bound([r],[xA(r)],!1,!0),o=0;return ci(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return $s(e).get(t).next(r=>r?ic(r):null)}};function $s(n){return gt(n,"targets")}function uA(n){return gt(n,"targetGlobal")}function ci(n){return gt(n,"targetDocuments")}function cA([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var D_=class{constructor(e){this.Un=e,this.buffer=new Fe(cA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},C_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ci(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Di(t)}yield this.Hn(3e5)}))}},b_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(dn.oe);let r=new D_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(aA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Hs()<=Un.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function kB(n,e){return new b_(n,e)}var T_=class{constructor(e,t){this.db=e,this.garbageCollector=kB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Uh(e,r)}removeReference(e,t,r){return Uh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uh(e,t)}nr(e,t){return function(i,o){let s=!1;return RM(i).Y(a=>xM(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,te.min()),ci(e).delete(function(p){return[0,Bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uh(e,t)}tr(e,t){let r=ci(e),i,o=dn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==dn.oe&&t(new q(Xn(i)),o),o=l,i=u):o=dn.oe}).next(()=>{o!==dn.oe&&t(new q(Xn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Uh(n,e){return ci(n).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var vf=class{constructor(){this.changes=new sr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var S_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],hf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ct.newInvalidDocument(t);return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ct.newInvalidDocument(t)};return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,o)=>{r={document:this.ir(t,o),size:mf(o)}}).next(()=>r)}getEntries(e,t){let r=tn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=tn(),i=new $e(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,mf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Fe(hA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(tc(i.first()),tc(i.last())),s=i.getIterator(),a=s.getNext();return oo(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&hA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(tc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),hf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=tn();for(let p of l){let m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(kc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=tn(),s=dA(t,r),a=dA(t,Cn.max());return oo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new A_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lA(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return lA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=RB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return ct.newInvalidDocument(e)}};function NM(n){return new S_(n)}var A_=class extends vf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new sr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Fe((o,s)=>le(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=ZS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=mf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=ZS(this.cr.serializer,s.convertToNoDocument(te.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function lA(n){return gt(n,"remoteDocumentGlobal")}function oo(n){return gt(n,"remoteDocumentsV14")}function tc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dA(n,e){let t=e.documentKey.path.toArray();return[n,hf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=le(t[o],r[o]),i)return i;return i=le(t.length,r.length),i||(i=le(t[t.length-2],r[r.length-2]),i||le(t[t.length-1],r[r.length-1]))}var M_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _f=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,hn.empty(),Ge.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=er();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=rc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=er();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=tn(),s=sc(),a=function(){return sc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ac(h.mutation,l,h.mutation.getFieldMask(),Ge.now())):s.set(l.key,hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new M_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new $e((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||hn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=nM();h.forEach(m=>{if(!o.has(m)){let y=cM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(er()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:tM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=rc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new Vn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ct.newInvalidDocument(h)))});let a=rc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ac(h.mutation,l,hn.empty(),Ge.now()),kc(t,l)&&(a=a.insert(u,l))}),a})}};var x_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:tt(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:jw(i.bundledQuery),readTime:tt(i.readTime)}}(t)),S.resolve()}};var R_=class{constructor(){this.overlays=new $e(q.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=er();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=er(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $e((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=er(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=er(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vc(t,r));let o=this.Ir.get(t);o===void 0&&(o=de(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var N_=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Cc=class{constructor(){this.Tr=new Fe(at.Er),this.dr=new Fe(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Te([])),r=new at(t,e),i=new at(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Te([])),r=new at(t,e),i=new at(t,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new at(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||le(e.wr,t.wr)}static Ar(e,t){return le(e.wr,t.wr)||q.comparator(e.key,t.key)}};var P_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Fe(at.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(le);return t.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new at(new q(o),0),a=new Fe(le);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new at(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new at(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var k_=class{constructor(e){this.Mr=e,this.docs=function(){return new $e(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(t))}getEntries(e,t){let r=tn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ct.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=tn(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xw(NA(h),r)<=0||(i.has(h.key)||kc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new O_(this)}getSize(e){return S.resolve(this.size)}},O_=class extends vf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var F_=class{constructor(e){this.persistence=e,this.Nr=new sr(t=>yo(t),Nc),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cc,this.targetCount=0,this.kr=sa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new sa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var wf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dn(0),this.Kr=!1,this.Kr=!0,this.$r=new N_,this.referenceDelegate=e(this),this.Ur=new F_(this),this.indexManager=new w_,this.remoteDocumentCache=function(i){return new k_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new df(t),this.Gr=new x_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new P_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new V_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},V_=class extends Jh{constructor(e){super(),this.currentSequenceNumber=e}},Ef=class n{constructor(e){this.persistence=e,this.Jr=new Cc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var L_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Xh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0}),u.createObjectStore("documentMutations")}(e),fA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),fA(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:Zj});l.createIndex("collectionPathOverlayIndex",Jj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Xj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Bj});l.createIndex("documentKeyIndex",Uj),l.createIndex("collectionGroupIndex",$j)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Wj}).createIndex("sequenceNumberIndex",Kj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Qj}).createIndex("documentKeyIndex",Yj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=mf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Z(u.userId===o.userId);let l=uo(this.serializer,u);return MM(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Te(s),l=function(p){return[0,Bt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Gj});let r=t.store("collectionParents"),i=new Dc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Bt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Te(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Xn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=ic(i),s=TM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new q(Te.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=NM(this.serializer),o=new wf(Ef.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:de();uo(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new ut(l),p=ff.lt(this.serializer,h),m=o.getIndexManager(h),y=yf.lt(h,this.serializer,m,o.referenceDelegate);return new _f(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new hc(t,dn.oe),u).next()})})}};function fA(n){n.createObjectStore("targetDocuments",{keyPath:qj}).createIndex("documentTargetsIndex",zj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hj,{unique:!0}),n.createObjectStore("targetGlobal")}var Tv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",j_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T_(this,i),this.Ai=t+"main",this.serializer=new df(u),this.Ri=new pi(this.Ai,this.hi,new L_(this.serializer)),this.$r=new f_,this.Ur=new I_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NM(this.serializer),this.Gr=new h_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Tv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$h(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ci(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return $h(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=gt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Tv);return!1}}return!(!this.networkEnabled||!this.inForeground)||$h(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new hc(e,dn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$h(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return yf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ff.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?nB:u===16?tB:u===15?Nw:u===14?jA:u===13?LA:u===12?eB:u===11?VA:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new hc(a,this.Qr?this.Qr.next():dn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,PA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,Tv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nc(e).put("owner",t)}static D(){return pi.D()}bi(e){let t=nc(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Fp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function nc(n){return gt(n,"owner")}function $h(n){return gt(n,"clientMetadata")}function Uw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var B_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var U_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var If=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fp()?8:kA(qa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new U_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Hs()<=Un.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",qs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Hs()<=Un.DEBUG&&O("QueryEngine","Query:",qs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hs()<=Un.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",qs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):S.resolve())}Yi(e,t){if(BS(t))return S.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=af(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,af(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return BS(t)||i.isEqual(te.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Hs()<=Un.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qs(t)),this.rs(e,s,t,RA(i,-1)).next(a=>a))})}ts(e,t){let r=new Fe(XA(e));return t.forEach((i,o)=>{kc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Hs()<=Un.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",qs(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new $e(le),this._s=new sr(o=>yo(o),Nc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _f(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function PM(n,e,t,r){return new $_(n,e,t,r)}function kM(n,e){return N(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function OB(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let M=l.docVersions.get(b);Z(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function OM(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FB(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(nt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,B){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=tn(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(FM(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function FM(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=tn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function VB(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aa(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new oa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ua(n,e,t){return N(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ci(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Df(n,e,t){let r=H(n),i=te.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=H(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:de())).next(a=>(jM(r,JA(e),a),{documents:a,Ts:o})))}function VM(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function LM(n,e){let t=H(n),r=t.us.get(e)||te.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,RA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jM(t,e,i),i))}function jM(n,e,t){let r=n.us.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function LB(n,e,t,r){return N(this,null,function*(){let i=H(n),o=de(),s=tn();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield aa(i,function(h){return Ut(ma(Te.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>FM(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function jB(r,i){return N(this,arguments,function*(n,e,t=de()){let o=yield aa(n,Ut(jw(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=tt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(nt.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function pA(n,e){return`firestore_clients_${n}_${e}`}function gA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sv(n,e){return`firestore_targets_${n}_${e}`}var Cf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Xe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},uc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Xe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Fw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=OA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Xe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},H_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Xe("SharedClientState",`Failed to parse online state: ${e}`),null)}},bc=class{constructor(){this.activeTargetIds=Fw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},cc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new $e(le),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=pA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new bc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(pA(this.persistenceKey,r));if(i){let o=bf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Sv(this.persistenceKey,e));if(i){let o=uc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=dn.oe;if(o!=null)try{let a=JSON.parse(o);Z(typeof a=="number"),s=a}catch(a){Xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==dn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Cf(this.currentUser,e,t,r),o=gA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=gA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Sv(this.persistenceKey,e),o=new uc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return bf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Cf.Rs(new ut(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return uc.Rs(i,t)}Ls(e){return H_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Fw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Tf=class{constructor(){this.so=new bc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var q_=class{_o(e){}shutdown(){}};var Sf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hh=null;function Av(){return Hh===null?Hh=function(){return 268435456+Math.round(2147483648*Math.random())}():Hh++,"0x"+Hh.toString(16)}var BB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var z_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",G_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Av(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Fn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=BB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Av();return new Promise((s,a)=>{let u=new wv;u.setWithCredentials(!0),u.listenOnce(Ev.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ju.NO_ERROR:let h=u.getResponseJson();O(Mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ju.TIMEOUT:O(Mt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:let p=u.getStatus();if(O(Mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(M){let B=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(B)>=0?B:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Mt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Av(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cv(),a=Dv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,b=new z_({Io:M=>{y?O(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Mt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,B,G)=>{M.listen(B,j=>{try{G(j)}catch(J){setTimeout(()=>{throw J},0)}})};return A(p,Ls.EventType.OPEN,()=>{y||(O(Mt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,Ls.EventType.CLOSE,()=>{y||(y=!0,O(Mt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,Ls.EventType.ERROR,M=>{y||(y=!0,Fn(Mt,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Ls.EventType.MESSAGE,M=>{var B;if(!y){let G=M.data[0];Z(!!G);let j=G,J=j.error||((B=j[0])===null||B===void 0?void 0:B.error);if(J){O(Mt,`RPC '${e}' stream ${i} received error:`,J);let oe=J.status,ee=function(w){let I=st[w];if(I!==void 0)return hM(I)}(oe),E=J.message;ee===void 0&&(ee=R.INTERNAL,E="Unknown error status: "+oe+" with message "+J.message),y=!0,b.So(new k(ee,E)),p.close()}else O(Mt,`RPC '${e}' stream ${i} received:`,G),b.bo(G)}}),A(a,Iv.STAT_EVENT,M=>{M.stat===jh.PROXY?O(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===jh.NOPROXY&&O(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function BM(){return typeof window<"u"?window:null}function Kh(){return typeof document<"u"?document:null}function Oc(n){return new a_(n,!0)}var Tc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Af=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Xe(t.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},W_=class extends Af{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CB(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?tt(s.readTime):te.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=l_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=of(u)?{documents:wM(o,u)}:{query:EM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=pM(o,s.resumeToken);let l=u_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=ia(o,s.snapshotVersion.toTimestamp());let l=u_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=TB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=l_(this.serializer),t.removeTarget=e,this.a_(t)}},K_=class extends Af{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bB(e.writeResults,e.commitTime),r=tt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=l_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ic(this.serializer,r))};this.a_(t)}};var Q_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,c_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,c_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Y_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xe(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Z_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){bi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=H(u);l.L_.add(4),yield ya(l),l.q_.set("Unknown"),l.L_.delete(4),yield Fc(l)})}(this))}))}),this.q_=new Y_(r,i)}};function Fc(n){return N(this,null,function*(){if(bi(n))for(let e of n.B_)yield e(!0)})}function ya(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Qf(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),qw(t)?Hw(t):_a(t).r_()&&$w(t,e))}function ca(n,e){let t=H(n),r=_a(t);t.N_.delete(e),r.r_()&&UM(t,e),t.N_.size===0&&(r.r_()?r.o_():bi(t)&&t.q_.set("Unknown"))}function $w(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).A_(e)}function UM(n,e){n.Q_.xe(e),_a(n).R_(e)}function Hw(n){n.Q_=new s_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.q_.v_()}function qw(n){return bi(n)&&!_a(n).n_()&&n.N_.size>0}function bi(n){return H(n).L_.size===0}function $M(n){n.Q_=void 0}function UB(n){return N(this,null,function*(){n.q_.set("Online")})}function $B(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{$w(n,e)})})}function HB(n,e){return N(this,null,function*(){$M(n),qw(n)?(n.q_.M_(e),Hw(n)):n.q_.set("Unknown")})}function qB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof cf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mf(n,r)}else if(e instanceof Zs?n.Q_.Ke(e):e instanceof uf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(te.min()))try{let r=yield OM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),UM(o,u);let p=new oa(h.target,u,l,h.sequenceNumber);$w(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Mf(n,r)}})}function Mf(n,e,t){return N(this,null,function*(){if(!Ci(e))throw e;n.L_.add(1),yield ya(n),n.q_.set("Offline"),t||(t=()=>OM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Fc(n)}))})}function HM(n,e){return e().catch(t=>Mf(n,t,e))}function va(n){return N(this,null,function*(){let e=H(n),t=Ii(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zB(e);)try{let i=yield VB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GB(e,i)}catch(i){yield Mf(e,i)}qM(e)&&zM(e)})}function zB(n){return bi(n)&&n.O_.length<10}function GB(n,e){n.O_.push(e);let t=Ii(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qM(n){return bi(n)&&!Ii(n).n_()&&n.O_.length>0}function zM(n){Ii(n).start()}function WB(n){return N(this,null,function*(){Ii(n).p_()})}function KB(n){return N(this,null,function*(){let e=Ii(n);for(let t of n.O_)e.m_(t.mutations)})}function QB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=r_.from(r,e,t);yield HM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield va(n)})}function YB(n,e){return N(this,null,function*(){e&&Ii(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return dM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ii(r).s_(),yield HM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield va(r)}})}(n,e)),qM(n)&&zM(n)})}function mA(n,e){return N(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=bi(t);t.L_.add(3),yield ya(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Fc(t)})}function J_(n,e){return N(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield Fc(t)):e||(t.L_.add(2),yield ya(t),t.q_.set("Unknown"))})}function _a(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new W_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:UB.bind(null,n),Ro:$B.bind(null,n),mo:HB.bind(null,n),d_:qB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),qw(n)?Hw(n):n.q_.set("Unknown")):(yield n.K_.stop(),$M(n))}))),n.K_}function Ii(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new K_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WB.bind(null,n),mo:YB.bind(null,n),f_:KB.bind(null,n),g_:QB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield va(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var X_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function wa(n,e){if(Xe("AsyncQueue",`${e}: ${n}`),Ci(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var xf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=rc(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rf=class{constructor(){this.W_=new $e(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},la=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,xf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ew=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},tw=class{constructor(){this.queries=yA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=yA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function yA(){return new sr(n=>ZA(n),Pc)}function zw(n,e){return N(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ew,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=wa(s,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Ww(t)})}function Gw(n,e){return N(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZB(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Ww(t)}function JB(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Ww(n){n.Y_.forEach(e=>{e.next()})}var nw,vA;(vA=nw||(nw={})).ea="default",vA.Cache="cache";var Sc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new la(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nw.Cache}};var rw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Nf=class{constructor(e){this.serializer=e}Es(e){return nr(this.serializer,e)}ds(e){return e.metadata.exists?_M(this.serializer,e.document,!1):ct.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return tt(e)}},iw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Te.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Nf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||de()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield LB(this.localStore,new Nf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function GM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Pf=class{constructor(e){this.key=e}},kf=class{constructor(e){this.key=e}},Of=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=XA(e),this.Ra=new xf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Rf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=kc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new la(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Pf(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return la.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ow=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sw=class{constructor(e){this.key=e,this.va=!1}},aw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new sr(a=>ZA(a),Pc),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(q.comparator),this.Na=new Map,this.La=new Cc,this.Ba={},this.ka=new Map,this.qa=sa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XB(n,e,t=!0){return N(this,null,function*(){let r=Yf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield WM(r,e,t,!0),i})}function eU(n,e){return N(this,null,function*(){let t=Yf(n);yield WM(t,e,!0,!1)})}function WM(n,e,t,r){return N(this,null,function*(){let i=yield aa(n.localStore,Ut(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Kw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qf(n.remoteStore,i),a})}function Kw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,B,G){return N(this,null,function*(){let j=M.view.ma(B);j.ns&&(j=yield Df(A.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,j)));let J=G&&G.targetChanges.get(M.targetId),oe=G&&G.targetMismatches.get(M.targetId)!=null,ee=M.view.applyChanges(j,A.isPrimaryClient,J,oe);return uw(A,M.targetId,ee.wa),ee.snapshot})}(n,p,m,y);let o=yield Df(n.localStore,e,!0),s=new Of(e,o.Ts),a=s.ma(o.documents),u=wc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);uw(n,t,l.wa);let h=new ow(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function tU(n,e,t){return N(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Pc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ua(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ca(r.remoteStore,i.targetId),da(r,i.targetId)}).catch(Di))):(da(r,i.targetId),yield ua(r.localStore,i.targetId,!0))})}function nU(n,e){return N(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ca(t.remoteStore,r.targetId))})}function rU(n,e,t){return N(this,null,function*(){let r=Jw(n);try{let i=yield function(s,a){let u=H(s),l=Ge.now(),h=a.reduce((y,b)=>y.add(b.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=tn(),A=de();return u.cs.getEntries(y,h).next(M=>{b=M,b.forEach((B,G)=>{G.isValidDocument()||(A=A.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(M=>{p=M;let B=[];for(let G of a){let j=yB(G,p.get(G.key).overlayedDocument);j!=null&&B.push(new Ln(G.key,j,qA(j.value.mapValue),Je.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,B,a)}).next(M=>{m=M;let B=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:tM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new $e(le)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield kr(r,i.changes),yield va(r.remoteStore)}catch(i){let o=wa(i,"Failed to persist write");t.reject(o)}})}function KM(n,e){return N(this,null,function*(){let t=H(n);try{let r=yield FB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Z(s.va):i.removedDocuments.size>0&&(Z(s.va),s.va=!1))}),yield kr(t,r,e)}catch(r){yield Di(r)}})}function _A(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=H(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Ww(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iU(n,e,t){return N(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new $e(q.comparator);s=s.insert(o,ct.newNoDocument(o,te.min()));let a=de().add(o),u=new _c(te.min(),new Map,new $e(le),s,a);yield KM(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Zw(r)}else yield ua(r.localStore,e,!1).then(()=>da(r,e,t)).catch(Di)})}function oU(n,e){return N(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield OB(t.localStore,e);Yw(t,r,null),Qw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kr(t,i)}catch(i){yield Di(i)}})}function sU(n,e,t){return N(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let u=H(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Z(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Yw(r,e,t),Qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kr(r,i)}catch(i){yield Di(i)}})}function aU(n,e){return N(this,null,function*(){let t=H(n);bi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=wa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Qw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Yw(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function da(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||QM(n,r)})}function QM(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ca(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Zw(n))}function uw(n,e,t){for(let r of t)r instanceof Pf?(n.La.addReference(r.key,e),uU(n,r)):r instanceof kf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||QM(n,r.key)):K()}function uU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),Zw(n))}function Zw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Te.fromString(e)),r=n.qa.next();n.Na.set(r,new sw(t)),n.Oa=n.Oa.insert(t,r),Qf(n.remoteStore,new oa(Ut(ma(t.path)),r,"TargetPurposeLimboResolution",dn.oe))}}function kr(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=B_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=H(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ci(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function cU(n,e){return N(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield kM(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kr(t,r.hs)}})}function lU(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function dU(n,e){return N(this,null,function*(){let t=H(n),r=yield Df(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&uw(t,e.targetId,i.wa),i})}function hU(n,e){return N(this,null,function*(){let t=H(n);return LM(t.localStore,e).then(r=>kr(t,r))})}function fU(n,e,t,r){return N(this,null,function*(){let i=H(n),o=yield function(a,u){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield va(i.remoteStore):t==="acknowledged"||t==="rejected"?(Yw(i,e,r||null),Qw(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield kr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function pU(n,e){return N(this,null,function*(){let t=H(n);if(Yf(t),Jw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wA(t,r.toArray());t.Qa=!0,yield J_(t.remoteStore,!0);for(let o of i)Qf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(da(t,s),ua(t.localStore,s,!0))),ca(t.remoteStore,s)}),yield i,yield wA(t,r),function(s){let a=H(s);a.Na.forEach((u,l)=>{ca(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new $e(q.comparator)}(t),t.Qa=!1,yield J_(t.remoteStore,!1)}})}function wA(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield aa(r.localStore,Ut(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield dU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield VM(r.localStore,s);a=yield aa(r.localStore,l),yield Kw(r,YM(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function YM(n){return YA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gU(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function mU(n,e,t,r){return N(this,null,function*(){let i=H(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield LM(i.localStore,JA(o[0])),a=_c.createSynthesizedRemoteEventForCurrentChange(e,t==="current",nt.EMPTY_BYTE_STRING);yield kr(i,s,a);break}case"rejected":yield ua(i.localStore,e,!0),da(i,e,r);break;default:K()}})}function yU(n,e,t){return N(this,null,function*(){let r=Yf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield VM(r.localStore,i),s=yield aa(r.localStore,o);yield Kw(r,YM(o),s.targetId,!1,s.resumeToken),Qf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ua(r.localStore,i,!1).then(()=>{ca(r.remoteStore,i),da(r,i)}).catch(Di))}})}function Yf(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iU.bind(null,e),e.Ca.d_=ZB.bind(null,e.eventManager),e.Ca.$a=JB.bind(null,e.eventManager),e}function Jw(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sU.bind(null,e),e}function vU(n,e,t){let r=H(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=H(y),M=tt(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",B=>A.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(GM(u));let l=new iw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield kr(o,p.Ia,void 0),yield function(y,b){let A=H(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Fn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var cw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Oc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return PM(this.persistence,new If,t.initialUser,this.serializer)}Ga(t){return new wf(Ef.Zr,this.serializer)}Wa(t){return new Tf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Ff=class n extends cw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield kp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Jw(this.Ja.syncEngine),yield va(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return PM(this.persistence,new If,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new C_(r,e.asyncQueue,t)}Ha(e,t){let r=new Uv(t,this.persistence);return new Bv(e.asyncQueue,r)}Ga(e){let t=Uw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new j_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BM(),Kh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Tf}},lw=class n extends Ff{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield kp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof cc&&(this.sharedClientState.syncEngine={no:fU.bind(null,t),ro:mU.bind(null,t),io:yU.bind(null,t),Qi:gU.bind(null,t),eo:hU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield pU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=BM();if(!cc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Uw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Xw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_A(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cU.bind(null,this.syncEngine),yield J_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new tw}()}createDatastore(t){let r=Oc(t.databaseInfo.databaseId),i=function(s){return new G_(s)}(t.databaseInfo);return function(s,a,u,l){return new Q_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Z_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>_A(this.syncEngine,r,0),function(){return Sf.D()?new Sf:new q_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new aw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=H(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ya(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function EA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ha=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xe("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var dw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new pt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new rw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var hw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=H(i),a={documents:o.map(p=>Ec(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Te.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=DB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Z(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new mc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=H(r),s={writes:i.map(a=>Ic(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Te.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=te.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?Je.exists(!1):Je.updateTime(t):Je.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Je.updateTime(t)}return Je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var fw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Tc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new hw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!dM(t)}return!1}};var pw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=wa(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Mv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield kM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function IA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield eE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mA(e.remoteStore,i)),n._onlineComponents=e})}function eE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fn("Error using user provided cache. Falling back to memory cache: "+t),yield Mv(n,new cw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Mv(n,new cw);return n._offlineComponents})}function Zf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield IA(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield IA(n,new Xw))),n._onlineComponents})}function ZM(n){return eE(n).then(e=>e.persistence)}function tE(n){return eE(n).then(e=>e.localStore)}function JM(n){return Zf(n).then(e=>e.remoteStore)}function nE(n){return Zf(n).then(e=>e.syncEngine)}function _U(n){return Zf(n).then(e=>e.datastore)}function fa(n){return N(this,null,function*(){let e=yield Zf(n),t=e.eventManager;return t.onListen=XB.bind(null,e.syncEngine),t.onUnlisten=tU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nU.bind(null,e.syncEngine),t})}function wU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ZM(n),t=yield JM(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),Fc(o)}(t)}))}function EU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ZM(n),t=yield JM(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=H(i);o.L_.add(0),yield ya(o),o.q_.set("Offline")})}(t)}))}function IU(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=wa(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function XM(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ha({next:m=>{h.Za(),s.enqueueAndForget(()=>Gw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Sc(ma(a.path),h,{includeMetadataChanges:!0,_a:!0});return zw(o,p)}(yield fa(n),n.asyncQueue,e,t,r)})),r.promise}function DU(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Df(i,o,!0),u=new Of(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=wa(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function ex(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ha({next:m=>{h.Za(),s.enqueueAndForget(()=>Gw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Sc(a,h,{includeMetadataChanges:!0,_a:!0});return zw(o,p)}(yield fa(n),n.asyncQueue,e,t,r)})),r.promise}function CU(n,e){let t=new ha(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield fa(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield fa(n),t)}))}}function bU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?fM().encode(s):s,function(h,p){return new dw(h,p)}(function(h,p){if(h instanceof Uint8Array)return EA(h,p);if(h instanceof ArrayBuffer)return EA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Oc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){vU(yield nE(n),i,r)}))}function TU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield tE(n),e)}))}function tx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var DA=new Map;function rE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CA(n){if(!q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bA(n){if(q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Me(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jf(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nx(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Vf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xv;switch(r.type){case"firstParty":return new kv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=DA.get(t);r&&(O("ComponentProvider","Removing Datastore"),DA.delete(t),r.terminate())}(this),Promise.resolve()}};function rx(n,e,t,r={}){var i;let o=(n=Me(n,Eo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ut.MOCK_USER;else{a=RI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ut(l)}n._authCredentials=new Rv(new Qh(a,u))}}var It=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},rr=class n extends It{constructor(e,t,r){super(e,t,ma(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function oE(n,e,...t){if(n=ze(n),rE("collection","path",e),n instanceof Eo){let r=Te.fromString(e,...t);return bA(r),new rr(n,null,r)}{if(!(n instanceof Le||n instanceof rr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return bA(r),new rr(n.firestore,null,r)}}function ix(n,e){if(n=Me(n,Eo),rE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new It(n,null,function(r){return new Vn(Te.emptyPath(),r)}(e))}function Vc(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Yh.newId()),rE("doc","path",e),n instanceof Eo){let r=Te.fromString(e,...t);return CA(r),new Le(n,null,new q(r))}{if(!(n instanceof Le||n instanceof rr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return CA(r),new Le(n.firestore,n instanceof rr?n.converter:null,new q(r))}}function sE(n,e){return n=ze(n),e=ze(e),(n instanceof Le||n instanceof rr)&&(e instanceof Le||e instanceof rr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aE(n,e){return n=ze(n),e=ze(e),n instanceof It&&e instanceof It&&n.firestore===e.firestore&&Pc(n._query,e._query)&&n.converter===e.converter}var Lf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tc(this,"async_queue_retry"),this.Vu=()=>{let r=Kh();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Kh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Kh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ci(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=X_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function gw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var mw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var ox=-1,We=class extends Eo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Lf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lf(e),this._firestoreClient=void 0,yield e}})}};function Dt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sx(n),n._firestoreClient}function sx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new $v(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new pw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function ax(n,e){Fn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return cx(n,Xw.provider,{build:r=>new Ff(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function ux(n){return N(this,null,function*(){Fn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();cx(n,Xw.provider,{build:t=>new lw(t,e.cacheSizeBytes)})})}function cx(n,e,t){if((n=Me(n,We))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},sx(n)}function lx(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new pt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!pi.D())return Promise.resolve();let i=r+"main";yield pi.delete(i)})}(Uw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function dx(n){return function(t){let r=new pt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return aU(yield nE(t),r)})),r.promise}(Dt(n=Me(n,We)))}function hx(n){return wU(Dt(n=Me(n,We)))}function fx(n){return EU(Dt(n=Me(n,We)))}function px(n,e){let t=Dt(n=Me(n,We)),r=new mw;return bU(t,n._databaseId,e,r),r}function gx(n,e){return TU(Dt(n=Me(n,We)),e).then(t=>t?new It(n,null,t.query):null)}var ar=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var jn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nr=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var Ac=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var SU=/^__.*__$/,yw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new wi(e,this.data,t,this.fieldTransforms)}},jf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function mx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Bf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mx(this.Cu)&&SU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},vw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Oc(e)}Qu(e,t,r,i=!1){return new Bf({Cu:e,methodName:t,qu:r,path:et.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function To(n){let e=n._freezeSettings(),t=Oc(n._databaseId);return new vw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);lE("Data must be an object, but it was:",s,r);let a=_x(r,s),u,l;if(o.merge)u=new hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Dw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ex(h,m)||h.push(m)}u=new hn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new yw(new xt(a),u,l)}var Mc=class n extends Nr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function yx(n,e,t){return new Bf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var _w=class n extends Nr{_toFieldTransform(e){return new vo(e.path,new vi)}isEqual(e){return e instanceof n}},ww=class n extends Nr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=yx(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new xr(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&Vp(this.Ku,e.Ku)}},Ew=class n extends Nr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=yx(this,e,!0),r=this.Ku.map(o=>So(o,t)),i=new Rr(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&Vp(this.Ku,e.Ku)}},Iw=class n extends Nr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new _i(e.serializer,iM(e.serializer,this.$u));return new vo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function uE(n,e,t,r){let i=n.Qu(1,e,t);lE("Data must be an object, but it was:",i,r);let o=[],s=xt.empty();bo(r,(u,l)=>{let h=dE(e,u,t);l=ze(l);let p=i.Nu(h);if(l instanceof Mc)o.push(h);else{let m=So(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new hn(o);return new jf(s,a,i.fieldTransforms)}function cE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Dw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Dw(e,o[m])),u.push(o[m+1]);let l=[],h=xt.empty();for(let m=a.length-1;m>=0;--m)if(!Ex(l,a[m])){let y=a[m],b=u[m];b=ze(b);let A=s.Nu(y);if(b instanceof Mc)l.push(y);else{let M=So(b,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new hn(l);return new jf(h,p,s.fieldTransforms)}function vx(n,e,t,r=!1){return So(t,n.Qu(r?4:3,e))}function So(n,e){if(wx(n=ze(n)))return lE("Unsupported field value:",e,n),_x(n,e);if(n instanceof Nr)return function(r,i){if(!mx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=So(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ge.fromDate(r);return{timestampValue:ia(i.serializer,o)}}if(r instanceof Ge){let o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ia(i.serializer,o)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:pM(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Lw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ac)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Vw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Jf(r)}`)}(n,e)}function _x(n,e){let t={};return BA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,(r,i)=>{let o=So(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function wx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof Io||n instanceof ar||n instanceof Le||n instanceof Nr||n instanceof Ac)}function lE(n,e,t){if(!wx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Jf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Dw(n,e,t){if((e=ze(e))instanceof jn)return e._internalPath;if(typeof e=="string")return dE(n,e);throw Uf("Field path arguments must be of type string or ",n,!1,void 0,t)}var AU=new RegExp("[~\\*/\\[\\]]");function dE(n,e,t){if(e.search(AU)>=0)throw Uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jn(...e.split("."))._internalPath}catch{throw Uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function Ex(n,e){return n.some(t=>t.isEqual(e))}var Do=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Cw=class extends Do{data(){return super.data()}};function ep(n,e){return typeof e=="string"?dE(n,e):e instanceof jn?e._internalPath:e._delegate._internalPath}function Ix(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xc=class{},Co=class extends xc{};function Or(n,e,...t){let r=[];e instanceof xc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof bw).length,a=o.filter(u=>u instanceof $f).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var $f=class n extends Co{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Nx(e._query,t),new It(e.firestore,e.converter,t_(e._query,t))}_parse(e){let t=To(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){SA(p,h);let y=[];for(let b of p)y.push(TA(u,o,b));m={arrayValue:{values:y}}}else m=TA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||SA(p,h),m=vx(a,s,p,h==="in"||h==="not-in");return De.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Dx(n,e,t){let r=e,i=ep("where",n);return $f._create(i,r,t)}var bw=class n extends xc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Pe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Nx(s,u),s=t_(s,u)}(e._query,t),new It(e.firestore,e.converter,t_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Tw=class n extends Co{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(o,s)}(e._query,this._field,this._direction);return new It(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Vn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Cx(n,e="asc"){let t=e,r=ep("orderBy",n);return Tw._create(r,t)}var Hf=class n extends Co{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new It(e.firestore,e.converter,af(e._query,this._limit,this._limitType))}};function bx(n){return nx("limit",n),Hf._create("limit",n,"F")}function Tx(n){return nx("limitToLast",n),Hf._create("limitToLast",n,"L")}var qf=class n extends Co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Rx(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(i,o){return new Vn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Sx(...n){return qf._create("startAt",n,!0)}function Ax(...n){return qf._create("startAfter",n,!1)}var zf=class n extends Co{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Rx(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(i,o){return new Vn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Mx(...n){return zf._create("endBefore",n,!1)}function xx(...n){return zf._create("endAt",n,!0)}function Rx(n,e,t,r){if(t[0]=ze(t[0]),t[0]instanceof Do)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Ys(o))if(p.field.isKeyField())h.push(go(s,u.key));else{let m=u.data.field(p.field);if(Wf(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new or(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=To(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Ow(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(Te.fromString(A));if(!q.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let B=new q(M);y.push(go(a,B))}else{let M=vx(u,l,A);y.push(M)}}return new or(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TA(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Te.fromString(t));if(!q.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return go(n,new q(r))}if(t instanceof Le)return go(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function SA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var pa=class{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return bo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new Ac(o)}convertGeoPoint(e){return new Io(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Pw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){let t=Mr(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Te.fromString(e);Z(bM(r));let i=new mi(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Xe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function tp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Sw=class extends pa{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};var Ar=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bn=class extends Do{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},hi=class extends bn{data(e={}){return super.data(e)}},Bn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ar(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hi(this._firestore,this._userDataWriter,r.key,r,new Ar(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ar(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ar(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:MU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function MU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function hE(n,e){return n instanceof bn&&e instanceof bn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bn&&e instanceof Bn&&n._firestore===e._firestore&&aE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Px(n){n=Me(n,Le);let e=Me(n.firestore,We);return XM(Dt(e),n._key).then(t=>mE(e,n,t))}var Pr=class extends pa{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function kx(n){n=Me(n,Le);let e=Me(n.firestore,We),t=Dt(e),r=new Pr(e);return IU(t,n._key).then(i=>new bn(e,r,n._key,i,new Ar(i!==null&&i.hasLocalMutations,!0),n.converter))}function Ox(n){n=Me(n,Le);let e=Me(n.firestore,We);return XM(Dt(e),n._key,{source:"server"}).then(t=>mE(e,n,t))}function Fx(n){n=Me(n,It);let e=Me(n.firestore,We),t=Dt(e),r=new Pr(e);return Ix(n._query),ex(t,n._query).then(i=>new Bn(e,r,n,i))}function Vx(n){n=Me(n,It);let e=Me(n.firestore,We),t=Dt(e),r=new Pr(e);return DU(t,n._query).then(i=>new Bn(e,r,n,i))}function Lx(n){n=Me(n,It);let e=Me(n.firestore,We),t=Dt(e),r=new Pr(e);return ex(t,n._query,{source:"server"}).then(i=>new Bn(e,r,n,i))}function fE(n,e,t){n=Me(n,Le);let r=Me(n.firestore,We),i=tp(n.converter,e,t);return Ea(r,[Xf(To(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Je.none())])}function pE(n,e,t,...r){n=Me(n,Le);let i=Me(n.firestore,We),o=To(i),s;return s=typeof(e=ze(e))=="string"||e instanceof jn?cE(o,"updateDoc",n._key,e,t,r):uE(o,"updateDoc",n._key,e),Ea(i,[s.toMutation(n._key,Je.exists(!0))])}function jx(n){return Ea(Me(n.firestore,We),[new Ei(n._key,Je.none())])}function Bx(n,e){let t=Me(n.firestore,We),r=Vc(n),i=tp(n.converter,e);return Ea(t,[Xf(To(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Je.exists(!1))]).then(()=>r)}function gE(n,...e){var t,r,i;n=ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Le)l=Me(n.firestore,We),h=ma(n._key.path),u={next:p=>{e[s]&&e[s](mE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Me(n,It);l=Me(p.firestore,We),h=p._query;let m=new Pr(l);u={next:y=>{e[s]&&e[s](new Bn(l,m,p,y))},error:e[s+1],complete:e[s+2]},Ix(n._query)}return function(m,y,b,A){let M=new ha(A),B=new Sc(y,M,b);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return zw(yield fa(m),B)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Gw(yield fa(m),B)}))}}(Dt(l),h,a,u)}function Ux(n,e){return CU(Dt(n=Me(n,We)),gw(e)?e:{next:e})}function Ea(n,e){return function(r,i){let o=new pt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return rU(yield nE(r),i,o)})),o.promise}(Dt(n),e)}function mE(n,e,t){let r=t.docs.get(e._key),i=new Pr(n);return new bn(n,i,e._key,r,new Ar(t.hasPendingWrites,t.fromCache),e.converter)}var xU={maxAttempts:5};var Gf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=To(e)}set(e,t,r){this._verifyNotCommitted();let i=li(e,this._firestore),o=tp(i.converter,t,r),s=Xf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Je.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=li(e,this._firestore),s;return s=typeof(t=ze(t))=="string"||t instanceof jn?cE(this._dataReader,"WriteBatch.update",o._key,t,r,i):uE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Je.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=li(e,this._firestore);return this._mutations=this._mutations.concat(new Ei(t._key,Je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function li(n,e){if((n=ze(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Aw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=To(t)}get(t){let r=li(t,this._firestore),i=new Sw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new Do(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Do(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=li(t,this._firestore),s=tp(o.converter,r,i),a=Xf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=li(t,this._firestore),a;return a=typeof(r=ze(r))=="string"||r instanceof jn?cE(this._dataReader,"Transaction.update",s._key,r,i,o):uE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=li(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=li(e,this._firestore),r=new Pr(this._firestore);return super.get(e).then(i=>new bn(this._firestore,r,t._key,i._document,new Ar(!1,!1),t.converter))}};function $x(n,e,t){n=Me(n,We);let r=Object.assign(Object.assign({},xU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new pt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield _U(o);new fw(o.asyncQueue,l,a,s,u).au()})),u.promise}(Dt(n),i=>e(new Aw(n,i)),r)}function Hx(){return new Mc("deleteField")}function qx(){return new _w("serverTimestamp")}function zx(...n){return new ww("arrayUnion",n)}function Gx(...n){return new Ew("arrayRemove",n)}function Wx(n){return new Iw("increment",n)}(function(e,t=!0){(function(i){ga=i})(kI),za(new xi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new We(new Nv(r.getProvider("auth-internal")),new Fv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Br(bS,"4.7.3",e),Br(bS,"4.7.3","esm2017")})();var RU="@firebase/firestore-compat",NU="0.3.38";function IE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Kx(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function Qx(){if(!UA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var np=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Qx(),new n(ar.fromBase64String(e))}static fromUint8Array(e){return Kx(),new n(ar.fromUint8Array(e))}toBase64(){return Qx(),this._delegate.toBase64()}toUint8Array(){return Kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function yE(n){return PU(n,["next","error","complete"])}function PU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var vE=class{enableIndexedDbPersistence(e,t){return ax(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return ux(e._delegate)}clearIndexedDbPersistence(e){return lx(e._delegate)}},rp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){rx(this._delegate,e,t,r)}enableNetwork(){return hx(this._delegate)}disableNetwork(){return fx(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return dx(this._delegate)}onSnapshotsInSync(e){return Ux(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ca(this,oE(this._delegate,e))}catch(t){throw $t(t,"collection()","Firestore.collection()")}}doc(e){try{return new ur(this,Vc(this._delegate,e))}catch(t){throw $t(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ro(this,ix(this._delegate,e))}catch(t){throw $t(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return $x(this._delegate,t=>e(new ip(this,t)))}batch(){return Dt(this._delegate),new op(new Gf(this._delegate,e=>Ea(this._delegate,e)))}loadBundle(e){return px(this._delegate,e)}namedQuery(e){return gx(this._delegate,e).then(t=>t?new Ro(this,t):null)}},Ia=class extends pa{constructor(e){super(),this.firestore=e}convertBytes(e){return new np(new ar(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ur.forKey(t,this.firestore,null)}};function kU(n){AA(n)}var ip=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ia(e)}get(e){let t=Ao(e);return this._delegate.get(t).then(r=>new Mo(this._firestore,new bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Ao(e);return r?(IE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ao(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ao(e);return this._delegate.delete(t),this}},op=class{constructor(e){this._delegate=e}set(e,t,r){let i=Ao(e);return r?(IE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Ao(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Ao(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Da=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new hi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ia(e),t),i.set(t,o)),o}};Da.INSTANCES=new WeakMap;var ur=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ia(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Le(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Le(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ca(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ca(this.firestore,oE(this._delegate,e))}catch(t){throw $t(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof Le?sE(this._delegate,e):!1}set(e,t){t=IE("DocumentReference.set",t);try{return t?fE(this._delegate,e,t):fE(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?pE(this._delegate,e):pE(this._delegate,e,t,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return jx(this._delegate)}onSnapshot(...e){let t=Yx(e),r=Zx(e,i=>new Mo(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=kx(this._delegate):e?.source==="server"?t=Ox(this._delegate):t=Px(this._delegate),t.then(r=>new Mo(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $t(n,e,t){return n.message=n.message.replace(e,t),n}function Yx(n){for(let e of n)if(typeof e=="object"&&!yE(e))return e;return{}}function Zx(n,e){var t,r;let i;return yE(n[0])?i=n[0]:yE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Mo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ur(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hE(this._delegate,e._delegate)}},xo=class extends Mo{data(e){let t=this._delegate.data(e);return this._delegate._converter||MA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ro=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ia(e)}where(e,t,r){try{return new n(this.firestore,Or(this._delegate,Dx(e,t,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Or(this._delegate,Cx(e,t)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Or(this._delegate,bx(e)))}catch(t){throw $t(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Or(this._delegate,Tx(e)))}catch(t){throw $t(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Or(this._delegate,Sx(...e)))}catch(t){throw $t(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Or(this._delegate,Ax(...e)))}catch(t){throw $t(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Or(this._delegate,Mx(...e)))}catch(t){throw $t(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Or(this._delegate,xx(...e)))}catch(t){throw $t(t,"endAt()","Query.endAt()")}}isEqual(e){return aE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Vx(this._delegate):e?.source==="server"?t=Lx(this._delegate):t=Fx(this._delegate),t.then(r=>new Lc(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Yx(e),r=Zx(e,i=>new Lc(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},_E=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Lc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _E(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xo(this._firestore,r))})}isEqual(e){return hE(this._delegate,e._delegate)}},Ca=class n extends Ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ur(this.firestore,e):null}doc(e){try{return e===void 0?new ur(this.firestore,Vc(this._delegate)):new ur(this.firestore,Vc(this._delegate,e))}catch(t){throw $t(t,"doc()","CollectionReference.doc()")}}add(e){return Bx(this._delegate,e).then(t=>new ur(this.firestore,t))}isEqual(e){return sE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ao(n){return Me(n,Le)}var wE=class n{constructor(...e){this._delegate=new jn(...e)}static documentId(){return new n(et.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var EE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=qx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Hx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=zx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Gx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Wx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var OU={Firestore:rp,GeoPoint:Io,Timestamp:Ge,Blob:np,Transaction:ip,WriteBatch:op,DocumentReference:ur,DocumentSnapshot:Mo,Query:Ro,QueryDocumentSnapshot:xo,QuerySnapshot:Lc,CollectionReference:Ca,FieldPath:wE,FieldValue:EE,setLogLevel:kU,CACHE_SIZE_UNLIMITED:ox};function FU(n,e){n.INTERNAL.registerComponent(new xi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OU)))}function VU(n){FU(n,(e,t)=>new rp(e,t,new vE)),n.registerVersion(RU,NU)}VU(qt);function LU(n,e=Za){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Jx(n,e){return LU(n,e)}function jU(n,e){return Jx(n,e).pipe(Fi(void 0),eu(),Q(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function bE(n,e){return Jx(n,e).pipe(Q(t=>({payload:t,type:"query"})))}var sp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=rR(r,t);return new up(i,o,this.afs)}snapshotChanges(){return jU(this.ref,this.afs.schedulers.outsideAngular).pipe(en)}valueChanges(e={}){return this.snapshotChanges().pipe(Q(({payload:t})=>e.idField?me(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ae(this.ref.get(e)).pipe(en)}};function ap(n,e){return bE(n,e).pipe(Fi(void 0),eu(),Q(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function Xx(n,e,t){return ap(n,t).pipe(Oi((r,i)=>BU(r,i.map(o=>o.payload),e),[]),sg(),Q(r=>r.map(i=>({type:i.type,payload:i}))))}function BU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=UU(n,r))}),n}function DE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function UU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return DE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return DE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DE(n,e.oldIndex,1);break}return n}function eR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var up=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Q(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fi(void 0),eu(),Et(([r,i])=>i.length>0||!r),Q(([,r])=>r),en)}auditTrail(e){return this.stateChanges(e).pipe(Oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=eR(e);return Xx(this.query,t,this.afs.schedulers.outsideAngular).pipe(en)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.payload.docs.map(r=>e.idField?me(P({},r.data()),{[e.idField]:r.id}):r.data())),en)}get(e){return Ae(this.query.get(e)).pipe(en)}add(e){return this.ref.add(e)}doc(e){return new sp(this.ref.doc(e),this.afs)}},CE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?ap(this.query,this.afs.schedulers.outsideAngular).pipe(en):ap(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.filter(r=>e.indexOf(r.type)>-1)),Et(t=>t.length>0),en)}auditTrail(e){return this.stateChanges(e).pipe(Oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=eR(e);return Xx(this.query,t,this.afs.schedulers.outsideAngular).pipe(en)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),en)}get(e){return Ae(this.query.get(e)).pipe(en)}},tR=new W("angularfire2.enableFirestorePersistence"),nR=new W("angularfire2.firestore.persistenceSettings"),$U=new W("angularfire2.firestore.settings"),HU=new W("angularfire2.firestore.use-emulator");function rR(n,e=t=>t){return{query:e(n),ref:n}}var Ht=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,b,A,M,B,G){this.schedulers=u;let j=Zu(t,a,r),J=h;p&&vv(j,a,m,b,A,M,y,B),[this.firestore,this.persistenceEnabled$]=Vh(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),J&&oe.useEmulator(...J),i&&!Zi(s)){let ee=()=>{try{return Ae(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ne(!1)}};return[oe,a.runOutsideAngular(ee)]}else return[oe,ne(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=rR(i,r),a=this.schedulers.ngZone.run(()=>o);return new up(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new CE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new sp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(Fs),F(Vs,8),F(tR,8),F($U,8),F(Qt),F(Ce),F(kh),F(nR,8),F(HU,8),F(IS,8),F(hv,8),F(fv,8),F(pv,8),F(gv,8),F(mv,8),F(yv,8),F(io,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),iR=(()=>{class n{constructor(){qt.registerVersion("angularfire",Os.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tR,useValue:!0},{provide:nR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=ht({providers:[Ht]})}return n})();var oR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sR=(()=>{class n{constructor(t){this.headerService=t,this.myHeader=new Nh,this.headerService.getHeader().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{r.length>0&&(this.myHeader=r[0])})}actualizarHeader(){this.myHeader.id&&this.headerService.updateHeader(this.myHeader.id,this.myHeader).then(()=>{console.log("Header actualizado correctamente")})}static{this.\u0275fac=function(r){return new(r||n)(ce(oR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-header"]],decls:18,vars:7,consts:[[1,"container","color-light"],[1,"col"],["type","text","placeholder","Nombre","name","name",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Meta de vida","name","goalLife",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Foto URL","name","photoURL",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Email","name","email",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Tel\xE9fono","name","phoneNumber",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Ubicaci\xF3n","name","location",1,"txt",3,"ngModelChange","ngModel"],["type","text","placeholder","Red Social","name","socialNetwork",1,"txt",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"form")(3,"input",2),ie("ngModelChange",function(s){return se(i.myHeader.name,s)||(i.myHeader.name=s),s}),L(),ve(4,"br"),V(5,"input",3),ie("ngModelChange",function(s){return se(i.myHeader.goalLife,s)||(i.myHeader.goalLife=s),s}),L(),ve(6,"br"),V(7,"input",4),ie("ngModelChange",function(s){return se(i.myHeader.photoURL,s)||(i.myHeader.photoURL=s),s}),L(),ve(8,"br"),V(9,"input",5),ie("ngModelChange",function(s){return se(i.myHeader.email,s)||(i.myHeader.email=s),s}),L(),ve(10,"br"),V(11,"input",6),ie("ngModelChange",function(s){return se(i.myHeader.phoneNumber,s)||(i.myHeader.phoneNumber=s),s}),L(),ve(12,"br"),V(13,"input",7),ie("ngModelChange",function(s){return se(i.myHeader.location,s)||(i.myHeader.location=s),s}),L(),ve(14,"br"),V(15,"input",8),ie("ngModelChange",function(s){return se(i.myHeader.socialNetwork,s)||(i.myHeader.socialNetwork=s),s}),L(),ve(16,"br"),V(17,"input",9),Re("click",function(){return i.actualizarHeader()}),L()()()()),r&2&&(Y(3),re("ngModel",i.myHeader.name),Y(2),re("ngModel",i.myHeader.goalLife),Y(2),re("ngModel",i.myHeader.photoURL),Y(2),re("ngModel",i.myHeader.email),Y(2),re("ngModel",i.myHeader.phoneNumber),Y(2),re("ngModel",i.myHeader.location),Y(2),re("ngModel",i.myHeader.socialNetwork))},dependencies:[Xt,At,Zt,Jt,jt,Lt]})}}return n})();var jc=class{constructor(){this.startDate="",this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var aR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}updateWorkExperience(t,r){return this.workExperienceRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GU(n,e){if(n&1){let t=wn();V(0,"div",11)(1,"input",12),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.startDate,i)||(o.startDate=i),Ie(i)}),L(),V(2,"input",13),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.endDate,i)||(o.endDate=i),Ie(i)}),L(),V(3,"input",14),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.location,i)||(o.location=i),Ie(i)}),L(),V(4,"input",15),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.position,i)||(o.position=i),Ie(i)}),L(),V(5,"input",16),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.company,i)||(o.company=i),Ie(i)}),L(),V(6,"input",17),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.accomplishments,i)||(o.accomplishments=i),Ie(i)}),L(),V(7,"input",18),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateJob(i))}),L(),V(8,"input",19),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteJob(i.id))}),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.startDate),Y(),re("ngModel",t.endDate),Y(),re("ngModel",t.location),Y(),re("ngModel",t.position),Y(),re("ngModel",t.company),Y(),re("ngModel",t.accomplishments)}}var uR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new jc,this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r})}AgregarJob(){this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{this.myWorkExperience=new jc})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t)}updateJob(t){t.id&&this.workExperienceService.updateWorkExperience(t.id,P({},t))}static{this.\u0275fac=function(r){return new(r||n)(ce(aR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-workexperience"]],decls:22,vars:8,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","startDate","placeholder","Start Date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","End Date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Location",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","Position",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","Company",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","accomplishments","placeholder","Accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text","placeholder","Start Date",3,"ngModelChange","ngModel"],["type","text","placeholder","End Date",3,"ngModelChange","ngModel"],["type","text","placeholder","Location",3,"ngModelChange","ngModel"],["type","text","placeholder","Position",3,"ngModelChange","ngModel"],["type","text","placeholder","Company",3,"ngModelChange","ngModel"],["type","text","placeholder","Accomplishments",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Work Experience Items"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),L(),ve(8,"br"),V(9,"input",4),ie("ngModelChange",function(s){return se(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),L(),ve(10,"br"),V(11,"input",5),ie("ngModelChange",function(s){return se(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),L(),ve(12,"br"),V(13,"input",6),ie("ngModelChange",function(s){return se(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),L(),ve(14,"br"),V(15,"input",7),ie("ngModelChange",function(s){return se(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),L(),ve(16,"br"),V(17,"input",8),ie("ngModelChange",function(s){return se(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),L(),ve(18,"br"),V(19,"input",9),Re("click",function(){return i.AgregarJob()}),L()()()(),V(20,"div",1),sn(21,GU,9,6,"div",10),L()),r&2&&(Y(7),re("ngModel",i.myWorkExperience.startDate),Y(2),re("ngModel",i.myWorkExperience.endDate),Y(2),re("ngModel",i.myWorkExperience.location),Y(2),re("ngModel",i.myWorkExperience.position),Y(2),re("ngModel",i.myWorkExperience.company),Y(2),re("ngModel",i.myWorkExperience.accomplishments),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.workExperience))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var Bc=class{constructor(){this.name="",this.plantel="",this.startDate="",this.endDate=""}};var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}updateEducation(t,r){return this.educationRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KU(n,e){if(n&1){let t=wn();V(0,"div",9)(1,"input",10),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.name,i)||(o.name=i),Ie(i)}),L(),V(2,"input",11),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.plantel,i)||(o.plantel=i),Ie(i)}),L(),V(3,"input",12),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.startDate,i)||(o.startDate=i),Ie(i)}),L(),V(4,"input",13),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.endDate,i)||(o.endDate=i),Ie(i)}),L(),V(5,"input",14),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateEducation(i))}),L(),V(6,"input",15),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteEducation(i.id))}),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.name),Y(),re("ngModel",t.plantel),Y(),re("ngModel",t.startDate),Y(),re("ngModel",t.endDate)}}var lR=(()=>{class n{constructor(t){this.educationService=t,this.btntxt="Agregar",this.educations=[],this.myEducation=new Bc,this.educationService.getEducation().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r})}agregarEducation(){this.educationService.createEducation(this.myEducation).then(()=>{this.myEducation=new Bc})}deleteEducation(t){this.educationService.deleteEducation(t)}updateEducation(t){t.id&&this.educationService.updateEducation(t.id,P({},t))}static{this.\u0275fac=function(r){return new(r||n)(ce(cR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-education"]],decls:18,vars:6,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","name","placeholder","Nombre del estudio",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","plantel","placeholder","Instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","startDate","placeholder","Fecha de inicio",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Fecha de finalizaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text","placeholder","Nombre del estudio",3,"ngModelChange","ngModel"],["type","text","placeholder","Instituci\xF3n",3,"ngModelChange","ngModel"],["type","text","placeholder","Fecha de inicio",3,"ngModelChange","ngModel"],["type","text","placeholder","Fecha de finalizaci\xF3n",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Educaci\xF3n"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.myEducation.name,s)||(i.myEducation.name=s),s}),L(),ve(8,"br"),V(9,"input",4),ie("ngModelChange",function(s){return se(i.myEducation.plantel,s)||(i.myEducation.plantel=s),s}),L(),ve(10,"br"),V(11,"input",5),ie("ngModelChange",function(s){return se(i.myEducation.startDate,s)||(i.myEducation.startDate=s),s}),L(),ve(12,"br"),V(13,"input",6),ie("ngModelChange",function(s){return se(i.myEducation.endDate,s)||(i.myEducation.endDate=s),s}),L(),ve(14,"br"),V(15,"input",7),Re("click",function(){return i.agregarEducation()}),L()()()(),V(16,"div",1),sn(17,KU,7,4,"div",8),L()),r&2&&(Y(7),re("ngModel",i.myEducation.name),Y(2),re("ngModel",i.myEducation.plantel),Y(2),re("ngModel",i.myEducation.startDate),Y(2),re("ngModel",i.myEducation.endDate),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.educations))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var Uc=class{constructor(){this.name="",this.tipo="",this.fecha=""}};var dR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificate(t){return this.certificatesRef.add(P({},t))}deleteCertificate(t){return this.certificatesRef.doc(t).delete()}updateCertificate(t,r){return this.certificatesRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YU(n,e){if(n&1){let t=wn();V(0,"div",8)(1,"input",9),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.name,i)||(o.name=i),Ie(i)}),L(),V(2,"input",10),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.tipo,i)||(o.tipo=i),Ie(i)}),L(),V(3,"input",11),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.fecha,i)||(o.fecha=i),Ie(i)}),L(),V(4,"input",12),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateCertificado(i))}),L(),V(5,"input",13),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteCertificado(i.id))}),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.name),Y(),re("ngModel",t.tipo),Y(),re("ngModel",t.fecha)}}var hR=(()=>{class n{constructor(t){this.certificatesService=t,this.btntxt="Agregar",this.certificates=[],this.myCertificate=new Uc,this.certificatesService.getCertificates().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r})}agregarCertificado(){this.certificatesService.createCertificate(this.myCertificate).then(()=>{this.myCertificate=new Uc})}deleteCertificado(t){this.certificatesService.deleteCertificate(t)}updateCertificado(t){t.id&&this.certificatesService.updateCertificate(t.id,P({},t))}static{this.\u0275fac=function(r){return new(r||n)(ce(dR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-certificates"]],decls:16,vars:5,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","name","placeholder","Nombre del certificado",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","tipo","placeholder","Tipo",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","fecha","placeholder","Fecha",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text","placeholder","Nombre del certificado",3,"ngModelChange","ngModel"],["type","text","placeholder","Tipo",3,"ngModelChange","ngModel"],["type","text","placeholder","Fecha",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Certificados"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.myCertificate.name,s)||(i.myCertificate.name=s),s}),L(),ve(8,"br"),V(9,"input",4),ie("ngModelChange",function(s){return se(i.myCertificate.tipo,s)||(i.myCertificate.tipo=s),s}),L(),ve(10,"br"),V(11,"input",5),ie("ngModelChange",function(s){return se(i.myCertificate.fecha,s)||(i.myCertificate.fecha=s),s}),L(),ve(12,"br"),V(13,"input",6),Re("click",function(){return i.agregarCertificado()}),L()()()(),V(14,"div",1),sn(15,YU,6,3,"div",7),L()),r&2&&(Y(7),re("ngModel",i.myCertificate.name),Y(2),re("ngModel",i.myCertificate.tipo),Y(2),re("ngModel",i.myCertificate.fecha),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.certificates))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var $c=class{constructor(){this.lenguajes=""}};var fR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}createSkill(t){return this.skillsRef.add(P({},t))}deleteSkill(t){return this.skillsRef.doc(t).delete()}updateSkill(t,r){return this.skillsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JU(n,e){if(n&1){let t=wn();V(0,"div",6)(1,"input",7),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.lenguajes,i)||(o.lenguajes=i),Ie(i)}),L(),V(2,"input",8),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateSkill(i))}),L(),V(3,"input",9),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteSkill(i.id))}),L(),V(4,"span"),Ze(5),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.lenguajes),Y(4),Gm(t.lenguajes)}}var pR=(()=>{class n{constructor(t){this.skillsService=t,this.btntxt="Agregar",this.mySkill=new $c,this.skills=[],this.skillsService.getSkills().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r})}addSkill(){this.skillsService.createSkill(this.mySkill).then(()=>{this.mySkill=new $c})}deleteSkill(t){this.skillsService.deleteSkill(t)}updateSkill(t){t.id&&this.skillsService.updateSkill(t.id,{lenguajes:t.lenguajes})}static{this.\u0275fac=function(r){return new(r||n)(ce(fR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-skills"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","lenguajes","placeholder","Lenguaje","ngModel","",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Skills items"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.mySkill.lenguajes,s)||(i.mySkill.lenguajes=s),s}),L(),ve(8,"br"),V(9,"input",4),Re("click",function(){return i.addSkill()}),L()()()(),V(10,"div",1),sn(11,JU,6,2,"div",5),L()),r&2&&(Y(7),re("ngModel",i.mySkill.lenguajes),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.skills))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var Hc=class{constructor(){this.lenguaMaterna="",this.other=""}};var gR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguage(t){return this.languagesRef.add(P({},t))}deleteLanguage(t){return this.languagesRef.doc(t).delete()}updateLanguage(t,r){return this.languagesRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e$(n,e){if(n&1){let t=wn();V(0,"div",7)(1,"input",8),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.lenguaMaterna,i)||(o.lenguaMaterna=i),Ie(i)}),L(),V(2,"input",9),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.other,i)||(o.other=i),Ie(i)}),L(),V(3,"input",10),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateLenguaje(i))}),L(),V(4,"input",11),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteLenguaje(i.id))}),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.lenguaMaterna),Y(),re("ngModel",t.other)}}var mR=(()=>{class n{constructor(t){this.languagesService=t,this.btntxt="Agregar",this.languages=[],this.myLanguage=new Hc,this.languagesService.getLanguages().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r})}agregarLenguaje(){this.languagesService.createLanguage(this.myLanguage).then(()=>{this.myLanguage=new Hc})}deleteLenguaje(t){this.languagesService.deleteLanguage(t)}updateLenguaje(t){t.id&&this.languagesService.updateLanguage(t.id,P({},t))}static{this.\u0275fac=function(r){return new(r||n)(ce(gR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-languages"]],decls:14,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","lenguaMaterna","placeholder","Lengua materna",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","other","placeholder","Otros idiomas",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text","placeholder","Lengua materna",3,"ngModelChange","ngModel"],["type","text","placeholder","Otros idiomas",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Idiomas"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.myLanguage.lenguaMaterna,s)||(i.myLanguage.lenguaMaterna=s),s}),L(),ve(8,"br"),V(9,"input",4),ie("ngModelChange",function(s){return se(i.myLanguage.other,s)||(i.myLanguage.other=s),s}),L(),ve(10,"br"),V(11,"input",5),Re("click",function(){return i.agregarLenguaje()}),L()()()(),V(12,"div",1),sn(13,e$,5,2,"div",6),L()),r&2&&(Y(7),re("ngModel",i.myLanguage.lenguaMaterna),Y(2),re("ngModel",i.myLanguage.other),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.languages))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var qc=class{constructor(){this.personal="",this.profesional=""}};var yR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterest(t){return this.interestsRef.add(P({},t))}deleteInterest(t){return this.interestsRef.doc(t).delete()}updateInterest(t,r){return this.interestsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function n$(n,e){if(n&1){let t=wn();V(0,"div",7)(1,"input",8),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.personal,i)||(o.personal=i),Ie(i)}),L(),V(2,"input",9),ie("ngModelChange",function(i){let o=Ee(t).$implicit;return se(o.profesional,i)||(o.profesional=i),Ie(i)}),L(),V(3,"input",10),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.updateInteres(i))}),L(),V(4,"input",11),Re("click",function(){let i=Ee(t).$implicit,o=yt();return Ie(o.deleteInteres(i.id))}),L()()}if(n&2){let t=e.$implicit;Y(),re("ngModel",t.personal),Y(),re("ngModel",t.profesional)}}var vR=(()=>{class n{constructor(t){this.interestsService=t,this.btntxt="Agregar",this.interests=[],this.myInterest=new qc,this.interestsService.getInterests().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r})}agregarInteres(){this.interestsService.createInterest(this.myInterest).then(()=>{this.myInterest=new qc})}deleteInteres(t){this.interestsService.deleteInterest(t)}updateInteres(t){t.id&&this.interestsService.updateInterest(t.id,P({},t))}static{this.\u0275fac=function(r){return new(r||n)(ce(yR))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-interests"]],decls:14,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"container","color-light"],["type","text","name","personal","placeholder","Intereses personales",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","profesional","placeholder","Intereses profesionales",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","text","placeholder","Personal",3,"ngModelChange","ngModel"],["type","text","placeholder","Profesional",3,"ngModelChange","ngModel"],["type","submit","value","Actualizar",1,"btn",3,"click"],["type","submit","value","Eliminar",1,"btn",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"p"),Ze(3,"Intereses"),L()()(),V(4,"div",2)(5,"div",1)(6,"form")(7,"input",3),ie("ngModelChange",function(s){return se(i.myInterest.personal,s)||(i.myInterest.personal=s),s}),L(),ve(8,"br"),V(9,"input",4),ie("ngModelChange",function(s){return se(i.myInterest.profesional,s)||(i.myInterest.profesional=s),s}),L(),ve(10,"br"),V(11,"input",5),Re("click",function(){return i.agregarInteres()}),L()()()(),V(12,"div",1),sn(13,n$,5,2,"div",6),L()),r&2&&(Y(7),re("ngModel",i.myInterest.personal),Y(2),re("ngModel",i.myInterest.profesional),Y(2),un("value",i.btntxt),Y(2),an("ngForOf",i.interests))},dependencies:[En,Xt,At,Zt,Jt,jt,Lt]})}}return n})();var r$=[{path:"header",component:sR},{path:"workexperience",component:uR},{path:"education",component:lR},{path:"certificates",component:hR},{path:"skills",component:pR},{path:"languages",component:mR},{path:"interests",component:vR}],_R=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ft({type:n})}static{this.\u0275inj=ht({imports:[rv.forRoot(r$),rv]})}}return n})();var wR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(V(0,"h3")(1,"b"),Ze(2," admin-Cv App "),L()(),V(3,"nav")(4,"ul")(5,"li")(6,"a",0),Ze(7," header "),L()(),V(8,"li")(9,"a",1),Ze(10," work-experience "),L()(),V(11,"li")(12,"a",2),Ze(13," education "),L()(),V(14,"li")(15,"a",3),Ze(16," certificates "),L()(),V(17,"li")(18,"a",4),Ze(19," skills "),L()(),V(20,"li")(21,"a",5),Ze(22," languages "),L()(),V(23,"li")(24,"a",6),Ze(25," interests "),L()()()(),ve(26,"router-outlet"))},dependencies:[Zy,nS]})}}return n})();var ER={production:!1,firebaseConfig:{apiKey:"AIzaSyAyBf7fOuudemz4jZ92axVJildrlLNMbqI",authDomain:"willyrex-cv.firebaseapp.com",projectId:"willyrex-cv",storageBucket:"willyrex-cv.firebasestorage.app",messagingSenderId:"950767921518",appId:"1:950767921518:web:65e4e845f23ae75b2b797f",measurementId:"G-5TNE4MHSN7"}};var IR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ft({type:n,bootstrap:[wR]})}static{this.\u0275inj=ht({imports:[qb,pT,_R,ES.initializeApp(ER.firebaseConfig),iR]})}}return n})();Hb().bootstrapModule(IR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
